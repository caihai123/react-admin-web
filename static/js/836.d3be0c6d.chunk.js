"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[836],{97344:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(89526),s=n(20485),l=n(97839),o=n(48570),a=n(26806),i=n(70854),c=n.n(i),d=n(68334),u=n(74425),f=n(25342),p=n(89134),m=n(76934),h=n(33874),Z=n(88132),x=(0,u.i)((e=>{const{prefixCls:t,className:n,closeIcon:s,closable:l,type:o,title:a,children:i,footer:u}=e,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:b}=r.useContext(f.E_),j=b(),y=t||b("modal"),g=(0,Z.Z)(j),[C,P,w]=(0,h.ZP)(y,g),k=`${y}-confirm`;let v={};return v=o?{closable:null!=l&&l,title:"",footer:"",children:r.createElement(p.O,Object.assign({},e,{prefixCls:y,confirmPrefixCls:k,rootPrefixCls:j,content:i}))}:{closable:null==l||l,title:a,footer:null!==u&&r.createElement(m.$,Object.assign({},e)),children:i},C(r.createElement(d.s,Object.assign({prefixCls:y,className:c()(P,`${y}-pure-panel`,o&&k,o&&`${k}-${o}`,n,w,g)},x,{closeIcon:(0,m.b)(y,s),closable:l},v)))})),b=n(4894);function j(e){return(0,l.ZP)((0,l.uW)(e))}const y=a.Z;y.useModal=b.Z,y.info=function(e){return(0,l.ZP)((0,l.cw)(e))},y.success=function(e){return(0,l.ZP)((0,l.vq)(e))},y.error=function(e){return(0,l.ZP)((0,l.AQ)(e))},y.warning=j,y.warn=j,y.confirm=function(e){return(0,l.ZP)((0,l.Au)(e))},y.destroyAll=function(){for(;o.Z.length;){const e=o.Z.pop();e&&e()}},y.config=l.ai,y._InternalPanelDoNotUseOrYouWillBeFired=x;var g=y,C=n(74918),P=n(96799),w=n(5416),k=n(95267),v=n(49839),I=n(67557);const O=(0,r.forwardRef)((function(e,t){const{title:n,width:l,submitText:o="确定",cancelText:a="取消",children:i,modalProps:c,formProps:d,onFinish:u,footer:f,initialValues:p,afterClose:m}=e,[h,{set:Z}]=(0,s.Z)(!1),[x,b]=(0,k.ZP)(!1);return(0,r.useImperativeHandle)(t,(()=>({open:()=>Z(!0),close:()=>Z(!1)}))),(0,I.jsx)(g,{title:n,open:h,onCancel:()=>Z(!1),width:l,footer:f||(0,I.jsxs)(C.Z,{children:[(0,I.jsx)(P.ZP,{onClick:()=>Z(!1),children:a}),(0,I.jsx)(P.ZP,{type:"primary",loading:x,onClick:()=>e.form?.submit(),children:o})]}),centered:!0,wrapClassName:"custom-modal-style",maskClosable:!1,afterClose:m,...c,children:(0,I.jsx)(w.Z,{form:e.form,autoComplete:"off",onFinish:e=>{const t=u?.(e);t instanceof Promise&&(b.setTrue(),t.then((()=>Z(!1))).finally((()=>b.setFalse())))},layout:"vertical",initialValues:p,...d,children:i})})}));var S=(0,v.Z)(O,{useModal:function(e){const t=(0,r.useRef)(null),[n]=w.Z.useForm();return[t,n,(0,I.jsx)(O,{ref:t,form:n,...e})]}})},49839:function(e,t,n){function r(e,t){const n=e;return Object.keys(t).forEach((e=>{Object.defineProperty(n,e,{value:t[e],writable:!1,enumerable:!0})})),n}n.d(t,{Z:function(){return r}})},75875:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(89526),s=n(72816),l=n(96799),o=n(74918),a=n(58047),i=n(25877),c=n(20485),d=n(49367),u=n(95267),f=n(67557);function p({defaultChecked:e=!1,onChange:t=(()=>null)}){const[n,{set:r}]=(0,c.Z)(e),[s,{setTrue:l,setFalse:o}]=(0,u.ZP)(!1);return(0,f.jsx)(d.Z,{checked:n,loading:s,onChange:e=>{r(e),l(),t(e)?.catch((()=>{r(!e)})).finally((()=>o()))}})}var m=n(5416),h=n(31363),Z=n(95694),x=n(97344),b=n(49839);const j=r.forwardRef(((e,t)=>{const{message:n}=s.Z.useApp(),[l,o]=r.useState(""),[a,i,c]=x.Z.useModal({title:l?"编辑":"新增",width:600,afterClose:()=>{o(""),i?.resetFields()},onFinish:function(t){const r=l?"/api/role/update":"/api/role/add",s=l?"更新成功！":"新增成功！",o=l?{id:l,...t}:t;return Z.Z.post(r,o).then((()=>{n.success(s),e.callback(l?void 0:1)}))},children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,f.jsx)(h.Z,{placeholder:"请输入"})}),(0,f.jsx)(m.Z.Item,{name:"description",label:"备注",children:(0,f.jsx)(h.Z.TextArea,{placeholder:"请输入"})})]})});return r.useImperativeHandle(t,(()=>({addStart:()=>a.current?.open(),editStart:e=>{o(e.id),i?.setFieldsValue(e),a.current?.open()}}))),c}));var y=(0,b.Z)(j,{useModal:function(e){const t=r.useRef(null);return[t,(0,f.jsx)(j,{ref:t,...e})]}}),g=n(68347);const C=(e,t=1,n=10)=>Z.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:n}),P=(e,t)=>Z.Z.post("/api/role/status/update",{id:e,status:t});var w=n(63953);function k(){const{message:e}=s.Z.useApp(),t=(0,r.useRef)(null),[n,c]=y.useModal({callback:e=>t.current?.refresh(e)}),[d,u]=(0,w.Fu)({render:e=>(0,f.jsx)(l.ZP,{type:"primary",ghost:!0,size:"small",onClick:()=>n.current?.editStart(e),children:"编辑"}),permission:"edit"},{render:e=>(0,f.jsx)(l.ZP,{type:"primary",size:"small",children:"授权"}),permission:"accredit"},{render:e=>(0,f.jsx)(l.ZP,{type:"primary",danger:!0,size:"small",children:"删除"}),permission:"del"}),m=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,n)=>{const{enabled:r,disabled:s}=g.roleEnabledState.enum;return(0,f.jsx)(p,{defaultChecked:t===r,onChange:t=>P(n.id,t?r:s).then((()=>{e.success("切换成功！")}))})},type:"select",options:g.roleEnabledState.options},{title:"操作",key:"action",render:e=>(0,f.jsx)(o.Z,{children:d(e)}),width:100,fixed:"right",hideInSearch:!0,hideInTable:!u}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{ref:t,columns:m,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:n})=>C(e,t,n).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>(0,f.jsx)(w.ZP,{permission:"add",children:(0,f.jsx)(l.ZP,{type:"primary",icon:(0,f.jsx)(a.Z,{}),onClick:()=>n.current?.addStart(),children:"新增"})})}),c]})}}}]);
//# sourceMappingURL=836.d3be0c6d.chunk.js.map