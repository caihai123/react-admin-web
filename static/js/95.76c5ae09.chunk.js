"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[95],{23095:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var i=n(89526),l=n(24059),s=n(74918),r=n(64785),c=n(96799),o=n(75452),a=n(18740),d=n(4677),u=n(95810),p=n(68175),h=n(84878),x=n(96479),f=n(10011),g=n(53139),y=n(88241),j=n(31363),m=n(90569),Z=n(45303),v=n(47575),b=n(64871),w=n(48126),k=n(37756),S=n(22390),z=n(95694),_=n(22701),C=(0,n(60436).Z)({scriptUrl:"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js"}),P=n(57744),I=n(67557);function O(e){const{src:t,type:n,height:i}=e;switch(n){case"img":return(0,I.jsx)(P.Z,{src:t,height:i,preview:!1});case"doc":return(0,I.jsx)(C,{type:"icon-file_txt",style:{fontSize:i}});case"video":return(0,I.jsx)(C,{type:"icon-file_video",style:{fontSize:i}});case"music":return(0,I.jsx)(C,{type:"icon-file_music",style:{fontSize:i}});default:return(0,I.jsx)(C,{type:"icon-File",style:{fontSize:i}})}}var T=n(68347),B=n(91317);const N={height:250,appendPadding:10,data:[{type:"图片",value:4544},{type:"文档",value:3321},{type:"视频",value:3113},{type:"音频",value:3113},{type:"其他",value:2341}],angleField:"value",colorField:"type",innerRadius:.6,label:!1,legend:!1,statistic:!1};function R(){return(0,I.jsx)(B.Z,{...N})}var A=n(20485);const D=e=>{const t=window.getComputedStyle(e,null);return{left:Number.parseInt(t.paddingLeft,10)||0,right:Number.parseInt(t.paddingRight,10)||0,top:Number.parseInt(t.paddingTop,10)||0,bottom:Number.parseInt(t.paddingBottom,10)||0}};function E({text:e,...t}){const n=(0,i.useRef)(null),{isOverflowX:l}=function(e){const[t,{set:n}]=(0,A.Z)(!1),[l,{set:s}]=(0,A.Z)(!1);return function(e,t){(0,i.useEffect)((()=>{const n="current"in e?e.current:e,i=new ResizeObserver((e=>{for(const n of e){const{clientWidth:e,clientHeight:i}=n.target;t()}}));return n&&i.observe(n),()=>{i.disconnect()}}),[e,t])}(e,(()=>{const t="current"in e?e.current:e;if(t){const e=document.createRange();e.setStart(t,0),e.setEnd(t,t.childNodes.length);const i=D(t),l=e.getBoundingClientRect();n(l.width+i.left+i.right>t.offsetWidth||t.scrollWidth>t.offsetWidth),s(l.height+i.top+i.bottom>t.offsetHeight||t.scrollHeight>t.offsetHeight)}})),{isOverflowX:t,isOverflowY:l}}(n);return(0,I.jsx)("div",{ref:n,className:"ellipsis",...t,title:l?e:void 0,children:e})}function F(){const{token:{colorPrimary:e}}=l.Z.useToken(),[t,n]=(0,i.useState)("all"),{data:P,pagination:B,loading:N}=(0,k.Z)((({current:e,pageSize:n})=>z.Z.post("/api/file/page",{pageIndex:e,pageSize:n,type:t}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}}))),{refreshDeps:[t],defaultPageSize:20}),A=[{title:"文件",key:"file",render:(e,t)=>(0,I.jsx)(O,{type:T.fileType.map[t.type].alias,src:t.url,height:36})},{title:"文件地址",dataIndex:"url"},{title:"文件大小",dataIndex:"size"},{title:"创建时间",dataIndex:"createDate"},{title:"操作",key:"action",fixed:"right",width:150,render:(e,t)=>(0,I.jsxs)(s.Z,{size:"middle",children:[(0,I.jsx)(r.Z,{title:"下载",mouseEnterDelay:1,children:(0,I.jsx)(c.ZP,{type:"primary",icon:(0,I.jsx)(m.Z,{})})}),(0,I.jsx)(r.Z,{title:"删除",mouseEnterDelay:1,children:(0,I.jsx)(c.ZP,{danger:!0,icon:(0,I.jsx)(Z.Z,{})})})]})}],D={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,current:B.current,pageSize:B.pageSize,total:B.total,onChange:B.onChange},[F,{toggle:H}]=(0,S.Z)("list","table"),W={list:(0,I.jsx)(o.Z,{spinning:N,children:P?.list.length?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridGap:16},children:P?.list.map((e=>(0,I.jsxs)("div",{style:{height:150,padding:10,textAlign:"center"},children:[(0,I.jsx)(O,{type:T.fileType.map[e.type].alias,src:e.url,height:60}),(0,I.jsx)(E,{text:(0,_.Bb)(e.url),style:{lineHeight:2,padding:"0 10px"}})]},e.id)))}),(0,I.jsx)(a.Z,{style:{marginTop:16,textAlign:"right"},...D,hideOnSinglePage:!0})]}):(0,I.jsx)(d.Z,{})}),table:(0,I.jsx)(u.Z,{rowKey:"id",dataSource:P?.list,columns:A,pagination:D,loading:N})};return(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsxs)("div",{style:{flex:"0 0 250px"},children:[(0,I.jsxs)(p.Z,{children:[(0,I.jsx)("div",{children:"文件管理 ✨"}),(0,I.jsx)(h.Z,{dashed:!0,style:{margin:"8px 0"}}),(0,I.jsx)(x.Z,{items:[{key:"file",label:"文件类型",icon:(0,I.jsx)(v.Z,{}),children:[{key:"all",label:"全部",icon:(0,I.jsx)(C,{type:"icon-files"})},{key:"img",label:"图片",icon:(0,I.jsx)(C,{type:"icon-file_img"})},{key:"doc",label:"文档",icon:(0,I.jsx)(C,{type:"icon-file_txt"})},{key:"video",label:"视频",icon:(0,I.jsx)(C,{type:"icon-file_video"})},{key:"music",label:"音频",icon:(0,I.jsx)(C,{type:"icon-file_music"})},{key:"other",label:"其他",icon:(0,I.jsx)(C,{type:"icon-File"})}]}],selectedKeys:["file",t],defaultOpenKeys:["file"],mode:"inline",style:{border:"none"},onClick:({key:e})=>n(e)})]}),(0,I.jsxs)(p.Z,{style:{marginTop:16},children:[(0,I.jsxs)(f.Z,{align:"middle",style:{textAlign:"center"},children:[(0,I.jsx)(g.Z,{span:10,children:(0,I.jsx)(y.Z,{title:"储存容量",value:5,suffix:"MB",valueStyle:{color:e}})}),(0,I.jsx)(g.Z,{span:4,children:(0,I.jsx)(h.Z,{type:"vertical"})}),(0,I.jsx)(g.Z,{span:10,children:(0,I.jsx)(y.Z,{title:"数量",value:100,valueStyle:{color:e}})})]}),(0,I.jsx)(h.Z,{style:{margin:"8px 0"}}),(0,I.jsx)(R,{})]})]}),(0,I.jsx)("div",{style:{flex:"auto",padding:"0px 16px"},children:(0,I.jsxs)(p.Z,{children:[(0,I.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,I.jsx)(s.Z,{children:(0,I.jsx)(j.Z.Search,{enterButton:"查询",placeholder:"请输入文件名"})}),(0,I.jsxs)(s.Z,{children:[(0,I.jsx)(c.ZP,{type:"primary",icon:(0,I.jsx)(b.Z,{}),children:"上传"}),(0,I.jsx)(c.ZP,{children:"批量操作"}),(0,I.jsx)(r.Z,{title:"视图",mouseEnterDelay:1,children:(0,I.jsx)(c.ZP,{icon:"table"===F.view?(0,I.jsx)(w.Z,{}):(0,I.jsx)(v.Z,{}),onClick:H})})]})]}),(0,I.jsx)(h.Z,{dashed:!0,style:{margin:"16px 0"}}),W[F]]})})]})}},22701:function(e,t,n){n.d(t,{Bb:function(){return i},Zm:function(){return s},ff:function(){return r},p$:function(){return l}});const i=function(e){const t=e.split("/"),n=t[t.length-1],i=n.lastIndexOf(".");return i<=0?n:n.substring(0,i)+n.substring(i)},l=function(e){if("object"!=typeof e||null===e)return e;const t=Array.isArray(e)?[]:{};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=l(e[n]));return t},s=function(e=[],t){const n=l(e),i=e=>e.map((e=>{const n=i(e.children||[]);return t(e)?(e.children=n.length>0?n:void 0,e):n&&n.length>0?(e.children=n,e):null})).filter((e=>null!==e));return i(n)},r=function(e=[],t){const n=e=>e.map((e=>{const i=t({...e});return i.children&&i.children.length>0&&(i.children=n(i.children)),i}));return n(e)}}}]);
//# sourceMappingURL=95.76c5ae09.chunk.js.map