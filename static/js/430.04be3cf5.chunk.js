"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[430],{86430:function(e,t,n){n.d(t,{Z:function(){return X}});var r=n(89526),l=n(5416),i=n(68175),s=n(74918),a=n(96799),o=n(87806),c=n(31439),u=n(54437),d=n(78589),m=n(67557);const h="188px",p=(0,u.ZP)(l.Z)`
  position: relative;
  overflow-y: hidden;
  padding-top: 16px;
  &:after {
    content: "";
    display: inline-block;
    width: ${h};
    height: 32px;
    vertical-align: top;
    margin-bottom: 16px;
  }
  & .ant-form-item {
    margin-bottom: 16px;
  }
`,f=(0,u.ZP)(l.Z.Item)`
  position: absolute;
  right: -16px;
  bottom: 0;
  z-index: 10;
`;var x=(0,r.forwardRef)((function(e,t){const[n]=l.Z.useForm(),[u,{setTrue:x,setFalse:g}]=(0,d.Z)(!1),{children:y,style:j,className:b,...Z}=e,v=function(){n.resetFields(),n.submit()};return(0,r.useImperativeHandle)(t,(()=>({submit:n.submit,reset:v}))),(0,m.jsx)(i.Z,{styles:{body:{paddingTop:0,paddingBottom:0}},style:j,className:b,children:(0,m.jsxs)(p,{layout:"inline",style:{height:u?"auto":"64px",paddingRight:u?"0":h},form:n,...Z,children:[y,(0,m.jsx)(f,{children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(a.ZP,{type:"primary",htmlType:"submit",children:"查询"}),(0,m.jsx)(a.ZP,{onClick:()=>v(),children:"重置"}),u?(0,m.jsxs)(a.ZP,{type:"link",style:{padding:0},onClick:()=>g(),children:["收起",(0,m.jsx)(o.Z,{style:{marginInlineStart:0}})]}):(0,m.jsxs)(a.ZP,{type:"link",style:{padding:0},onClick:()=>x(),children:["展开",(0,m.jsx)(c.Z,{style:{marginInlineStart:0}})]})]})})]})})})),g=n(24059),y=n(64785),j=n(71992),b=n(95810),Z={"tools-bar":"ghwuoi3NE3Ry7s7fNzAi","header-title":"mtRVkLbROTli4p1ohQ5i","tool-right":"gpJXWmO55r2tH9Z_hXa6","toolbar-setting":"whG6r6ufswl2doZWNUEI","toolbar-setting-item":"te8gfQS8fuVGrAEe5Wko","batch-bar":"dDNrcy2mCFFeBtzOHKWq"},v=n(18001),k=n(2652),I=n.n(k),w=n(54169),S=n(64622),T=n(48425),R=n(46044),P=n(59827),C=n(84878),N=function(e){const{children:t,value:n,onChange:l,options:i}=e,s=i.map((e=>e.value)),[o,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!0),h=e=>{l(e),c(!!e.length&&e.length<s.length),d(e.length===s.length)};return(0,m.jsx)(R.Z,{arrow:!1,content:(0,m.jsxs)("div",{style:{minWidth:176},children:[(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,m.jsx)(P.Z,{indeterminate:o,onChange:e=>{l(e.target.checked?s:[]),c(!1),d(e.target.checked)},checked:u,children:"列展示"}),(0,m.jsx)(a.ZP,{type:"link",style:{height:22,lineHeight:1,padding:0},onClick:()=>h(s),children:"重置"})]}),(0,m.jsx)(C.Z,{style:{margin:"4px 0"}}),(0,m.jsx)(P.Z.Group,{value:n,onChange:e=>h(e),style:{display:"block"},children:i.map((e=>(0,m.jsx)(P.Z,{style:{display:"flex",margin:0},value:e.value,children:e.label},e.value)))})]}),placement:"bottomRight",trigger:"click",children:t})},F=n(31363);function z({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)(F.Z,{placeholder:`请输入${e.title}`,...e.fieldProps})})}var B=n(54374),A=n(53725);function O({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)(B.default,{placeholder:`请选择${e.title}`,style:{width:183},allowClear:!0,...e.fieldProps,children:e.options.map((e=>(0,m.jsx)(B.default.Option,{value:e.value,children:e.color?(0,m.jsx)(A.Z,{color:e.color,text:e.label}):e.label},e.value)))})})}function K({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)(P.Z.Group,{options:e.options,...e.fieldProps})})}var $=n(49155);function q({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)($.ZP.Group,{options:e.options,...e.fieldProps})})}var D=n(81867);function E({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)(D.default,{...e.fieldProps})})}const{RangePicker:G}=D.default;function H({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)(G,{style:{width:250},...e.fieldProps})})}var V=n(91117);function W({item:e}){return(0,m.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,m.jsx)(V.Z,{placeholder:`请选择${e.title}`,treeData:e.options,style:{width:183},allowClear:!0,...e.fieldProps})})}function _({item:e}){if(e.renderFormItem)return e.renderFormItem();switch(e.type){case"select":return(0,m.jsx)(O,{item:e});case"checkbox":return(0,m.jsx)(K,{item:e});case"radio":return(0,m.jsx)(q,{item:e});case"date":return(0,m.jsx)(E,{item:e});case"dateRange":return(0,m.jsx)(H,{item:e});case"treeSelect":return(0,m.jsx)(W,{item:e});default:return(0,m.jsx)(z,{item:e})}}var M=n(8139);const Q=function(e){return e.key||e.dataIndex},J="large",U=(0,r.forwardRef)((function(e,t){const{dataSource:n,columns:l=[],search:o=!0,toolBarRender:c=null,headerTitle:u,batchBarRender:d=null,tableRowSelection:h={},pagination:p=!0,loading:f,onRefresh:k,onSubmit:I,onReset:R}=e,P=(0,r.useMemo)((()=>Object.fromEntries(l.filter((e=>void 0!==e.initialValue)).map((({dataIndex:e,initialValue:t})=>[e,t])))),[l]),C=(0,r.useMemo)((()=>l.filter((e=>!0!==e.hideInSearch)).map((e=>(0,m.jsx)(_,{item:e},Q(e))))),[l]),F=(0,r.useMemo)((()=>l.filter((e=>!0!==e.hideInTable))),[l]),[z,B]=(0,r.useState)(F.map((e=>Q(e)))),[A,O]=(0,r.useState)(P),K=(0,r.useRef)(null),$=(0,v.Z)((({current:t,pageSize:r})=>!Array.isArray(n)&&e.request?.(A,{current:t,pageSize:r})),{refreshDeps:[A],defaultCurrent:p?.current||1,defaultPageSize:p?.pageSize||10,loadingDelay:0}),q=(0,r.useMemo)((()=>{const e=Array.isArray(n),t={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,style:{marginBottom:-8},...p},{data:r,pagination:l,refresh:i}=$;return{list:e?n:r?.list,pagination:!!p&&(e?t:{current:l.current,pageSize:l.pageSize,total:l.total,onChange:l.onChange,...t}),refresh:t=>{e||(t&&t!==l.current?l.changeCurrent(t):i()),k?.(A)}}}),[n,$,p,A,k]),[D,{setTrue:E,setFalse:G}]=(0,M.ZP)("boolean"==typeof f&&f);(0,r.useEffect)((()=>{const e=Array.isArray(n);("boolean"===f?f:!e&&$.loading)?E():G()}),[n,f,$.loading,E,G]);const[H,V]=(0,r.useState)(J),[W,U]=(0,r.useState)([]);(0,r.useImperativeHandle)(t,(()=>({refresh:q.refresh,search:()=>{const e=K?.current?.submit;e?e():O(null),I?.(A)},reset:()=>{const e=K?.current?.reset;e?e():O(null),R?.(A)},clearSelected:()=>U([])})));const{token:{borderRadius:X,controlItemBgActive:L,colorText:Y}}=g.Z.useToken();return(0,m.jsxs)(m.Fragment,{children:[o&&(0,m.jsx)(x,{ref:K,onFinish:e=>O(e),initialValues:P,children:C}),(0,m.jsxs)(i.Z,{style:{marginTop:o?16:0},styles:{body:{paddingTop:16,paddingBottom:24}},children:[(0,m.jsxs)("div",{className:Z["tools-bar"],style:{display:W.length>0?"none":"",color:Y},children:[(0,m.jsx)("div",{className:Z["header-title"],children:"function"==typeof u?u():u}),(0,m.jsxs)("div",{className:Z["tool-right"],children:[c&&(0,m.jsx)(s.Z,{children:"function"==typeof c?c(A):c}),(0,m.jsxs)("div",{className:Z["toolbar-setting"],children:[(0,m.jsx)("div",{className:Z["toolbar-setting-item"],onClick:()=>q.refresh(),children:(0,m.jsx)(y.Z,{title:"刷新",children:(0,m.jsx)(w.Z,{})})}),(0,m.jsx)(j.Z,{overlayStyle:{width:80},menu:{items:[{key:"large",label:"默认"},{key:"middle",label:"中等"},{key:"small",label:"紧凑"}],selectable:!0,defaultSelectedKeys:[J],onClick:({key:e})=>V(e)},trigger:["click"],children:(0,m.jsx)("div",{className:Z["toolbar-setting-item"],children:(0,m.jsx)(y.Z,{title:"密度",children:(0,m.jsx)(S.Z,{})})})}),(0,m.jsx)(N,{value:z,options:F.map((e=>({label:e.title,value:Q(e)}))),onChange:e=>B(e),children:(0,m.jsx)("div",{className:Z["toolbar-setting-item"],children:(0,m.jsx)(y.Z,{title:"列设置",children:(0,m.jsx)(T.Z,{})})})})]})]})]}),d&&(0,m.jsxs)("div",{className:Z["batch-bar"],style:{display:W.length>0?"":"none",color:Y,backgroundColor:L,borderRadius:X},children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("span",{children:["已选 ",W.length," 项"]}),(0,m.jsx)(a.ZP,{type:"link",onClick:()=>U([]),children:"取消选择"})]}),(0,m.jsx)(s.Z,{children:"function"==typeof d?d(W):d})]}),(0,m.jsx)("div",{className:Z.main,children:(0,m.jsx)(b.Z,{rowKey:e.rowKey,dataSource:q.list,columns:F.filter((e=>{const t=Q(e);return z.includes(t)})),pagination:q.pagination,loading:D,rowSelection:d?{type:"checkbox",selectedRowKeys:W,onChange:e=>U(e),preserveSelectedRowKeys:!0,...h}:void 0,bordered:!0,size:H,scroll:{x:"max-content"}})})]})]})}));U.propTypes={rowKey:I().string.isRequired,dataSource:I().array,request:I().func,onRefresh:I().func,onSubmit:I().func,onReset:I().func,columns:I().array.isRequired,search:I().bool,loading:I().bool,toolBarRender:I().oneOfType([I().element,I().array,I().func]),headerTitle:I().oneOfType([I().element,I().array,I().func,I().string]),batchBarRender:I().oneOfType([I().element,I().array,I().func]),tableRowSelection:I().object,pagination:I().oneOfType([I().object,I().bool])};var X=U},8139:function(e,t,n){n.d(t,{B2:function(){return a},UK:function(){return s},ZP:function(){return o}});var r=n(89526),l=n(78589);const i=()=>(new Date).getTime(),s=function(e,t=500){const[n,{set:i}]=(0,l.Z)(e),s=(0,r.useRef)(null);return[n,{setTrue:()=>{s.current||(s.current=setTimeout((()=>i(!0)),t||0))},setFalse:()=>{s.current&&(clearTimeout(s.current),s.current=null),i(!1)}}]},a=function(e,t=500){const[n,{set:s}]=(0,l.Z)(e),a=(0,r.useRef)(null),[o,c]=(0,r.useState)();return[n,{setTrue:()=>{a.current&&(clearTimeout(a.current),a.current=null),s(!0),c(i())},setFalse:()=>{if(a.current)return;const e=i(),n=e-(o||e);a.current=setTimeout((()=>s(!1)),n>t?0:t-n),c(void 0)}}]};function o(e=!1,t){const[n,{set:s}]=(0,l.Z)(e),a=(0,r.useRef)(null),[o,c]=(0,r.useState)(),u={delay:300,keep:500,...t};return[n,{setTrue:()=>{a.current&&(clearTimeout(a.current),a.current=null),a.current=setTimeout((()=>{s(!0),c(i())}),u.delay||0)},setFalse:()=>{a.current&&(clearTimeout(a.current),a.current=null);const{keep:e=0}=u,t=i(),n=t-(o||t);a.current=setTimeout((()=>s(!1)),n>e?0:e-n),c(void 0)}}]}}}]);
//# sourceMappingURL=430.04be3cf5.chunk.js.map