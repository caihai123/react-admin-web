{"version":3,"file":"static/js/924.6bd57ac6.chunk.js","mappings":"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","sources":["webpack://react-admin-web/./src/components/utils/createCompoundedComponent.ts","webpack://react-admin-web/./src/components/CustomIcon.jsx","webpack://react-admin-web/./src/components/AudioModal.tsx","webpack://react-admin-web/./src/components/VideoModal.tsx","webpack://react-admin-web/./src/pages/system/file/components/FileView.jsx","webpack://react-admin-web/./src/pages/system/file/components/PieView.jsx","webpack://react-admin-web/./src/hooks/useContentOverflow.ts","webpack://react-admin-web/./src/pages/system/file/components/NameEllipsis.jsx","webpack://react-admin-web/./src/hooks/useDomSize.ts","webpack://react-admin-web/./src/pages/system/file/index.jsx"],"sourcesContent":["import React from \"react\";\r\n\r\n// 定义子组件的类型\r\ninterface SubComponents {\r\n  [key: string]: any;\r\n}\r\n\r\n// 主组件和子组件的组合类型\r\ntype CompoundedComponent<F, T> = F & T;\r\n\r\n/**\r\n * 创建组合组件\r\n */\r\nexport default function createCompoundedComponent<\r\n  F extends React.FC<any>,\r\n  T extends SubComponents\r\n>(mainComponent: F, subComponents: T): CompoundedComponent<F, T> {\r\n  // 将主组件转换为复合组件类型\r\n  const Component = mainComponent as CompoundedComponent<F, T>;\r\n\r\n  // 使用 Object.defineProperty 添加子组件到主组件上\r\n  Object.keys(subComponents).forEach((key) => {\r\n    Object.defineProperty(Component, key, {\r\n      value: subComponents[key],\r\n      writable: false, // 确保子组件不可变\r\n      enumerable: true,\r\n    });\r\n  });\r\n\r\n  return Component;\r\n}\r\n","import { createFromIconfontCN } from \"@ant-design/icons\";\r\n\r\n/**\r\n * 自定义图标\r\n */\r\nconst CustomIcon = createFromIconfontCN({\r\n  scriptUrl: \"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js\", // 在 iconfont.cn 上生成\r\n});\r\n\r\nexport default CustomIcon;\r\n","import { theme, Button } from \"antd\";\r\nimport { CloseOutlined } from \"@ant-design/icons\";\r\nimport Draggable from \"react-draggable\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport { createPortal } from \"react-dom\";\r\nimport createCompoundedComponent from \"@/components/utils/createCompoundedComponent\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst fadeIn = keyframes`\r\n    from {\r\n      transform: scaleY(0);\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      transform: scaleY(1);\r\n      opacity: 1;\r\n    }\r\n`;\r\n\r\nconst fadeOut = keyframes`\r\n    from {\r\n      transform: scaleY(1);\r\n      opacity: 1;\r\n    }\r\n    to {\r\n      transform: scaleY(0);\r\n      opacity: 0;\r\n    }\r\n`;\r\n\r\nconst AudioModalStyled = styled.div`\r\n  display: none;\r\n  &.show {\r\n    display: block;\r\n    animation: ${fadeIn} 0.3s forwards;\r\n    transform-origin: top;\r\n  }\r\n  &.hide {\r\n    display: block;\r\n    animation: ${fadeOut} 0.3s forwards;\r\n    transform-origin: top;\r\n  }\r\n`;\r\n\r\ntype Props = {\r\n  visible: boolean;\r\n  audioSrc: string;\r\n  name: string;\r\n  onClose?: () => void;\r\n};\r\n\r\nconst AudioModal = (props: Props) => {\r\n  const {\r\n    token: { colorPrimary },\r\n  } = theme.useToken();\r\n\r\n  return createPortal(\r\n    <div className={`video-modal`}>\r\n      <Draggable bounds={\"body\"} handle=\".drag-handler\">\r\n        <AudioModalStyled\r\n          className={props.visible ? \"show\" : \"hide\"}\r\n          style={{\r\n            width: 320,\r\n            position: \"fixed\",\r\n            top: 60,\r\n            right: 0,\r\n            borderRadius: 8,\r\n            boxShadow: \"0 2px 12px 0 rgba(0, 0, 0, 0.1)\",\r\n            background: colorPrimary,\r\n            zIndex: 999,\r\n          }}\r\n        >\r\n          <div style={{ padding: \"10px 14px 14px 14px\" }}>\r\n            <div\r\n              className=\"drag-handler\"\r\n              style={{\r\n                color: \"#fff\",\r\n                fontSize: 16,\r\n                marginBottom: 10,\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n                cursor: \"move\",\r\n                userSelect: \"none\",\r\n              }}\r\n            >\r\n              <div className=\"audio-name ellipsis\">{props.name}</div>\r\n              <Button\r\n                type=\"text\"\r\n                icon={<CloseOutlined />}\r\n                onClick={() => props.onClose?.()}\r\n                style={{ color: \"#fff\" }}\r\n                size=\"small\"\r\n              ></Button>\r\n            </div>\r\n\r\n            <audio\r\n              src={props.audioSrc}\r\n              controls\r\n              autoPlay\r\n              style={{ width: \"100%\" }}\r\n            ></audio>\r\n          </div>\r\n        </AudioModalStyled>\r\n      </Draggable>\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\nlet root: ReactDOM.Root | null;\r\n\r\n/** 函数式调用 会挂载到body下 重复调用时只会保留最后一个*/\r\nconst showAudioModal = function (src: Props[\"audioSrc\"], name: Props[\"name\"]) {\r\n  if (!root) {\r\n    const container = document.createDocumentFragment();\r\n    document.body.appendChild(container);\r\n    root = ReactDOM.createRoot(container);\r\n  }\r\n\r\n  const handleClose = () => {\r\n    root?.render(<AudioModal audioSrc={src} name={name} visible={false} />);\r\n    setTimeout(() => {\r\n      root?.unmount();\r\n      root = null;\r\n    }, 350);\r\n  };\r\n\r\n  root.render(\r\n    <AudioModal\r\n      audioSrc={src}\r\n      name={name}\r\n      visible={true}\r\n      onClose={() => handleClose()}\r\n    />\r\n  );\r\n};\r\n\r\nexport default createCompoundedComponent(AudioModal, { showAudioModal });\r\n","import { Modal } from \"antd\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport createCompoundedComponent from \"@/components/utils/createCompoundedComponent\";\r\n\r\ntype Props = {\r\n  visible: boolean;\r\n  url: string;\r\n  onClose?: () => void;\r\n  width?: number | string;\r\n  height?: number | string;\r\n  autoPlay?: boolean;\r\n};\r\n\r\nconst VideoModal = function (props: Props) {\r\n  const { width = 800, height, autoPlay = true } = props;\r\n\r\n  return (\r\n    <Modal\r\n      open={props.visible}\r\n      onCancel={props.onClose}\r\n      footer={null}\r\n      centered\r\n      width={width}\r\n      closeIcon={false}\r\n    >\r\n      <video\r\n        width=\"100%\"\r\n        height={height}\r\n        autoPlay={autoPlay}\r\n        controls\r\n        src={props.url}\r\n      ></video>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nlet root: ReactDOM.Root | null;\r\n\r\n/** 函数式调用 会挂载到body下 重复调用时只会保留最后一个*/\r\nconst showModal = function (src: Props[\"url\"]) {\r\n  if (!root) {\r\n    const container = document.createDocumentFragment();\r\n    document.body.appendChild(container);\r\n    root = ReactDOM.createRoot(container);\r\n  }\r\n\r\n  const handleClose = () => {\r\n    root?.render(<VideoModal url={src} visible={false} />);\r\n  };\r\n\r\n  root.render(\r\n    <VideoModal url={src} visible={true} onClose={() => handleClose()} />\r\n  );\r\n};\r\n\r\nexport default createCompoundedComponent(VideoModal, { showModal });\r\n","import { Image } from \"antd\";\r\nimport MyIcon from \"@/components/CustomIcon\";\r\nimport AudioModal from \"@/components/AudioModal\";\r\nimport VideoModal from \"@/components/VideoModal\";\r\nimport { getFilenameFromPath } from \"@/utils/utils\";\r\n\r\nexport default function FileView(props) {\r\n  const { src, type, height } = props;\r\n\r\n  switch (type) {\r\n    case \"img\":\r\n      // 图片\r\n      return <Image src={src} height={height} preview={true} />;\r\n    case \"doc\":\r\n      // 文档\r\n      return <MyIcon type=\"icon-file_txt\" style={{ fontSize: height }} />;\r\n    case \"video\":\r\n      // 视频\r\n      return (\r\n        <MyIcon\r\n          type=\"icon-file_video\"\r\n          style={{ fontSize: height }}\r\n          onClick={() => VideoModal.showModal(src)}\r\n        />\r\n      );\r\n    case \"audio\":\r\n      // 音频\r\n      return (\r\n        <MyIcon\r\n          type=\"icon-file_music\"\r\n          style={{ fontSize: height }}\r\n          onClick={() =>\r\n            AudioModal.showAudioModal(src, getFilenameFromPath(src))\r\n          }\r\n        />\r\n      );\r\n    default:\r\n      return <MyIcon type=\"icon-File\" style={{ fontSize: height }} />;\r\n  }\r\n}\r\n","import { Pie } from \"@ant-design/plots\";\r\n\r\nconst pieConfig = {\r\n  height: 250,\r\n  appendPadding: 10,\r\n  data: [\r\n    {\r\n      type: \"图片\",\r\n      value: 4544,\r\n    },\r\n    {\r\n      type: \"文档\",\r\n      value: 3321,\r\n    },\r\n    {\r\n      type: \"视频\",\r\n      value: 3113,\r\n    },\r\n    {\r\n      type: \"音频\",\r\n      value: 3113,\r\n    },\r\n    {\r\n      type: \"其他\",\r\n      value: 2341,\r\n    },\r\n  ],\r\n  angleField: \"value\",\r\n  colorField: \"type\",\r\n  innerRadius: 0.6,\r\n  label: false,\r\n  legend: false,\r\n  statistic: false,\r\n};\r\nexport default function PieView() {\r\n  return <Pie {...pieConfig} />;\r\n}\r\n","import { type RefObject } from \"react\";\r\nimport { useBoolean } from \"ahooks\";\r\nimport useDomSize from \"./useDomSize\";\r\n\r\n/** 获取dom padding */\r\nconst getPadding = (el: Element) => {\r\n  const style = window.getComputedStyle(el, null);\r\n  const paddingLeft = Number.parseInt(style.paddingLeft, 10) || 0;\r\n  const paddingRight = Number.parseInt(style.paddingRight, 10) || 0;\r\n  const paddingTop = Number.parseInt(style.paddingTop, 10) || 0;\r\n  const paddingBottom = Number.parseInt(style.paddingBottom, 10) || 0;\r\n  return {\r\n    left: paddingLeft,\r\n    right: paddingRight,\r\n    top: paddingTop,\r\n    bottom: paddingBottom,\r\n  };\r\n};\r\n\r\nexport type Target = HTMLElement | RefObject<HTMLElement>;\r\n\r\n/**\r\n * 判断容器内容是否溢出\r\n * @param target DOM 节点或者 ref\r\n */\r\nexport default function useContentOverflow(target: Target) {\r\n  const [isOverflowX, { set: setIsOverflowX }] = useBoolean(false);\r\n  const [isOverflowY, { set: setIsOverflowY }] = useBoolean(false);\r\n\r\n  useDomSize(target, () => {\r\n    const element = \"current\" in target ? target.current : target;\r\n\r\n    if (element) {\r\n      const range = document.createRange();\r\n      range.setStart(element, 0);\r\n      range.setEnd(element, element.childNodes.length);\r\n\r\n      const padding = getPadding(element);\r\n\r\n      const rangeSize = range.getBoundingClientRect();\r\n\r\n      setIsOverflowX(\r\n        rangeSize.width + padding.left + padding.right > element.offsetWidth ||\r\n          element.scrollWidth > element.offsetWidth\r\n      );\r\n      setIsOverflowY(\r\n        rangeSize.height + padding.top + padding.bottom >\r\n          element.offsetHeight || element.scrollHeight > element.offsetHeight\r\n      );\r\n    }\r\n  });\r\n\r\n  return { isOverflowX, isOverflowY };\r\n}\r\n","import { useRef } from \"react\";\r\nimport useContentOverflow from \"@/hooks/useContentOverflow\";\r\n\r\nexport default function ContentOverflowDetector({ text, ...rest }) {\r\n  const containerRef = useRef(null);\r\n\r\n  const { isOverflowX } = useContentOverflow(containerRef);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"ellipsis\"\r\n      {...rest}\r\n      title={isOverflowX ? text : undefined}\r\n    >\r\n      {text}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, type RefObject } from \"react\";\r\n\r\nexport type Target = HTMLElement | RefObject<HTMLElement>;\r\n\r\nexport type Callback = (size: { width: number; height: number }) => void;\r\n\r\n/**\r\n * DOM 节点尺寸变化时执行回调\r\n * @param target DOM 节点或者 ref\r\n * @param callback 执行的回调函数\r\n */\r\nexport default function useDomSize(target: Target, callback: Callback) {\r\n  useEffect(() => {\r\n    const element = \"current\" in target ? target.current : target;\r\n\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      for (const entry of entries) {\r\n        const { clientWidth, clientHeight } = entry.target;\r\n        callback({ width: clientWidth, height: clientHeight });\r\n      }\r\n    });\r\n\r\n    element && resizeObserver.observe(element);\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [target, callback]);\r\n}\r\n","import { useState } from \"react\";\r\nimport {\r\n  Card,\r\n  Divider,\r\n  Menu,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Input,\r\n  Space,\r\n  Table,\r\n  Pagination,\r\n  Statistic,\r\n  Tooltip,\r\n  Spin,\r\n  Empty,\r\n  theme,\r\n} from \"antd\";\r\nimport {\r\n  AppstoreOutlined,\r\n  UploadOutlined,\r\n  UnorderedListOutlined,\r\n  VerticalAlignBottomOutlined,\r\n  DeleteOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { usePagination, useToggle } from \"ahooks\";\r\nimport axios from \"@/utils/axios\";\r\nimport { getFilenameFromPath } from \"@/utils/utils\";\r\nimport MyIcon from \"@/components/CustomIcon\";\r\nimport FileView from \"./components/FileView\";\r\nimport { fileType } from \"@/utils/dict\";\r\nimport PieView from \"./components/PieView\";\r\nimport NameEllipsis from \"./components/NameEllipsis\";\r\n\r\nexport default function File() {\r\n  const {\r\n    token: { colorPrimary },\r\n  } = theme.useToken();\r\n  const [activeType, setActiveType] = useState(\"all\");\r\n\r\n  // 获取列表\r\n  const getListData = ({ current, pageSize }) => {\r\n    return axios\r\n      .post(\"/api/file/page\", {\r\n        pageIndex: current,\r\n        pageSize,\r\n        type: activeType,\r\n      })\r\n      .then((value) => {\r\n        const { result: data } = value;\r\n        return {\r\n          list: data.records,\r\n          total: data.total,\r\n        };\r\n      });\r\n  };\r\n\r\n  const { data, pagination, loading } = usePagination(getListData, {\r\n    refreshDeps: [activeType],\r\n    defaultPageSize: 20,\r\n  });\r\n\r\n  // 表格配置\r\n  const tableColumns = [\r\n    {\r\n      title: \"文件\",\r\n      key: \"file\",\r\n      render: (_, record) => {\r\n        return (\r\n          <FileView\r\n            type={fileType.map[record.type].alias}\r\n            src={record.url}\r\n            height={36}\r\n          />\r\n        );\r\n      },\r\n      width: 100,\r\n    },\r\n    {\r\n      title: \"文件地址\",\r\n      dataIndex: \"url\",\r\n      ellipsis: true,\r\n    },\r\n    {\r\n      title: \"文件大小\",\r\n      dataIndex: \"size\",\r\n      width: 150,\r\n    },\r\n    {\r\n      title: \"创建时间\",\r\n      dataIndex: \"createDate\",\r\n      width: 150,\r\n    },\r\n    {\r\n      title: \"操作\",\r\n      key: \"action\",\r\n      fixed: \"right\",\r\n      width: 120,\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Tooltip title=\"下载\" mouseEnterDelay={1}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<VerticalAlignBottomOutlined />}\r\n            ></Button>\r\n          </Tooltip>\r\n          <Tooltip title=\"删除\" mouseEnterDelay={1}>\r\n            <Button danger icon={<DeleteOutlined />}></Button>\r\n          </Tooltip>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 分页配置\r\n  const paginationConfig = {\r\n    showSizeChanger: true,\r\n    showQuickJumper: true,\r\n    showTotal: (total, range) => `第 ${range.join(\"-\")} 条/共 ${total} 条`,\r\n    current: pagination.current,\r\n    pageSize: pagination.pageSize,\r\n    total: pagination.total,\r\n    onChange: pagination.onChange,\r\n  };\r\n\r\n  // 视图切换\r\n  const [viewType, { toggle }] = useToggle(\"list\", \"table\");\r\n  const listElement = {\r\n    list: (\r\n      <Spin spinning={loading}>\r\n        {data?.list.length ? (\r\n          <>\r\n            <div\r\n              style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: \"repeat(auto-fill, minmax(200px, 1fr))\",\r\n                gridGap: 16,\r\n              }}\r\n            >\r\n              {data?.list.map((item) => (\r\n                <div\r\n                  key={item.id}\r\n                  style={{\r\n                    height: 150,\r\n                    padding: 10,\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  <FileView\r\n                    type={fileType.map[item.type].alias}\r\n                    src={item.url}\r\n                    height={60}\r\n                  />\r\n                  <NameEllipsis\r\n                    text={getFilenameFromPath(item.url)}\r\n                    style={{ lineHeight: 2, padding: \"0 10px\" }}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <Pagination\r\n              style={{ marginTop: 16, textAlign: \"right\" }}\r\n              {...paginationConfig}\r\n              hideOnSinglePage={true}\r\n            />\r\n          </>\r\n        ) : (\r\n          <Empty />\r\n        )}\r\n      </Spin>\r\n    ),\r\n    table: (\r\n      <Table\r\n        rowKey=\"id\"\r\n        dataSource={data?.list}\r\n        columns={tableColumns}\r\n        pagination={paginationConfig}\r\n        loading={loading}\r\n      ></Table>\r\n    ),\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <div style={{ flex: \"0 0 250px\" }}>\r\n        <Card>\r\n          <div>文件管理 ✨</div>\r\n          <Divider dashed style={{ margin: \"8px 0\" }} />\r\n          <Menu\r\n            items={[\r\n              {\r\n                key: \"file\",\r\n                label: \"文件类型\",\r\n                icon: <AppstoreOutlined />,\r\n                children: [\r\n                  {\r\n                    key: \"all\",\r\n                    label: \"全部\",\r\n                    icon: <MyIcon type=\"icon-files\" />,\r\n                  },\r\n                  {\r\n                    key: \"img\",\r\n                    label: \"图片\",\r\n                    icon: <MyIcon type=\"icon-file_img\" />,\r\n                  },\r\n                  {\r\n                    key: \"doc\",\r\n                    label: \"文档\",\r\n                    icon: <MyIcon type=\"icon-file_txt\" />,\r\n                  },\r\n                  {\r\n                    key: \"video\",\r\n                    label: \"视频\",\r\n                    icon: <MyIcon type=\"icon-file_video\" />,\r\n                  },\r\n                  {\r\n                    key: \"audio\",\r\n                    label: \"音频\",\r\n                    icon: <MyIcon type=\"icon-file_music\" />,\r\n                  },\r\n                  {\r\n                    key: \"other\",\r\n                    label: \"其他\",\r\n                    icon: <MyIcon type=\"icon-File\" />,\r\n                  },\r\n                ],\r\n              },\r\n            ]}\r\n            selectedKeys={[\"file\", activeType]}\r\n            defaultOpenKeys={[\"file\"]}\r\n            mode=\"inline\"\r\n            style={{ border: \"none\" }}\r\n            onClick={({ key }) => setActiveType(key)}\r\n          ></Menu>\r\n        </Card>\r\n\r\n        <Card style={{ marginTop: 16 }}>\r\n          <Row align=\"middle\" style={{ textAlign: \"center\" }}>\r\n            <Col span={10}>\r\n              <Statistic\r\n                title=\"储存容量\"\r\n                value={5}\r\n                suffix=\"MB\"\r\n                valueStyle={{\r\n                  color: colorPrimary,\r\n                }}\r\n              />\r\n            </Col>\r\n            <Col span={4}>\r\n              <Divider type=\"vertical\" />\r\n            </Col>\r\n            <Col span={10}>\r\n              <Statistic\r\n                title=\"数量\"\r\n                value={100}\r\n                valueStyle={{\r\n                  color: colorPrimary,\r\n                }}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Divider style={{ margin: \"8px 0\" }} />\r\n          <PieView />\r\n        </Card>\r\n      </div>\r\n      <div style={{ flex: \"auto\", width: 0, padding: \"0px 16px\" }}>\r\n        <Card>\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Space>\r\n              <Input.Search\r\n                enterButton=\"查询\"\r\n                placeholder=\"请输入文件名\"\r\n              ></Input.Search>\r\n            </Space>\r\n            <Space>\r\n              <Button type=\"primary\" icon={<UploadOutlined />}>\r\n                上传\r\n              </Button>\r\n              <Button>批量操作</Button>\r\n              <Tooltip title=\"视图\" mouseEnterDelay={1}>\r\n                <Button\r\n                  icon={\r\n                    viewType.view === \"table\" ? (\r\n                      <UnorderedListOutlined />\r\n                    ) : (\r\n                      <AppstoreOutlined />\r\n                    )\r\n                  }\r\n                  onClick={toggle}\r\n                ></Button>\r\n              </Tooltip>\r\n            </Space>\r\n          </div>\r\n          <Divider dashed style={{ margin: \"16px 0\" }} />\r\n          {listElement[viewType]}\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["createCompoundedComponent","mainComponent","subComponents","Component","Object","keys","forEach","key","defineProperty","value","writable","enumerable","createFromIconfontCN","scriptUrl","fadeIn","keyframes","fadeOut","AudioModalStyled","styled","AudioModal","props","token","colorPrimary","theme","createPortal","_jsx","className","children","Draggable","bounds","handle","visible","style","width","position","top","right","borderRadius","boxShadow","background","zIndex","_jsxs","padding","color","fontSize","marginBottom","display","justifyContent","alignItems","cursor","userSelect","name","Button","type","icon","CloseOutlined","onClick","onClose","size","src","audioSrc","controls","autoPlay","document","body","root","showAudioModal","container","createDocumentFragment","appendChild","ReactDOM","render","setTimeout","unmount","VideoModal","height","Modal","open","onCancel","footer","centered","closeIcon","url","showModal","FileView","Image","preview","MyIcon","getFilenameFromPath","pieConfig","appendPadding","data","angleField","colorField","innerRadius","label","legend","statistic","PieView","Pie","getPadding","el","window","getComputedStyle","left","Number","parseInt","paddingLeft","paddingRight","paddingTop","bottom","paddingBottom","ContentOverflowDetector","text","rest","containerRef","useRef","isOverflowX","target","set","setIsOverflowX","useBoolean","isOverflowY","setIsOverflowY","callback","useEffect","element","current","resizeObserver","ResizeObserver","entries","entry","clientWidth","clientHeight","observe","disconnect","useDomSize","range","createRange","setStart","setEnd","childNodes","length","rangeSize","getBoundingClientRect","offsetWidth","scrollWidth","offsetHeight","scrollHeight","useContentOverflow","ref","title","undefined","File","activeType","setActiveType","useState","pagination","loading","usePagination","getListData","pageSize","axios","pageIndex","then","result","list","records","total","refreshDeps","defaultPageSize","tableColumns","_","record","fileType","alias","dataIndex","ellipsis","fixed","Space","Tooltip","mouseEnterDelay","VerticalAlignBottomOutlined","danger","DeleteOutlined","paginationConfig","showSizeChanger","showQuickJumper","showTotal","join","onChange","viewType","toggle","useToggle","listElement","Spin","spinning","_Fragment","gridTemplateColumns","gridGap","map","item","textAlign","NameEllipsis","lineHeight","id","Pagination","marginTop","hideOnSinglePage","Empty","table","Table","rowKey","dataSource","columns","flex","Card","Divider","dashed","margin","Menu","items","AppstoreOutlined","selectedKeys","defaultOpenKeys","mode","border","Row","align","Col","span","Statistic","suffix","valueStyle","Input","enterButton","placeholder","UploadOutlined","view","UnorderedListOutlined"],"sourceRoot":""}