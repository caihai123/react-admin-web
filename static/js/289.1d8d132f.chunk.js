"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[289],{46855:function(e,t,n){n.d(t,{Fu:function(){return c},ZP:function(){return d}});var r=n(89526),s=n(83277),i=n(79669),l=n(88519),o=n(67557);const a=function(){const{pathname:e}=(0,s.TH)(),t=(0,i.v9)(l.S6).find((t=>t.path===e));return e=>t.buttonList?.some((t=>t.id===e))},c=function(...e){const t=a(),n=e.filter((e=>t(e.permission)));return[function(...e){return(0,o.jsx)(r.Fragment,{children:n.map((t=>{const n=t.render(...e);return(0,o.jsx)(r.Fragment,{children:n},t.permission)}))})},!!n.length]};function d({permission:e,children:t}){return a()(e)?t:void 0}},24544:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=n(89526),s=n(72816),i=n(96799),l=n(74918),o=n(58047),a=n(86430),c=n(83716),d=n(78589),u=n(49367),p=n(8139),f=n(67557);function h({defaultChecked:e=!1,onChange:t=(()=>null)}){const[n,{set:r}]=(0,d.Z)(e),[s,{setTrue:i,setFalse:l}]=(0,p.ZP)(!1);return(0,f.jsx)(u.Z,{checked:n,loading:s,onChange:e=>{r(e),i(),t(e)?.catch((()=>{r(!e)})).finally((()=>l()))}})}var m=n(5416),x=n(97839),Z=n(48570),b=n(26806),j=n(70854),g=n.n(j),y=n(68334),P=n(74425),C=n(25342),I=n(89134),w=n(76934),O=n(33874),S=n(88132),k=(0,P.i)((e=>{const{prefixCls:t,className:n,closeIcon:s,closable:i,type:l,title:o,children:a,footer:c}=e,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=r.useContext(C.E_),p=u(),f=t||u("modal"),h=(0,S.Z)(p),[m,x,Z]=(0,O.ZP)(f,h),b=`${f}-confirm`;let j={};return j=l?{closable:null!=i&&i,title:"",footer:"",children:r.createElement(I.O,Object.assign({},e,{prefixCls:f,confirmPrefixCls:b,rootPrefixCls:p,content:a}))}:{closable:null==i||i,title:o,footer:null!==c&&r.createElement(w.$,Object.assign({},e)),children:a},m(r.createElement(y.s,Object.assign({prefixCls:f,className:g()(x,`${f}-pure-panel`,l&&b,l&&`${b}-${l}`,n,Z,h)},d,{closeIcon:(0,w.b)(f,s),closable:i},j)))})),v=n(4894);function F(e){return(0,x.ZP)((0,x.uW)(e))}const E=b.Z;E.useModal=v.Z,E.info=function(e){return(0,x.ZP)((0,x.cw)(e))},E.success=function(e){return(0,x.ZP)((0,x.vq)(e))},E.error=function(e){return(0,x.ZP)((0,x.AQ)(e))},E.warning=F,E.warn=F,E.confirm=function(e){return(0,x.ZP)((0,x.Au)(e))},E.destroyAll=function(){for(;Z.Z.length;){const e=Z.Z.pop();e&&e()}},E.config=x.ai,E._InternalPanelDoNotUseOrYouWillBeFired=k;var A=E,N=n(31363),T=(0,r.forwardRef)(((e,t)=>{const{message:n}=s.Z.useApp(),[o]=m.Z.useForm(),[a,d]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[x,{setTrue:Z,setFalse:b}]=(0,p.ZP)(!1);return(0,r.useImperativeHandle)(t,(()=>({addStart:()=>h(!0),editStart:e=>{d(e.id),o.setFieldsValue(e),h(!0)}}))),(0,f.jsx)(A,{title:a?"编辑":"新增",open:u,width:600,footer:(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(i.ZP,{onClick:()=>h(!1),children:"取消"}),(0,f.jsx)(i.ZP,{type:"primary",loading:x,onClick:()=>o.submit(),children:"确定"})]}),onCancel:()=>h(!1),afterClose:()=>{d(""),o.resetFields()},children:(0,f.jsxs)(m.Z,{form:o,layout:"vertical",onFinish:function(t){Z(!0);const r=a?"/api/role/update":"/api/role/add",s=a?"更新成功！":"新增成功！",i=a?{id:a,...t}:t;c.Z.post(r,i).then((()=>{h(!1),n.success(s),e.callback?.(a?void 0:1)})).finally((()=>b()))},autoComplete:"off",children:[(0,f.jsx)(m.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,f.jsx)(N.Z,{placeholder:"请输入"})}),(0,f.jsx)(m.Z.Item,{name:"description",label:"备注",children:(0,f.jsx)(N.Z.TextArea,{placeholder:"请输入"})})]})})})),_=n(53736),z=n(46855);function $(){const{message:e}=s.Z.useApp(),t=(0,r.useRef)(),n=(0,r.useRef)(),[d,u]=(0,z.Fu)({render:e=>(0,f.jsx)(i.ZP,{type:"primary",ghost:!0,size:"small",children:"编辑"}),permission:"edit"},{render:e=>(0,f.jsx)(i.ZP,{type:"primary",size:"small",children:"授权"}),permission:"accredit"},{render:e=>(0,f.jsx)(i.ZP,{type:"primary",danger:!0,size:"small",children:"删除"}),permission:"del"}),p=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,n)=>{const{enabled:r,disabled:s}=_.roleEnabledState.enum;return(0,f.jsx)(h,{defaultChecked:t===r,onChange:t=>function(t,n){return c.Z.post("/api/role/status/update",{id:t,status:n}).then((()=>{e.success("切换成功！")}))}(n.id,t?r:s)})},type:"select",options:_.roleEnabledState.options},{title:"操作",key:"action",render:e=>(0,f.jsx)(l.Z,{children:d(e)}),width:100,fixed:"right",hideInSearch:!0,hideInTable:!u}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{ref:t,columns:p,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:n})=>c.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:n}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>(0,f.jsx)(z.ZP,{permission:"add",children:(0,f.jsx)(i.ZP,{type:"primary",icon:(0,f.jsx)(o.Z,{}),onClick:()=>n.current.addStart(),children:"新增"})})}),(0,f.jsx)(T,{ref:n,callback:e=>t.current.refresh(e)})]})}}}]);
//# sourceMappingURL=289.1d8d132f.chunk.js.map