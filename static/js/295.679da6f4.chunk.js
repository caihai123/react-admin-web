"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[295],{25877:function(e,t,n){n.d(t,{Z:function(){return L}});var r=n(89526),i=n(24059),l=n(68175),a=n(74918),o=n(64785),s=n(71992),d=n(96799),c=n(95810),u=n(60480),h={"tools-bar":"ghwuoi3NE3Ry7s7fNzAi","header-title":"mtRVkLbROTli4p1ohQ5i","tool-right":"gpJXWmO55r2tH9Z_hXa6","toolbar-setting":"whG6r6ufswl2doZWNUEI","toolbar-setting-item":"te8gfQS8fuVGrAEe5Wko","batch-bar":"dDNrcy2mCFFeBtzOHKWq"},m=n(95267),p=n(5416),f=n(31363),g=n(67557);function x({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(f.Z,{placeholder:`请输入${e.title}`,...e.fieldProps})})}var b=n(54374),y=n(53725);function j({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(b.default,{placeholder:`请选择${e.title}`,style:{width:183},allowClear:!0,...e.fieldProps,children:e.options.map((e=>(0,g.jsx)(b.default.Option,{value:e.value,children:e.color?(0,g.jsx)(y.Z,{color:e.color,text:e.label}):e.label},e.value)))})})}var Z=n(59827);function v({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(Z.Z.Group,{options:e.options,...e.fieldProps})})}var w=n(49155);function I({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(w.ZP.Group,{options:e.options,...e.fieldProps})})}var S=n(81867);function k({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(S.default,{...e.fieldProps})})}const{RangePicker:C}=S.default;function P({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(C,{style:{width:250},...e.fieldProps})})}var $=n(91117);function z({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)($.Z,{placeholder:`请选择${e.title}`,treeData:e.options,style:{width:183},allowClear:!0,...e.fieldProps})})}function O({item:e}){const{type:t="input",renderFormItem:n,...r}=e;if(n)return"function"==typeof n?n():n;switch(t){case"select":return(0,g.jsx)(j,{item:r});case"checkbox":return(0,g.jsx)(v,{item:r});case"radio":return(0,g.jsx)(I,{item:r});case"date":return(0,g.jsx)(k,{item:r});case"dateRange":return(0,g.jsx)(P,{item:r});case"treeSelect":return(0,g.jsx)(z,{item:r});default:return(0,g.jsx)(x,{item:r})}}var N=n(87806),R=n(31439),T=n(54437),E=n(20485);const F="188px",B=(0,T.ZP)(p.Z)`
  position: relative;
  overflow-y: hidden;
  padding-top: 16px;
  &:after {
    content: "";
    display: inline-block;
    width: ${F};
    height: 32px;
    vertical-align: top;
    margin-bottom: 16px;
  }
  & .ant-form-item {
    margin-bottom: 16px;
  }
`,M=(0,T.ZP)(p.Z.Item)`
  position: absolute;
  right: -16px;
  bottom: 0;
  z-index: 10;
`;var W=(0,r.forwardRef)((function(e,t){const[n]=p.Z.useForm(),[i,{setTrue:o,setFalse:s}]=(0,E.Z)(!1),{children:c,style:u,className:h,...m}=e,f=function(){n.resetFields(),n.submit()};return(0,r.useImperativeHandle)(t,(()=>({submit:n.submit,reset:f}))),(0,g.jsx)(l.Z,{styles:{body:{paddingTop:0,paddingBottom:0}},style:u,className:h,children:(0,g.jsxs)(B,{layout:"inline",style:{height:i?"auto":"64px",paddingRight:i?"0":F},form:n,autoComplete:"off",...m,children:[c,(0,g.jsx)(M,{children:(0,g.jsxs)(a.Z,{children:[(0,g.jsx)(d.ZP,{type:"primary",htmlType:"submit",children:"查询"}),(0,g.jsx)(d.ZP,{onClick:()=>f(),children:"重置"}),i?(0,g.jsxs)(d.ZP,{type:"link",style:{padding:0},onClick:()=>s(),children:["收起",(0,g.jsx)(N.Z,{style:{marginInlineStart:0}})]}):(0,g.jsxs)(d.ZP,{type:"link",style:{padding:0},onClick:()=>o(),children:["展开",(0,g.jsx)(R.Z,{style:{marginInlineStart:0}})]})]})})]})})})),A=n(46044),H=n(84878),G=function(e){const{children:t,value:n,onChange:i,options:l}=e,a=l.map((e=>e.value)),[o,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!0),h=e=>{i(e),s(!!e.length&&e.length<a.length),u(e.length===a.length)};return(0,g.jsx)(A.Z,{arrow:!1,content:(0,g.jsxs)("div",{style:{minWidth:176},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(Z.Z,{indeterminate:o,onChange:e=>{i(e.target.checked?a:[]),s(!1),u(e.target.checked)},checked:c,children:"列展示"}),(0,g.jsx)(d.ZP,{type:"link",style:{height:22,lineHeight:1,padding:0},onClick:()=>h(a),children:"重置"})]}),(0,g.jsx)(H.Z,{style:{margin:"4px 0"}}),(0,g.jsx)(Z.Z.Group,{value:n,onChange:e=>h(e),style:{display:"block"},children:l.map((e=>(0,g.jsx)(Z.Z,{style:{display:"flex",margin:0},value:e.value,children:e.label},e.value)))})]}),placement:"bottomRight",trigger:"click",children:t})},V=n(54169),_=n(64622),K=n(48425);const D="large",q=function(e){return e.key||e.dataIndex};var L=(0,r.forwardRef)((function(e,t){const{loading:n,columns:p,dataSource:f,pagination:x=!0,onRefresh:b,search:y=!0,batchBarRender:j,toolBarRender:Z,headerTitle:v,tableRowSelection:w}=e,I=(0,r.useMemo)((()=>p.filter((e=>!0!==e.hideInSearch)).map((e=>(0,g.jsx)(O,{item:e},q(e))))),[p]),S=(0,r.useMemo)((()=>Object.fromEntries(p.filter((e=>void 0!==e.initialValue)).map((({dataIndex:e,initialValue:t})=>[e,t])))),[p]),[k,C]=(0,r.useState)(S),P=(0,r.useRef)(null),$=(0,r.useMemo)((()=>p.filter((e=>!0!==e.hideInTable))),[p]),z=(0,u.Z)((({current:t,pageSize:n})=>!Array.isArray(f)&&e.request?.(k,{current:t,pageSize:n})),{refreshDeps:[k],defaultCurrent:x?.current||1,defaultPageSize:x?.pageSize||10,loadingDelay:0}),N=(0,r.useMemo)((()=>{const e=Array.isArray(f),{data:t,pagination:n,refresh:r}=z,i={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,style:{marginBottom:-8},...x};return{list:e?f:t?.list,pagination:!!x&&(e?i:{current:n.current,pageSize:n.pageSize,total:n.total,onChange:n.onChange,...i}),refresh(t){e||(t&&t!==n.current?n.changeCurrent(t):r()),b?.(k)}}}),[f,z,x,k,b]),[R,T]=(0,r.useState)($.map((e=>q(e)))),[E,{setTrue:F,setFalse:B}]=(0,m.ZP)("boolean"==typeof n&&n);(0,r.useEffect)((()=>{("boolean"==typeof n?n:z.loading)?F():B()}),[n,z.loading,F,B]);const[M,A]=(0,r.useState)(D),[H,L]=(0,r.useState)([]),{token:{borderRadius:Q,controlItemBgActive:X,colorText:J}}=i.Z.useToken();return(0,r.useImperativeHandle)(t,(()=>({refresh:N.refresh,search:()=>{const t=P.current?.submit;t?t():C(null),e.onSubmit?.(k)},reset:()=>{const t=P.current?.reset;t?t():C(null),e.onReset?.(k)},clearSelected:()=>L([])}))),(0,g.jsxs)(g.Fragment,{children:[y&&(0,g.jsx)(W,{ref:P,onFinish:e=>C(e),initialValues:S,children:I}),(0,g.jsxs)(l.Z,{style:{marginTop:y?16:0},styles:{body:{paddingTop:16,paddingBottom:24}},children:[(0,g.jsxs)("div",{className:h["tools-bar"],style:{display:H.length>0?"none":"",color:J},children:[(0,g.jsx)("div",{className:h["header-title"],children:"function"==typeof v?v():v}),(0,g.jsxs)("div",{className:h["tool-right"],children:[Z&&(0,g.jsx)(a.Z,{children:"function"==typeof Z?Z(k):Z}),(0,g.jsxs)("div",{className:h["toolbar-setting"],children:[(0,g.jsx)("div",{className:h["toolbar-setting-item"],onClick:()=>N.refresh(),children:(0,g.jsx)(o.Z,{title:"刷新",children:(0,g.jsx)(V.Z,{})})}),(0,g.jsx)(s.Z,{overlayStyle:{width:80},menu:{items:[{key:"large",label:"默认"},{key:"middle",label:"中等"},{key:"small",label:"紧凑"}],selectable:!0,defaultSelectedKeys:[D],onClick:({key:e})=>A(e)},trigger:["click"],children:(0,g.jsx)("div",{className:h["toolbar-setting-item"],children:(0,g.jsx)(o.Z,{title:"密度",children:(0,g.jsx)(_.Z,{})})})}),(0,g.jsx)(G,{value:R,options:$.map((e=>({label:e.title,value:q(e)}))),onChange:e=>T(e),children:(0,g.jsx)("div",{className:h["toolbar-setting-item"],children:(0,g.jsx)(o.Z,{title:"列设置",children:(0,g.jsx)(K.Z,{})})})})]})]})]}),j&&(0,g.jsxs)("div",{className:h["batch-bar"],style:{display:H.length>0?"":"none",color:J,backgroundColor:X,borderRadius:Q},children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("span",{children:["已选 ",H.length," 项"]}),(0,g.jsx)(d.ZP,{type:"link",onClick:()=>L([]),children:"取消选择"})]}),(0,g.jsx)(a.Z,{children:"function"==typeof j?j(H):j})]}),(0,g.jsx)("div",{className:h.main,children:(0,g.jsx)(c.Z,{rowKey:e.rowKey,dataSource:N.list,columns:$.filter((e=>{const t=q(e);return R.includes(t)})),loading:E,pagination:N.pagination,rowSelection:j?{type:"checkbox",selectedRowKeys:H,onChange:e=>L(e),preserveSelectedRowKeys:!0,...w}:void 0,size:M,bordered:!0,scroll:{x:"max-content"}})})]})]})}))},55295:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(89526),i=n(72816),l=n(74918),a=n(96799),o=n(58047),s=n(25877),d=n(20485),c=n(49367),u=n(95267),h=n(67557);function m({defaultChecked:e=!1,onChange:t=(()=>null)}){const[n,{set:r}]=(0,d.Z)(e),[i,{setTrue:l,setFalse:a}]=(0,u.ZP)(!1);return(0,h.jsx)(c.Z,{checked:n,loading:i,onChange:e=>{r(e),l(),t(e)?.catch((()=>{r(!e)})).finally((()=>a()))}})}var p=n(5416),f=n(31363),g=n(95694),x=n(97839),b=n(48570),y=n(26806),j=n(70854),Z=n.n(j),v=n(68334),w=n(74425),I=n(25342),S=n(89134),k=n(76934),C=n(33874),P=n(88132),$=(0,w.i)((e=>{const{prefixCls:t,className:n,closeIcon:i,closable:l,type:a,title:o,children:s,footer:d}=e,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=r.useContext(I.E_),h=u(),m=t||u("modal"),p=(0,P.Z)(h),[f,g,x]=(0,C.ZP)(m,p),b=`${m}-confirm`;let y={};return y=a?{closable:null!=l&&l,title:"",footer:"",children:r.createElement(S.O,Object.assign({},e,{prefixCls:m,confirmPrefixCls:b,rootPrefixCls:h,content:s}))}:{closable:null==l||l,title:o,footer:null!==d&&r.createElement(k.$,Object.assign({},e)),children:s},f(r.createElement(v.s,Object.assign({prefixCls:m,className:Z()(g,`${m}-pure-panel`,a&&b,a&&`${b}-${a}`,n,x,p)},c,{closeIcon:(0,k.b)(m,i),closable:l},y)))})),z=n(4894);function O(e){return(0,x.ZP)((0,x.uW)(e))}const N=y.Z;N.useModal=z.Z,N.info=function(e){return(0,x.ZP)((0,x.cw)(e))},N.success=function(e){return(0,x.ZP)((0,x.vq)(e))},N.error=function(e){return(0,x.ZP)((0,x.AQ)(e))},N.warning=O,N.warn=O,N.confirm=function(e){return(0,x.ZP)((0,x.Au)(e))},N.destroyAll=function(){for(;b.Z.length;){const e=b.Z.pop();e&&e()}},N.config=x.ai,N._InternalPanelDoNotUseOrYouWillBeFired=$;var R=N,T=(0,r.forwardRef)((function(e,t){const{title:n,width:i,submitText:o="确定",cancelText:s="取消",children:c,modalProps:m,formProps:f,onFinish:g,footer:x,initialValues:b,afterClose:y}=e,[j]=p.Z.useForm(),[Z,{set:v}]=(0,d.Z)(!1),[w,I]=(0,u.ZP)(!1);return(0,r.useImperativeHandle)(t,(()=>({open:()=>v(!0),close:()=>v(!1),reset:j.resetFields,submit:j.submit,formInstance:j}))),(0,h.jsx)(R,{title:n,open:Z,onCancel:()=>v(!1),width:i,footer:x||(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(a.ZP,{onClick:()=>v(!1),children:s}),(0,h.jsx)(a.ZP,{type:"primary",loading:w,onClick:()=>j.submit(),children:o})]}),centered:!0,wrapClassName:"custom-modal-style",maskClosable:!1,style:{marginTop:"-20vh"},afterClose:y,...m,children:(0,h.jsx)(p.Z,{form:j,autoComplete:"off",onFinish:e=>{const t=g?.(e);t instanceof Promise&&(I.setTrue(),t.then((()=>v(!1))),t.finally((()=>I.setFalse())))},layout:"vertical",initialValues:b,...f,children:c})})})),E=(0,r.forwardRef)(((e,t)=>{const{message:n}=i.Z.useApp(),l=(0,r.useRef)(null),[a,o]=(0,r.useState)("");return(0,r.useImperativeHandle)(t,(()=>({addStart:()=>l.current?.open(),editStart:e=>{o(e.id),l.current?.formInstance.setFieldsValue(e),l.current?.open()}}))),(0,h.jsxs)(T,{ref:l,title:a?"编辑":"新增",width:600,afterClose:()=>{o(""),l.current?.formInstance.resetFields()},onFinish:function(t){const r=a?"/api/role/update":"/api/role/add",i=a?"更新成功！":"新增成功！",l=a?{id:a,...t}:t;return g.Z.post(r,l).then((()=>{n.success(i),e.callback?.(a?void 0:1)}))},children:[(0,h.jsx)(p.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,h.jsx)(f.Z,{placeholder:"请输入"})}),(0,h.jsx)(p.Z.Item,{name:"description",label:"备注",children:(0,h.jsx)(f.Z.TextArea,{placeholder:"请输入"})})]})})),F=n(68347);const B=(e,t=1,n=10)=>g.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:n}),M=(e,t)=>g.Z.post("/api/role/status/update",{id:e,status:t});function W(){const{message:e}=i.Z.useApp(),t=(0,r.useRef)(null),n=(0,r.useRef)(null),d=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,n)=>{const{enabled:r,disabled:i}=F.roleEnabledState.enum;return(0,h.jsx)(m,{defaultChecked:t===r,onChange:t=>M(n.id,t?r:i).then((()=>{e.success("切换成功！")}))})},type:"select",options:F.roleEnabledState.options},{title:"操作",key:"action",render:e=>(0,h.jsxs)(l.Z,{children:[(0,h.jsx)(a.ZP,{type:"primary",ghost:!0,size:"small",onClick:()=>n.current?.editStart(e),children:"编辑"}),(0,h.jsx)(a.ZP,{type:"primary",size:"small",children:"授权"}),(0,h.jsx)(a.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),width:100,fixed:"right",hideInSearch:!0}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.Z,{ref:t,columns:d,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:n})=>B(e,t,n).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>[(0,h.jsx)(a.ZP,{type:"primary",icon:(0,h.jsx)(o.Z,{}),onClick:()=>n.current?.addStart(),children:"新增"},"add")]}),(0,h.jsx)(E,{ref:n,callback:e=>t.current?.refresh(e)})]})}},84878:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(89526),i=n(70854),l=n.n(i),a=n(25342),o=n(13806),s=n(11351),d=n(55439),c=n(94237);const u=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i,textPaddingInline:l,orientationMargin:a,verticalMarginInline:d}=e;return{[t]:Object.assign(Object.assign({},(0,s.Wf)(e)),{borderBlockStart:`${(0,o.bf)(i)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:d,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${(0,o.bf)(i)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${(0,o.bf)(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${(0,o.bf)(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${(0,o.bf)(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${a} * 100%)`},"&::after":{width:`calc(100% - ${a} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${a} * 100%)`},"&::after":{width:`calc(${a} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:l},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${(0,o.bf)(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}};var h=(0,d.I$)("Divider",(e=>{const t=(0,c.TS)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[u(t)]}),(e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS})),{unitless:{orientationMargin:!0}}),m=e=>{const{getPrefixCls:t,direction:n,divider:i}=r.useContext(a.E_),{prefixCls:o,type:s="horizontal",orientation:d="center",orientationMargin:c,className:u,rootClassName:m,children:p,dashed:f,plain:g,style:x}=e,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),y=t("divider",o),[j,Z,v]=h(y),w=d.length>0?`-${d}`:d,I=!!p,S="left"===d&&null!=c,k="right"===d&&null!=c,C=l()(y,null==i?void 0:i.className,Z,v,`${y}-${s}`,{[`${y}-with-text`]:I,[`${y}-with-text${w}`]:I,[`${y}-dashed`]:!!f,[`${y}-plain`]:!!g,[`${y}-rtl`]:"rtl"===n,[`${y}-no-default-orientation-margin-left`]:S,[`${y}-no-default-orientation-margin-right`]:k},u,m),P=r.useMemo((()=>"number"==typeof c?c:/^\d+$/.test(c)?Number(c):c),[c]),$=Object.assign(Object.assign({},S&&{marginLeft:P}),k&&{marginRight:P});return j(r.createElement("div",Object.assign({className:C,style:Object.assign(Object.assign({},null==i?void 0:i.style),x)},b,{role:"separator"}),p&&"vertical"!==s&&r.createElement("span",{className:`${y}-inner-text`,style:$},p)))}}}]);
//# sourceMappingURL=295.679da6f4.chunk.js.map