{"version":3,"file":"static/js/931.0810b51e.chunk.js","mappings":"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","sources":["webpack://react-admin-web/./src/components/AudioModal.tsx","webpack://react-admin-web/./src/components/Markdown/index.tsx","webpack://react-admin-web/./src/components/utils/createCompoundedComponent.ts","webpack://react-admin-web/./src/pages/components/audio-modal/doc.md","webpack://react-admin-web/./src/pages/components/audio-modal/index.tsx"],"sourcesContent":["import { useRef } from \"react\";\r\nimport { theme, Button } from \"antd\";\r\nimport {\r\n  CloseOutlined,\r\n  AudioFilled,\r\n  ExclamationCircleFilled,\r\n} from \"@ant-design/icons\";\r\nimport Draggable from \"react-draggable\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport { createPortal } from \"react-dom\";\r\nimport createCompoundedComponent from \"@/components/utils/createCompoundedComponent\";\r\nimport { useBoolean } from \"ahooks\";\r\nimport { getFilenameFromPath } from \"@/utils/utils\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\nimport styled from \"styled-components\";\r\nimport \"@/styles/transition\";\r\n\r\nconst AudioBox = styled.div`\r\n  width: 320px;\r\n  border-radius: 8px;\r\n  padding: 10px 14px 14px 14px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  & > .drag-handler {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n    font-size: 16px;\r\n    color: #fff;\r\n    cursor: move;\r\n    user-select: none;\r\n  }\r\n`;\r\n\r\ntype Props = {\r\n  visible: boolean;\r\n  src: string;\r\n  name?: string;\r\n  onClose?: () => void;\r\n};\r\n\r\nconst AudioModal = (props: Props) => {\r\n  const {\r\n    token: { colorPrimary, colorError },\r\n  } = theme.useToken();\r\n\r\n  const [error, { set: setError }] = useBoolean(false);\r\n\r\n  const nodeRef = useRef(null);\r\n\r\n  return createPortal(\r\n    <Draggable bounds={\"body\"} handle=\".drag-handler\">\r\n      <div\r\n        className={`video-modal`}\r\n        style={{\r\n          position: \"fixed\",\r\n          top: 60,\r\n          right: 0,\r\n          zIndex: 999,\r\n        }}\r\n      >\r\n        <CSSTransition\r\n          in={props.visible}\r\n          nodeRef={nodeRef}\r\n          timeout={300}\r\n          unmountOnExit\r\n          classNames=\"zoom-in-top\"\r\n          appear\r\n        >\r\n          <AudioBox\r\n            ref={nodeRef}\r\n            style={{\r\n              background: colorPrimary,\r\n            }}\r\n          >\r\n            <div className=\"drag-handler\">\r\n              <div\r\n                className=\"audio-name ellipsis\"\r\n                style={{ color: error ? colorError : \"\" }}\r\n              >\r\n                {error ? (\r\n                  <ExclamationCircleFilled style={{ marginRight: 8 }} />\r\n                ) : (\r\n                  <AudioFilled style={{ marginRight: 8 }} />\r\n                )}\r\n                {!props.name ? getFilenameFromPath(props.src) : props.name}\r\n              </div>\r\n\r\n              <Button\r\n                type=\"text\"\r\n                icon={<CloseOutlined />}\r\n                onClick={() => props.onClose?.()}\r\n                style={{ color: \"#fff\" }}\r\n                size=\"small\"\r\n              ></Button>\r\n            </div>\r\n\r\n            <audio\r\n              src={props.src}\r\n              controls\r\n              autoPlay\r\n              style={{ width: \"100%\" }}\r\n              onError={() => setError(true)}\r\n              onPlay={() => setError(false)}\r\n            ></audio>\r\n          </AudioBox>\r\n        </CSSTransition>\r\n      </div>\r\n    </Draggable>,\r\n    document.body\r\n  );\r\n};\r\n\r\nlet root: ReactDOM.Root | null;\r\n\r\n/** 函数式调用 会挂载到body下 重复调用时只会保留最后一个*/\r\nconst showModal = function (src: Props[\"src\"], name?: Props[\"name\"]) {\r\n  if (!root) {\r\n    const container = document.createDocumentFragment();\r\n    document.body.appendChild(container);\r\n    root = ReactDOM.createRoot(container);\r\n  }\r\n\r\n  const handleClose = () => {\r\n    root?.render(<AudioModal src={src} name={name} visible={false} />);\r\n    setTimeout(() => {\r\n      root?.unmount();\r\n      root = null;\r\n    }, 350);\r\n  };\r\n\r\n  root.render(\r\n    <AudioModal\r\n      src={src}\r\n      name={name}\r\n      visible={true}\r\n      onClose={() => handleClose()}\r\n    />\r\n  );\r\n};\r\n\r\nexport default createCompoundedComponent(AudioModal, { showModal });\r\n","import React from \"react\";\r\nimport { useBoolean } from \"ahooks\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport { selectTheme } from \"@/store/system\";\r\nimport { useSelector } from \"react-redux\";\r\nimport copy from \"clipboard-copy\";\r\nimport rehypeHighlight from \"rehype-highlight\"; // 代码块高亮插件\r\nimport \"./github-markdown.css\"; // GitHub Markdown 样式\r\nimport \"./github-highlight.css\"; // github hightlight 样式\r\n\r\nconst CopyCodeContainer = function () {\r\n  const [copied, { setTrue, setFalse }] = useBoolean(false);\r\n  return (\r\n    <div className=\"zeroclipboard-container\">\r\n      <div\r\n        className={`copy-code-btn ${copied && \"copied\"}`}\r\n        onClick={(event) => {\r\n          const codeContainerNode =\r\n            event.currentTarget.closest(\".code-container\");\r\n          const text =\r\n            codeContainerNode?.getElementsByTagName(\"pre\")[0].innerText;\r\n          copy(text || \"\").then(() => {\r\n            setTrue();\r\n            setTimeout(setFalse, 1500);\r\n          });\r\n        }}\r\n      >\r\n        {!copied ? (\r\n          <svg\r\n            aria-hidden=\"true\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            version=\"1.1\"\r\n            width=\"16\"\r\n            data-view-component=\"true\"\r\n            className=\"octicon\"\r\n          >\r\n            <path d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z\"></path>\r\n            <path d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z\"></path>\r\n          </svg>\r\n        ) : (\r\n          <svg\r\n            aria-hidden=\"true\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            version=\"1.1\"\r\n            width=\"16\"\r\n            data-view-component=\"true\"\r\n            className=\"octicon color-fg-success\"\r\n          >\r\n            <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path>\r\n          </svg>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Markdown: React.FC<{ markdown: string }> = ({ markdown }) => {\r\n  const themeName = useSelector(selectTheme);\r\n\r\n  return (\r\n    <div\r\n      className=\"markdown-body\"\r\n      data-theme={themeName}\r\n      style={{ padding: 24 }}\r\n    >\r\n      <ReactMarkdown\r\n        remarkPlugins={[remarkGfm]}\r\n        rehypePlugins={[rehypeHighlight]}\r\n        skipHtml={true} // 禁止 react-markdown 将 HTML 标签包裹在 <p> 元素内部\r\n        components={{\r\n          pre: ({ children }) => (\r\n            <div className=\"highlight code-container\">\r\n              <pre>{children}</pre>\r\n              <CopyCodeContainer />\r\n            </div>\r\n          ),\r\n        }}\r\n      >\r\n        {markdown}\r\n      </ReactMarkdown>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Markdown;\r\n","import React from \"react\";\r\n\r\n// 定义子组件的类型\r\ninterface SubComponents {\r\n  [key: string]: any;\r\n}\r\n\r\n// 主组件和子组件的组合类型\r\ntype CompoundedComponent<F, T> = F & T;\r\n\r\n/**\r\n * 创建组合组件\r\n */\r\nexport default function createCompoundedComponent<\r\n  F extends React.FC<any>,\r\n  T extends SubComponents\r\n>(mainComponent: F, subComponents: T): CompoundedComponent<F, T> {\r\n  // 将主组件转换为复合组件类型\r\n  const Component = mainComponent as CompoundedComponent<F, T>;\r\n\r\n  // 使用 Object.defineProperty 添加子组件到主组件上\r\n  Object.keys(subComponents).forEach((key) => {\r\n    Object.defineProperty(Component, key, {\r\n      value: subComponents[key],\r\n      writable: false, // 确保子组件不可变\r\n      enumerable: true,\r\n    });\r\n  });\r\n\r\n  return Component;\r\n}\r\n","export default \"# AudioModal\\r\\n音乐播放器组件\\r\\n\\r\\n## 代码演示\\r\\n```tsx\\r\\nimport { useState } from \\\"react\\\";\\r\\nimport { Button } from \\\"antd\\\";\\r\\nimport AudioModal from \\\"@/components/AudioModal\\\";\\r\\n\\r\\nexport default function AudioPage() {\\r\\n  const [visible, setVisible] = useState(false);\\r\\n\\r\\n  return (\\r\\n    <div>\\r\\n      <Button onClick={() => setVisible(true)}>点击播放音乐</Button>\\r\\n\\r\\n      <AudioModal\\r\\n        visible={visible}\\r\\n        name=\\\"音乐名称.mp3\\\"\\r\\n        audioSrc=\\\"http://downsc.chinaz.net/Files/DownLoad/sound1/201906/11582.mp3\\\"\\r\\n        onClose={() => setVisible(false)}\\r\\n      />\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\n```\\r\\n\\r\\n## 推荐使用 `showModal` \\r\\n就像普通 `Modal` 一样，`AudioModal` 总是会在 `body` 下创建节点，并且它不应该同时存在多个实例，所以我认为使用 `showModal` 调用才是合理的编码方式。\\r\\n```tsx\\r\\nimport { Button } from \\\"antd\\\";\\r\\nimport AudioModal from \\\"@/components/AudioModal\\\";\\r\\n\\r\\nexport default function PlayAudio() {\\r\\n  return (\\r\\n    <Button\\r\\n      onClick={() =>\\r\\n        AudioModal.showModal(\\r\\n          \\\"http://downsc.chinaz.net/Files/DownLoad/sound1/201906/11582.mp3\\\",\\r\\n          \\\"音乐名称.mp3\\\"\\r\\n        )\\r\\n      }\\r\\n    >\\r\\n      点击播放\\r\\n    </Button>\\r\\n  );\\r\\n}\\r\\n```\";","import { useState } from \"react\";\r\nimport { Card, Button } from \"antd\";\r\nimport AudioModal from \"@/components/AudioModal\";\r\nimport Markdown from \"@/components/Markdown\";\r\nimport doc from \"./doc.md\";\r\n\r\nexport default function AudioPage() {\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      <Card>\r\n        <Button type=\"primary\" onClick={() => setVisible(true)}>\r\n          点击播放音乐\r\n        </Button>\r\n\r\n        <AudioModal\r\n          visible={visible}\r\n          name=\"音乐名称.mp3\"\r\n          src=\"http://downsc.chinaz.net/Files/DownLoad/sound1/201906/11582.mp3\"\r\n          onClose={() => setVisible(false)}\r\n        />\r\n      </Card>\r\n      <Markdown markdown={doc} />\r\n    </>\r\n  );\r\n}\r\n"],"names":["AudioBox","styled","AudioModal","props","token","colorPrimary","colorError","theme","error","set","setError","useBoolean","nodeRef","useRef","createPortal","_jsx","Draggable","bounds","handle","children","className","style","position","top","right","zIndex","CSSTransition","in","visible","timeout","unmountOnExit","classNames","appear","_jsxs","ref","background","color","ExclamationCircleFilled","marginRight","AudioFilled","name","getFilenameFromPath","src","Button","type","icon","CloseOutlined","onClick","onClose","size","controls","autoPlay","width","onError","onPlay","document","body","root","createCompoundedComponent","showModal","container","createDocumentFragment","appendChild","ReactDOM","render","setTimeout","unmount","CopyCodeContainer","copied","setTrue","setFalse","event","codeContainerNode","currentTarget","closest","text","getElementsByTagName","innerText","copy","then","height","viewBox","version","d","Markdown","markdown","themeName","useSelector","selectTheme","padding","ReactMarkdown","remarkPlugins","remarkGfm","rehypePlugins","rehypeHighlight","skipHtml","components","pre","mainComponent","subComponents","Component","Object","keys","forEach","key","defineProperty","value","writable","enumerable","AudioPage","setVisible","useState","_Fragment","Card","doc"],"sourceRoot":""}