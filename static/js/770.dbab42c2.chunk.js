"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[770],{25877:function(e,t,a){a.d(t,{Z:function(){return Q}});var n=a(89526),i=a(24059),l=a(68175),r=a(74918),s=a(64785),o=a(71992),d=a(96799),c=a(95810),u=a(37756),m={"tools-bar":"ghwuoi3NE3Ry7s7fNzAi","header-title":"mtRVkLbROTli4p1ohQ5i","tool-right":"gpJXWmO55r2tH9Z_hXa6","toolbar-setting":"whG6r6ufswl2doZWNUEI","toolbar-setting-item":"te8gfQS8fuVGrAEe5Wko","batch-bar":"dDNrcy2mCFFeBtzOHKWq"},h=a(95267),p=a(5416),x=a(31363),g=a(67557);function y({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(x.Z,{placeholder:`请输入${e.title}`,...e.fieldProps})})}var f=a(54374),j=a(53725);function b({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(f.default,{placeholder:`请选择${e.title}`,style:{width:183},allowClear:!0,...e.fieldProps,children:e.options.map((e=>(0,g.jsx)(f.default.Option,{value:e.value,children:e.color?(0,g.jsx)(j.Z,{color:e.color,text:e.label}):e.label},e.value)))})})}var Z=a(59827);function k({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(Z.Z.Group,{options:e.options,...e.fieldProps})})}var I=a(49155);function v({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(I.ZP.Group,{options:e.options,...e.fieldProps})})}var w=a(81867);function P({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(w.default,{...e.fieldProps})})}const{RangePicker:R}=w.default;function C({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(R,{style:{width:250},...e.fieldProps})})}var S=a(91117);function T({item:e}){return(0,g.jsx)(p.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,g.jsx)(S.Z,{placeholder:`请选择${e.title}`,treeData:e.options,style:{width:183},allowClear:!0,...e.fieldProps})})}function N({item:e}){const{type:t="input",renderFormItem:a,...n}=e;if(a)return"function"==typeof a?a():a;switch(t){case"select":return(0,g.jsx)(b,{item:n});case"checkbox":return(0,g.jsx)(k,{item:n});case"radio":return(0,g.jsx)(v,{item:n});case"date":return(0,g.jsx)(P,{item:n});case"dateRange":return(0,g.jsx)(C,{item:n});case"treeSelect":return(0,g.jsx)(T,{item:n});default:return(0,g.jsx)(y,{item:n})}}var z=a(87806),F=a(31439),q=a(54437),B=a(20485);const V="188px",A=(0,q.ZP)(p.Z)`
  position: relative;
  overflow-y: hidden;
  padding-top: 16px;
  &:after {
    content: "";
    display: inline-block;
    width: ${V};
    height: 32px;
    vertical-align: top;
    margin-bottom: 16px;
  }
  & .ant-form-item {
    margin-bottom: 16px;
  }
`,K=(0,q.ZP)(p.Z.Item)`
  position: absolute;
  right: -16px;
  bottom: 0;
  z-index: 10;
`;var $=(0,n.forwardRef)((function(e,t){const[a]=p.Z.useForm(),[i,{setTrue:s,setFalse:o}]=(0,B.Z)(!1),{children:c,style:u,className:m,...h}=e,x=function(){a.resetFields(),a.submit()};return(0,n.useImperativeHandle)(t,(()=>({submit:a.submit,reset:x}))),(0,g.jsx)(l.Z,{styles:{body:{paddingTop:0,paddingBottom:0}},style:u,className:m,children:(0,g.jsxs)(A,{layout:"inline",style:{height:i?"auto":"64px",paddingRight:i?"0":V},form:a,autoComplete:"off",...h,children:[c,(0,g.jsx)(K,{children:(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(d.ZP,{type:"primary",htmlType:"submit",children:"查询"}),(0,g.jsx)(d.ZP,{onClick:()=>x(),children:"重置"}),i?(0,g.jsxs)(d.ZP,{type:"link",style:{padding:0},onClick:()=>o(),children:["收起",(0,g.jsx)(z.Z,{style:{marginInlineStart:0}})]}):(0,g.jsxs)(d.ZP,{type:"link",style:{padding:0},onClick:()=>s(),children:["展开",(0,g.jsx)(F.Z,{style:{marginInlineStart:0}})]})]})})]})})})),E=a(46044),G=a(84878),H=function(e){const{children:t,value:a,onChange:i,options:l}=e,r=l.map((e=>e.value)),[s,o]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!0),m=e=>{i(e),o(!!e.length&&e.length<r.length),u(e.length===r.length)};return(0,g.jsx)(E.Z,{arrow:!1,content:(0,g.jsxs)("div",{style:{minWidth:176},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(Z.Z,{indeterminate:s,onChange:e=>{i(e.target.checked?r:[]),o(!1),u(e.target.checked)},checked:c,children:"列展示"}),(0,g.jsx)(d.ZP,{type:"link",style:{height:22,lineHeight:1,padding:0},onClick:()=>m(r),children:"重置"})]}),(0,g.jsx)(G.Z,{style:{margin:"4px 0"}}),(0,g.jsx)(Z.Z.Group,{value:a,onChange:e=>m(e),style:{display:"block"},children:l.map((e=>(0,g.jsx)(Z.Z,{style:{display:"flex",margin:0},value:e.value,children:e.label},e.value)))})]}),placement:"bottomRight",trigger:"click",children:t})},O=a(54169),W=a(64622),_=a(48425);const D="large",M=function(e){return e.key||e.dataIndex};var Q=(0,n.forwardRef)((function(e,t){const{loading:a,columns:p,dataSource:x,pagination:y=!0,onRefresh:f,search:j=!0,batchBarRender:b,toolBarRender:Z,headerTitle:k,tableRowSelection:I}=e,v=(0,n.useMemo)((()=>p.filter((e=>!0!==e.hideInSearch)).map((e=>(0,g.jsx)(N,{item:e},M(e))))),[p]),w=(0,n.useMemo)((()=>Object.fromEntries(p.filter((e=>void 0!==e.initialValue)).map((({dataIndex:e,initialValue:t})=>[e,t])))),[p]),[P,R]=(0,n.useState)(w),C=(0,n.useRef)(null),S=(0,n.useMemo)((()=>p.filter((e=>!0!==e.hideInTable))),[p]),T=(0,u.Z)((({current:t,pageSize:a})=>!Array.isArray(x)&&e.request?.(P,{current:t,pageSize:a})),{refreshDeps:[P],defaultCurrent:y?.current||1,defaultPageSize:y?.pageSize||10,loadingDelay:0}),z=(0,n.useMemo)((()=>{const e=Array.isArray(x),{data:t,pagination:a,refresh:n}=T,i={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,style:{marginBottom:-8},...y};return{list:e?x:t?.list,pagination:!!y&&(e?i:{current:a.current,pageSize:a.pageSize,total:a.total,onChange:a.onChange,...i}),refresh(t){e||(t&&t!==a.current?a.changeCurrent(t):n()),f?.(P)}}}),[x,T,y,P,f]),[F,q]=(0,n.useState)(S.map((e=>M(e)))),[B,{setTrue:V,setFalse:A}]=(0,h.ZP)("boolean"==typeof a&&a);(0,n.useEffect)((()=>{("boolean"==typeof a?a:T.loading)?V():A()}),[a,T.loading,V,A]);const[K,E]=(0,n.useState)(D),[G,Q]=(0,n.useState)([]),{token:{borderRadius:J,controlItemBgActive:X,colorText:L}}=i.Z.useToken();return(0,n.useImperativeHandle)(t,(()=>({refresh:z.refresh,search:()=>{const t=C.current?.submit;t?t():R(null),e.onSubmit?.(P)},reset:()=>{const t=C.current?.reset;t?t():R(null),e.onReset?.(P)},clearSelected:()=>Q([])}))),(0,g.jsxs)(g.Fragment,{children:[j&&(0,g.jsx)($,{ref:C,onFinish:e=>R(e),initialValues:w,children:v}),(0,g.jsxs)(l.Z,{style:{marginTop:j?16:0},styles:{body:{paddingTop:16,paddingBottom:24}},children:[(0,g.jsxs)("div",{className:m["tools-bar"],style:{display:G.length>0?"none":"",color:L},children:[(0,g.jsx)("div",{className:m["header-title"],children:"function"==typeof k?k():k}),(0,g.jsxs)("div",{className:m["tool-right"],children:[Z&&(0,g.jsx)(r.Z,{children:"function"==typeof Z?Z(P):Z}),(0,g.jsxs)("div",{className:m["toolbar-setting"],children:[(0,g.jsx)("div",{className:m["toolbar-setting-item"],onClick:()=>z.refresh(),children:(0,g.jsx)(s.Z,{title:"刷新",children:(0,g.jsx)(O.Z,{})})}),(0,g.jsx)(o.Z,{overlayStyle:{width:80},menu:{items:[{key:"large",label:"默认"},{key:"middle",label:"中等"},{key:"small",label:"紧凑"}],selectable:!0,defaultSelectedKeys:[D],onClick:({key:e})=>E(e)},trigger:["click"],children:(0,g.jsx)("div",{className:m["toolbar-setting-item"],children:(0,g.jsx)(s.Z,{title:"密度",children:(0,g.jsx)(W.Z,{})})})}),(0,g.jsx)(H,{value:F,options:S.map((e=>({label:e.title,value:M(e)}))),onChange:e=>q(e),children:(0,g.jsx)("div",{className:m["toolbar-setting-item"],children:(0,g.jsx)(s.Z,{title:"列设置",children:(0,g.jsx)(_.Z,{})})})})]})]})]}),b&&(0,g.jsxs)("div",{className:m["batch-bar"],style:{display:G.length>0?"":"none",color:L,backgroundColor:X,borderRadius:J},children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("span",{children:["已选 ",G.length," 项"]}),(0,g.jsx)(d.ZP,{type:"link",onClick:()=>Q([]),children:"取消选择"})]}),(0,g.jsx)(r.Z,{children:"function"==typeof b?b(G):b})]}),(0,g.jsx)("div",{className:m.main,children:(0,g.jsx)(c.Z,{rowKey:e.rowKey,dataSource:z.list,columns:S.filter((e=>{const t=M(e);return F.includes(t)})),loading:B,pagination:z.pagination,rowSelection:b?{type:"checkbox",selectedRowKeys:G,onChange:e=>Q(e),preserveSelectedRowKeys:!0,...I}:void 0,size:K,bordered:!0,scroll:{x:"max-content"},footer:e.footer})})]})]})}))},7770:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(50706),i=a.n(n),l=a(25877),r=a(5416),s=a(64444),o=a(74918),d=a(96799),c=a(97132),u=a(31314),m=a(58047),h=a(67557);function p(){const e=[{title:"text",dataIndex:"text",initialValue:"initial text"},{title:"select",dataIndex:"select",type:"select",options:[{label:"选项一",value:1},{label:"选项二",value:2},{label:"选项三",value:3}],initialValue:1},{title:"checkbox",dataIndex:"checkbox",type:"checkbox",options:[{label:"选项一",value:1},{label:"选项二",value:2},{label:"选项三",value:3}],initialValue:[1,2]},{title:"radio",dataIndex:"radio",type:"radio",options:[{label:"选项一",value:1},{label:"选项二",value:2},{label:"选项三",value:3}],initialValue:1},{title:"date",dataIndex:"date",type:"date"},{title:"dateTime",dataIndex:"dateTime",type:"date",fieldProps:{showTime:!0}},{title:"week",dataIndex:"week",type:"date",fieldProps:{picker:"week"}},{title:"month",dataIndex:"month",type:"date",fieldProps:{picker:"month"}},{title:"quarter",dataIndex:"quarter",type:"date",fieldProps:{picker:"quarter"}},{title:"year",dataIndex:"year",type:"date",fieldProps:{picker:"year"}},{title:"dateRange",dataIndex:"dateRange",type:"dateRange"},{title:"dateTimeRange",dataIndex:"dateTimeRange",type:"dateRange",fieldProps:{showTime:!0}},{title:"weekRange",dataIndex:"weekRange",type:"dateRange",fieldProps:{picker:"week"}},{title:"monthRange",dataIndex:"monthRange",type:"dateRange",fieldProps:{picker:"month"}},{title:"quarterRange",dataIndex:"quarterRange",type:"dateRange",fieldProps:{picker:"quarter"}},{title:"yearRange",dataIndex:"yearRange",type:"dateRange",fieldProps:{picker:"year"}},{title:"custom",dataIndex:"custom",renderFormItem:()=>(0,h.jsx)(r.Z.Item,{label:"custom",name:"custom",children:(0,h.jsx)(s.Z,{style:{width:200}})})},{title:"操作",key:"action",render:e=>(0,h.jsxs)(o.Z,{children:[(0,h.jsx)(d.ZP,{type:"primary",ghost:!0,size:"small",children:"编辑"}),(0,h.jsx)(d.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),fixed:"right",hideInSearch:!0}],t=[...Array(15)].map((()=>i().mock({id:"@guid",text:"@ctitle","select|1":[1,2,3],"checkbox|1":[1,2,3],"radio|1":[1,2,3],date:"@date",dateTime:"@datetime",week:"2023-31周",month:"2023-02","quarter|1":["1季度","2季度","3季度","4季度"],year:"2023",dateRange:"@date",dateTimeRange:"@datetime",weekRange:"2023-31周",monthRange:"2023-02","quarterRange|1":["1季度","2季度","3季度","4季度"],yearRange:"2023","custom|0-100":1})));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.Z,{message:"此页面主要演示搜索表单栏的配置项",type:"info",showIcon:!0,closable:!0}),(0,h.jsx)(l.Z,{rowKey:"id",headerTitle:"数据列表",columns:e,dataSource:t,batchBarRender:[(0,h.jsx)(d.ZP,{type:"primary",danger:!0,onClick:()=>u.ZP.warning("演示功能"),children:"批量删除"},"del"),(0,h.jsx)(d.ZP,{onClick:()=>u.ZP.warning("演示功能"),children:"导出数据"},"export")],toolBarRender:e=>[(0,h.jsx)(d.ZP,{type:"primary",icon:(0,h.jsx)(m.Z,{}),onClick:()=>u.ZP.warning("演示功能"),children:"新增"},"add"),(0,h.jsx)(d.ZP,{onClick:()=>u.ZP.warning("演示功能"),children:"导出"},"export")]})]})}}}]);
//# sourceMappingURL=770.dbab42c2.chunk.js.map