"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[289],{4544:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var n=r(9526),l=r(4152),s=r(1821),a=r(592),o=r(8047),i=r(6430),c=r(3716),d=r(8589),u=r(9367),p=r(8139),f=r(7557);function h({defaultChecked:e=!1,onChange:t=(()=>null)}){const[r,{set:n}]=(0,d.Z)(e),[l,{setTrue:s,setFalse:a}]=(0,p.ZP)(!1);return(0,f.jsx)(u.Z,{checked:r,loading:l,onChange:e=>{n(e),s(),t(e)?.catch((()=>{n(!e)})).finally((()=>a()))}})}var m=r(2116),x=r(7839),Z=r(8570),y=r(1136),b=r(4403),j=r.n(b),g=r(1368),C=r(5342),P=r(484),k=r(4990),w=r(3874),I=r(4425),O=(0,I.i)((e=>{const{prefixCls:t,className:r,closeIcon:l,closable:s,type:a,title:o,children:i}=e,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]])}return r}(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:d}=n.useContext(C.E_),u=d(),p=t||d("modal"),[,f]=(0,w.Z)(p),h=`${p}-confirm`;let m={};return m=a?{closable:null!=s&&s,title:"",footer:"",children:n.createElement(P.O,Object.assign({},e,{confirmPrefixCls:h,rootPrefixCls:u,content:i}))}:{closable:null==s||s,title:o,footer:void 0===e.footer?n.createElement(k.$,Object.assign({},e)):e.footer,children:i},n.createElement(g.s,Object.assign({prefixCls:p,className:j()(f,`${p}-pure-panel`,a&&h,a&&`${h}-${a}`,r)},c,{closeIcon:(0,k.b)(p,l),closable:s},m))})),v=r(4894);function S(e){return(0,x.ZP)((0,x.uW)(e))}const F=y.Z;F.useModal=v.Z,F.info=function(e){return(0,x.ZP)((0,x.cw)(e))},F.success=function(e){return(0,x.ZP)((0,x.vq)(e))},F.error=function(e){return(0,x.ZP)((0,x.AQ)(e))},F.warning=S,F.warn=S,F.confirm=function(e){return(0,x.ZP)((0,x.Au)(e))},F.destroyAll=function(){for(;Z.Z.length;){const e=Z.Z.pop();e&&e()}},F.config=x.ai,F._InternalPanelDoNotUseOrYouWillBeFired=O;var A=F,N=r(6843),_=(0,n.forwardRef)(((e,t)=>{const{message:r}=l.Z.useApp(),[o]=m.Z.useForm(),[i,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[x,{setTrue:Z,setFalse:y}]=(0,p.ZP)(!1);return(0,n.useImperativeHandle)(t,(()=>({addStart:()=>h(!0),editStart:e=>{d(e.id),o.setFieldsValue(e),h(!0)}}))),(0,f.jsx)(A,{title:i?"编辑":"新增",open:u,width:600,footer:(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(a.ZP,{onClick:()=>h(!1),children:"取消"}),(0,f.jsx)(a.ZP,{type:"primary",loading:x,onClick:()=>o.submit(),children:"确定"})]}),onCancel:()=>h(!1),afterClose:()=>{d(""),o.resetFields()},children:(0,f.jsxs)(m.Z,{form:o,layout:"vertical",onFinish:function(t){Z(!0);const n=i?"/api/role/update":"/api/role/add",l=i?"更新成功！":"新增成功！",s=i?{id:i,...t}:t;c.Z.post(n,s).then((()=>{h(!1),r.success(l),e.callback?.(i?void 0:1)})).finally((()=>y()))},autoComplete:"off",children:[(0,f.jsx)(m.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,f.jsx)(N.Z,{placeholder:"请输入"})}),(0,f.jsx)(m.Z.Item,{name:"description",label:"备注",children:(0,f.jsx)(N.Z.TextArea,{placeholder:"请输入"})})]})})}));function z(){const{message:e}=l.Z.useApp(),t=(0,n.useRef)(),r=(0,n.useRef)(),d=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,r)=>(0,f.jsx)(h,{defaultChecked:1===t,onChange:t=>function(t,r){return c.Z.post("/api/role/status/update",{id:t,status:r}).then((()=>{e.success("切换成功！")}))}(r.id,t?1:0)}),type:"select",options:[{label:"启用",value:"1"},{label:"禁用",value:"0"}]},{title:"操作",key:"action",render:e=>(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(a.ZP,{type:"primary",ghost:!0,size:"small",onClick:()=>r.current.editStart(e),children:"编辑"}),(0,f.jsx)(a.ZP,{type:"primary",size:"small",children:"授权"}),(0,f.jsx)(a.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),width:100,fixed:"right",hideInSearch:!0}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{ref:t,columns:d,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:r})=>c.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:r}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>[(0,f.jsx)(a.ZP,{type:"primary",icon:(0,f.jsx)(o.Z,{}),onClick:()=>r.current.addStart(),children:"新增"},"add")]}),(0,f.jsx)(_,{ref:r,callback:e=>t.current.refresh(e)})]})}}}]);
//# sourceMappingURL=289.c2f69a25.chunk.js.map