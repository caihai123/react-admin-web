"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[211],{9957:function(e,t,n){n.d(t,{Z:function(){return H}});var i=n(9526),l=n(5642),r=n(8175),a=n(5293),s=n(592),o=n(7806),d=n(1439),c=n(4437),h=n(8589),u=n(7557);const p="188px",m=(0,c.ZP)(l.Z)`
  position: relative;
  overflow-y: hidden;
  padding-top: 16px;
  &:after {
    content: "";
    display: inline-block;
    width: ${p};
    height: 32px;
    vertical-align: top;
    margin-bottom: 16px;
  }
  & .ant-form-item {
    margin-bottom: 16px;
  }
`,g=(0,c.ZP)(l.Z.Item)`
  position: absolute;
  right: -16px;
  bottom: 0;
  z-index: 10;
`;var x=(0,i.forwardRef)((function(e,t){const[n]=l.Z.useForm(),[c,{setTrue:x,setFalse:y}]=(0,h.Z)(!1),{children:j,style:f,className:b,...Z}=e,k=function(){n.resetFields(),n.submit()};return(0,i.useImperativeHandle)(t,(()=>({submit:n.submit,reset:k}))),(0,u.jsx)(r.Z,{bodyStyle:{paddingTop:0,paddingBottom:0},style:f,className:b,children:(0,u.jsxs)(m,{layout:"inline",style:{height:c?"auto":"64px",paddingRight:c?"0":p},form:n,...Z,children:[j,(0,u.jsx)(g,{children:(0,u.jsxs)(a.Z,{children:[(0,u.jsx)(s.ZP,{type:"primary",htmlType:"submit",children:"查询"}),(0,u.jsx)(s.ZP,{onClick:()=>k(),children:"重置"}),c?(0,u.jsxs)(s.ZP,{type:"link",style:{padding:0},onClick:()=>y(),children:["收起",(0,u.jsx)(o.Z,{style:{marginInlineStart:0}})]}):(0,u.jsxs)(s.ZP,{type:"link",style:{padding:0},onClick:()=>x(),children:["展开",(0,u.jsx)(d.Z,{style:{marginInlineStart:0}})]})]})})]})})})),y=n(7979),j=n(6843),f=n(446),b=n(4785),Z=n(5466),k=n(990),v={"tools-bar":"ghwuoi3NE3Ry7s7fNzAi","header-title":"mtRVkLbROTli4p1ohQ5i","tool-right":"gpJXWmO55r2tH9Z_hXa6","toolbar-setting":"whG6r6ufswl2doZWNUEI","toolbar-setting-item":"te8gfQS8fuVGrAEe5Wko","batch-bar":"dDNrcy2mCFFeBtzOHKWq"},S=n(8001),w=n(2652),R=n.n(w),C=n(4169),I=n(4622),T=n(8425),z=n(6619),N=n(3955),P=n(4878),B=function(e){const{children:t,value:n,onChange:l,options:r}=e,a=r.map((e=>e.value)),[o,d]=(0,i.useState)(!1),[c,h]=(0,i.useState)(!0),p=e=>{l(e),d(!!e.length&&e.length<a.length),h(e.length===a.length)};return(0,u.jsx)(z.Z,{arrow:!1,content:(0,u.jsxs)("div",{style:{minWidth:176},children:[(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,u.jsx)(N.Z,{indeterminate:o,onChange:e=>{l(e.target.checked?a:[]),d(!1),h(e.target.checked)},checked:c,children:"列展示"}),(0,u.jsx)(s.ZP,{type:"link",style:{height:22,lineHeight:1,padding:0},onClick:()=>p(a),children:"重置"})]}),(0,u.jsx)(P.Z,{style:{margin:"4px 0"}}),(0,u.jsx)(N.Z.Group,{value:n,onChange:e=>p(e),style:{display:"block"},children:r.map((e=>(0,u.jsx)(N.Z,{style:{display:"flex",margin:0},value:e.value,children:e.label},e.value)))})]}),placement:"bottomRight",trigger:"click",children:t})};const K=function(e){return"select"===e.type?(0,u.jsx)(y.Z,{placeholder:`请选择${e.title}`,options:e.options,style:{width:"183px"}}):(0,u.jsx)(j.Z,{placeholder:`请输入${e.title}`})},O=function(e){return e.key||e.dataIndex},q="large",F=(0,i.forwardRef)((function(e,t){const{columns:n=[],search:o=!0,toolBarRender:d=null,headerTitle:c,batchBarRender:h=null,tableRowSelection:p={},pagination:m=!0}=e,g=(0,i.useMemo)((()=>Object.fromEntries(n.filter((e=>void 0!==e.initialValue)).map((({dataIndex:e,initialValue:t})=>[e,t])))),[n]),y=(0,i.useMemo)((()=>n.filter((e=>!0!==e.hideInSearch)).map((e=>(0,u.jsx)(l.Z.Item,{label:e.title,name:e.dataIndex,children:K(e)},O(e))))),[n]),j=(0,i.useMemo)((()=>n.filter((e=>!0!==e.hideInTable))),[n]),[w,R]=(0,i.useState)(j.map((e=>O(e)))),[z,N]=(0,i.useState)(g),P=(0,i.useRef)(null),{data:F,pagination:H,loading:V,refresh:W}=(0,S.Z)((({current:t,pageSize:n})=>e.request(z,{current:t,pageSize:n})),{refreshDeps:[z],defaultCurrent:m?.current||1,defaultPageSize:m?.pageSize||10,loadingDelay:300}),[$,_]=(0,i.useState)(q),[E,A]=(0,i.useState)([]);(0,i.useImperativeHandle)(t,(()=>({refresh:W,search:()=>{const e=P?.current?.submit;e?e():N(null)},reset:()=>{const e=P?.current?.reset;e?e():N(null)},clearSelected:()=>A([])})));const{token:{borderRadius:D,controlItemBgActive:G,colorText:M}}=f.default.useToken();return(0,u.jsxs)(u.Fragment,{children:[o&&(0,u.jsx)(x,{ref:P,onFinish:e=>N(e),initialValues:g,children:y}),(0,u.jsxs)(r.Z,{style:{marginTop:16},bodyStyle:{paddingTop:16,paddingBottom:m?0:24},children:[(0,u.jsxs)("div",{className:v["tools-bar"],style:{display:E.length>0?"none":"",color:M},children:[(0,u.jsx)("div",{className:v["header-title"],children:"function"==typeof c?c():c}),(0,u.jsxs)("div",{className:v["tool-right"],children:[d&&(0,u.jsx)(a.Z,{children:"function"==typeof d?d():d}),(0,u.jsxs)("div",{className:v["toolbar-setting"],children:[(0,u.jsx)("div",{className:v["toolbar-setting-item"],onClick:()=>W(),children:(0,u.jsx)(b.Z,{title:"刷新",children:(0,u.jsx)(C.Z,{})})}),(0,u.jsx)(Z.Z,{overlayStyle:{width:80},menu:{items:[{key:"large",label:"默认"},{key:"middle",label:"中等"},{key:"small",label:"紧凑"}],selectable:!0,defaultSelectedKeys:[q],onClick:({key:e})=>_(e)},trigger:["click"],children:(0,u.jsx)("div",{className:v["toolbar-setting-item"],children:(0,u.jsx)(b.Z,{title:"密度",children:(0,u.jsx)(I.Z,{})})})}),(0,u.jsx)(B,{value:w,options:j.map((e=>({label:e.title,value:O(e)}))),onChange:e=>R(e),children:(0,u.jsx)("div",{className:v["toolbar-setting-item"],children:(0,u.jsx)(b.Z,{title:"列设置",children:(0,u.jsx)(T.Z,{})})})})]})]})]}),h&&(0,u.jsxs)("div",{className:v["batch-bar"],style:{display:E.length>0?"":"none",color:M,backgroundColor:G,borderRadius:D},children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{children:["已选 ",E.length," 项"]}),(0,u.jsx)(s.ZP,{type:"link",onClick:()=>A([]),children:"取消选择"})]}),(0,u.jsx)(a.Z,{children:"function"==typeof h?h(E):h})]}),(0,u.jsx)("div",{className:v.main,children:(0,u.jsx)(k.Z,{rowKey:e.rowKey,dataSource:F?.list,columns:j.filter((e=>{const t=O(e);return w.includes(t)})),pagination:!!m&&{current:H.current,pageSize:H.pageSize,total:H.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,onChange:H.onChange,...m},loading:V,rowSelection:h?{type:"checkbox",selectedRowKeys:E,onChange:e=>A(e),preserveSelectedRowKeys:!0,...p}:void 0,bordered:!0,size:$,scroll:{x:"max-content"}})})]})]})}));F.propTypes={rowKey:R().string.isRequired,request:R().func.isRequired,columns:R().array.isRequired,search:R().bool,toolBarRender:R().oneOfType([R().element,R().array,R().func]),headerTitle:R().oneOfType([R().element,R().array,R().func,R().string]),batchBarRender:R().oneOfType([R().element,R().array,R().func]),tableRowSelection:R().object,pagination:R().oneOfType([R().object,R().bool])};var H=F},3211:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var i=n(75),l=n(5293),r=n(592),a=n(8047),s=n(9957),o=n(4571),d=n(7557);function c(){const e=(0,o.Z)(),t=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:e=>(0,d.jsx)(i.Z,{checked:1===e}),type:"select",options:[{label:"启用",value:"1"},{label:"禁用",value:"0"}]},{title:"操作",key:"action",render:e=>(0,d.jsxs)(l.Z,{children:[(0,d.jsx)(r.ZP,{type:"primary",ghost:!0,size:"small",children:"编辑"}),(0,d.jsx)(r.ZP,{type:"primary",size:"small",children:"授权"}),(0,d.jsx)(r.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),width:100,fixed:"right",hideInSearch:!0}];return(0,d.jsx)(s.Z,{columns:t,rowKey:"id",headerTitle:"角色列表",request:(t,{current:n,pageSize:i})=>e.post("/api/role/page",{params:t,pageIndex:n,pageSize:i}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>[(0,d.jsx)(r.ZP,{type:"primary",icon:(0,d.jsx)(a.Z,{}),children:"新增"},"add")]})}}}]);
//# sourceMappingURL=211.14c8eaea.chunk.js.map