"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[211],{826:function(e,t,n){n.d(t,{Z:function(){return M}});var i=n(9526),r=n(5642),l=n(8175),a=n(5293),s=n(592),o=n(7806),d=n(1439),c=n(4437),u=n(8589),h=n(7557);const m="188px",p=(0,c.ZP)(r.Z)`
  position: relative;
  overflow-y: hidden;
  padding-top: 16px;
  &:after {
    content: "";
    display: inline-block;
    width: ${m};
    height: 32px;
    vertical-align: top;
    margin-bottom: 16px;
  }
  & .ant-form-item {
    margin-bottom: 16px;
  }
`,x=(0,c.ZP)(r.Z.Item)`
  position: absolute;
  right: -16px;
  bottom: 0;
  z-index: 10;
`;var g=(0,i.forwardRef)((function(e,t){const[n]=r.Z.useForm(),[c,{setTrue:g,setFalse:f}]=(0,u.Z)(!1),{children:y,style:j,className:b,...Z}=e,k=function(){n.resetFields(),n.submit()};return(0,i.useImperativeHandle)(t,(()=>({submit:n.submit,reset:k}))),(0,h.jsx)(l.Z,{bodyStyle:{paddingTop:0,paddingBottom:0},style:j,className:b,children:(0,h.jsxs)(p,{layout:"inline",style:{height:c?"auto":"64px",paddingRight:c?"0":m},form:n,...Z,children:[y,(0,h.jsx)(x,{children:(0,h.jsxs)(a.Z,{children:[(0,h.jsx)(s.ZP,{type:"primary",htmlType:"submit",children:"查询"}),(0,h.jsx)(s.ZP,{onClick:()=>k(),children:"重置"}),c?(0,h.jsxs)(s.ZP,{type:"link",style:{padding:0},onClick:()=>f(),children:["收起",(0,h.jsx)(o.Z,{style:{marginInlineStart:0}})]}):(0,h.jsxs)(s.ZP,{type:"link",style:{padding:0},onClick:()=>g(),children:["展开",(0,h.jsx)(d.Z,{style:{marginInlineStart:0}})]})]})})]})})})),f=n(446),y=n(4785),j=n(5466),b=n(990),Z={"tools-bar":"ghwuoi3NE3Ry7s7fNzAi","header-title":"mtRVkLbROTli4p1ohQ5i","tool-right":"gpJXWmO55r2tH9Z_hXa6","toolbar-setting":"whG6r6ufswl2doZWNUEI","toolbar-setting-item":"te8gfQS8fuVGrAEe5Wko","batch-bar":"dDNrcy2mCFFeBtzOHKWq"},k=n(8001),v=n(2652),I=n.n(v),w=n(4169),S=n(4622),P=n(8425),R=n(6619),C=n(3955),T=n(4878),z=function(e){const{children:t,value:n,onChange:r,options:l}=e,a=l.map((e=>e.value)),[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!0),m=e=>{r(e),d(!!e.length&&e.length<a.length),u(e.length===a.length)};return(0,h.jsx)(R.Z,{arrow:!1,content:(0,h.jsxs)("div",{style:{minWidth:176},children:[(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,h.jsx)(C.Z,{indeterminate:o,onChange:e=>{r(e.target.checked?a:[]),d(!1),u(e.target.checked)},checked:c,children:"列展示"}),(0,h.jsx)(s.ZP,{type:"link",style:{height:22,lineHeight:1,padding:0},onClick:()=>m(a),children:"重置"})]}),(0,h.jsx)(T.Z,{style:{margin:"4px 0"}}),(0,h.jsx)(C.Z.Group,{value:n,onChange:e=>m(e),style:{display:"block"},children:l.map((e=>(0,h.jsx)(C.Z,{style:{display:"flex",margin:0},value:e.value,children:e.label},e.value)))})]}),placement:"bottomRight",trigger:"click",children:t})},N=n(6843);function B({item:e}){return(0,h.jsx)(r.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,h.jsx)(N.Z,{placeholder:`请输入${e.title}`,...e.fieldProps})})}var F=n(7979);function K({item:e}){return(0,h.jsx)(r.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,h.jsx)(F.Z,{placeholder:`请选择${e.title}`,options:e.options,style:{width:183},...e.fieldProps})})}function O({item:e}){return(0,h.jsx)(r.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,h.jsx)(C.Z.Group,{options:e.options,...e.fieldProps})})}var q=n(3124);function G({item:e}){return(0,h.jsx)(r.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,h.jsx)(q.ZP.Group,{options:e.options,...e.fieldProps})})}var H=n(5184);function V({item:e}){return(0,h.jsx)(r.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,h.jsx)(H.default,{...e.fieldProps})})}const{RangePicker:W}=H.default;function $({item:e}){return(0,h.jsx)(r.Z.Item,{label:e.title,name:e.dataIndex,...e.formItemProps,children:(0,h.jsx)(W,{style:{width:250},...e.fieldProps})})}function _({item:e}){if(e.renderFormItem)return e.renderFormItem();switch(e.type){case"select":return(0,h.jsx)(K,{item:e});case"checkbox":return(0,h.jsx)(O,{item:e});case"radio":return(0,h.jsx)(G,{item:e});case"date":return(0,h.jsx)(V,{item:e});case"dateRange":return(0,h.jsx)($,{item:e});default:return(0,h.jsx)(B,{item:e})}}const E=function(e){return e.key||e.dataIndex},A="large",D=(0,i.forwardRef)((function(e,t){const{columns:n=[],search:r=!0,toolBarRender:o=null,headerTitle:d,batchBarRender:c=null,tableRowSelection:u={},pagination:m=!0}=e,p=(0,i.useMemo)((()=>Object.fromEntries(n.filter((e=>void 0!==e.initialValue)).map((({dataIndex:e,initialValue:t})=>[e,t])))),[n]),x=(0,i.useMemo)((()=>n.filter((e=>!0!==e.hideInSearch)).map((e=>(0,h.jsx)(_,{item:e},E(e))))),[n]),v=(0,i.useMemo)((()=>n.filter((e=>!0!==e.hideInTable))),[n]),[I,R]=(0,i.useState)(v.map((e=>E(e)))),[C,T]=(0,i.useState)(p),N=(0,i.useRef)(null),{data:B,pagination:F,loading:K,refresh:O}=(0,k.Z)((({current:t,pageSize:n})=>e.request(C,{current:t,pageSize:n})),{refreshDeps:[C],defaultCurrent:m?.current||1,defaultPageSize:m?.pageSize||10,loadingDelay:300}),[q,G]=(0,i.useState)(A),[H,V]=(0,i.useState)([]);(0,i.useImperativeHandle)(t,(()=>({refresh:O,search:()=>{const e=N?.current?.submit;e?e():T(null)},reset:()=>{const e=N?.current?.reset;e?e():T(null)},clearSelected:()=>V([])})));const{token:{borderRadius:W,controlItemBgActive:$,colorText:D}}=f.default.useToken();return(0,h.jsxs)(h.Fragment,{children:[r&&(0,h.jsx)(g,{ref:N,onFinish:e=>T(e),initialValues:p,children:x}),(0,h.jsxs)(l.Z,{style:{marginTop:16},bodyStyle:{paddingTop:16,paddingBottom:m?0:24},children:[(0,h.jsxs)("div",{className:Z["tools-bar"],style:{display:H.length>0?"none":"",color:D},children:[(0,h.jsx)("div",{className:Z["header-title"],children:"function"==typeof d?d():d}),(0,h.jsxs)("div",{className:Z["tool-right"],children:[o&&(0,h.jsx)(a.Z,{children:"function"==typeof o?o():o}),(0,h.jsxs)("div",{className:Z["toolbar-setting"],children:[(0,h.jsx)("div",{className:Z["toolbar-setting-item"],onClick:()=>O(),children:(0,h.jsx)(y.Z,{title:"刷新",children:(0,h.jsx)(w.Z,{})})}),(0,h.jsx)(j.Z,{overlayStyle:{width:80},menu:{items:[{key:"large",label:"默认"},{key:"middle",label:"中等"},{key:"small",label:"紧凑"}],selectable:!0,defaultSelectedKeys:[A],onClick:({key:e})=>G(e)},trigger:["click"],children:(0,h.jsx)("div",{className:Z["toolbar-setting-item"],children:(0,h.jsx)(y.Z,{title:"密度",children:(0,h.jsx)(S.Z,{})})})}),(0,h.jsx)(z,{value:I,options:v.map((e=>({label:e.title,value:E(e)}))),onChange:e=>R(e),children:(0,h.jsx)("div",{className:Z["toolbar-setting-item"],children:(0,h.jsx)(y.Z,{title:"列设置",children:(0,h.jsx)(P.Z,{})})})})]})]})]}),c&&(0,h.jsxs)("div",{className:Z["batch-bar"],style:{display:H.length>0?"":"none",color:D,backgroundColor:$,borderRadius:W},children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("span",{children:["已选 ",H.length," 项"]}),(0,h.jsx)(s.ZP,{type:"link",onClick:()=>V([]),children:"取消选择"})]}),(0,h.jsx)(a.Z,{children:"function"==typeof c?c(H):c})]}),(0,h.jsx)("div",{className:Z.main,children:(0,h.jsx)(b.Z,{rowKey:e.rowKey,dataSource:B?.list,columns:v.filter((e=>{const t=E(e);return I.includes(t)})),pagination:!!m&&{current:F.current,pageSize:F.pageSize,total:F.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,onChange:F.onChange,...m},loading:K,rowSelection:c?{type:"checkbox",selectedRowKeys:H,onChange:e=>V(e),preserveSelectedRowKeys:!0,...u}:void 0,bordered:!0,size:q,scroll:{x:"max-content"}})})]})]})}));D.propTypes={rowKey:I().string.isRequired,request:I().func.isRequired,columns:I().array.isRequired,search:I().bool,toolBarRender:I().oneOfType([I().element,I().array,I().func]),headerTitle:I().oneOfType([I().element,I().array,I().func,I().string]),batchBarRender:I().oneOfType([I().element,I().array,I().func]),tableRowSelection:I().object,pagination:I().oneOfType([I().object,I().bool])};var M=D},3211:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=n(75),r=n(5293),l=n(592),a=n(1314),s=n(8047),o=n(826),d=n(4571),c=n(7557);function u(){const e=(0,d.Z)(),t=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:e=>(0,c.jsx)(i.Z,{checked:1===e}),type:"select",options:[{label:"启用",value:"1"},{label:"禁用",value:"0"}]},{title:"操作",key:"action",render:e=>(0,c.jsxs)(r.Z,{children:[(0,c.jsx)(l.ZP,{type:"primary",ghost:!0,size:"small",children:"编辑"}),(0,c.jsx)(l.ZP,{type:"primary",size:"small",children:"授权"}),(0,c.jsx)(l.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),width:100,fixed:"right",hideInSearch:!0}];return(0,c.jsx)(o.Z,{columns:t,rowKey:"id",headerTitle:"角色列表",request:(t,{current:n,pageSize:i})=>e.post("/api/role/page",{params:t,pageIndex:n,pageSize:i}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>[(0,c.jsx)(l.ZP,{type:"primary",icon:(0,c.jsx)(s.Z,{}),onClick:()=>a.ZP.warning("演示功能"),children:"新增"},"add")]})}}}]);
//# sourceMappingURL=211.9bfaca52.chunk.js.map