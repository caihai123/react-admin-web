"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[632],{7627:function(e,t,i){var n=i(89526),r=i(24059),o=i(96799),l=i(79255),s=i(25540),a=i(17431),d=i(31315),c=i.n(d),p=i(24470),h=i(73961),u=i(49839),g=i(20485),x=i(22701),f=i(37470),y=i(54437),m=i(67557);const j=y.ZP.div`
  width: 320px;
  border-radius: 8px;
  padding: 10px 14px 14px 14px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
  & > .drag-handler {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 16px;
    color: #fff;
    cursor: move;
    user-select: none;
  }
  &.zoom-in-top-enter {
    opacity: 0;
    transform: scaleY(0);
  }
  &.zoom-in-top-enter-active {
    opacity: 1;
    transform: scaleY(1);
    transition: opacity 300ms, transform 300ms;
    transform-origin: top;
  }
  &.zoom-in-top-exit {
    opacity: 1;
    transform: scaleY(1);
    transition: opacity 300ms, transform 300ms;
    transform-origin: top;
  }
  &.zoom-in-top-exit-active {
    opacity: 0;
    transform: scaleY(0);
  }
  &.zoom-in-top-appear {
    opacity: 0;
    transform: scaleY(0);
  }
  &.zoom-in-top-appear-active {
    opacity: 1;
    transform: scaleY(1);
    transition: opacity 300ms, transform 300ms;
    transform-origin: top;
  }
`,b=e=>{const{token:{colorPrimary:t,colorError:i}}=r.Z.useToken(),[d,{set:p}]=(0,g.Z)(!1),u=(0,n.useRef)(null);return(0,h.createPortal)((0,m.jsx)(c(),{bounds:"body",handle:".drag-handler",children:(0,m.jsx)("div",{className:"video-modal",style:{position:"fixed",top:60,right:0,zIndex:999},children:(0,m.jsx)(f.Z,{in:e.visible,nodeRef:u,timeout:300,unmountOnExit:!0,classNames:"zoom-in-top",appear:!0,children:(0,m.jsxs)(j,{ref:u,style:{background:t},children:[(0,m.jsxs)("div",{className:"drag-handler",children:[(0,m.jsxs)("div",{className:"audio-name ellipsis",style:{color:d?i:""},children:[d?(0,m.jsx)(l.Z,{style:{marginRight:8}}):(0,m.jsx)(s.Z,{style:{marginRight:8}}),e.name?e.name:(0,x.B)(e.src)]}),(0,m.jsx)(o.ZP,{type:"text",icon:(0,m.jsx)(a.Z,{}),onClick:()=>e.onClose?.(),style:{color:"#fff"},size:"small"})]}),(0,m.jsx)("audio",{src:e.src,controls:!0,autoPlay:!0,style:{width:"100%"},onError:()=>p(!0),onPlay:()=>p(!1)})]})})})}),document.body)};let v;t.Z=(0,u.Z)(b,{showModal:function(e,t){if(!v){const e=document.createDocumentFragment();document.body.appendChild(e),v=p.createRoot(e)}v.render((0,m.jsx)(b,{src:e,name:t,visible:!0,onClose:()=>(v?.render((0,m.jsx)(b,{src:e,name:t,visible:!1})),void setTimeout((()=>{v?.unmount(),v=null}),350))}))}})},6459:function(e,t,i){var n=i(89526),r=i(24059),o=i(57744),l=i(15823),s=i(24470),a=i(49839),d=i(67557);const c=function(e){const{width:t=800,height:i,autoPlay:s=!0}=e,[a,c]=(0,n.useState)(!1),{token:{colorBgLayout:p}}=r.Z.useToken();return(0,d.jsx)(o.Z,{style:{display:"none"},preview:{visible:e.visible,destroyOnClose:!0,imageRender:()=>a?(0,d.jsx)(l.ZP,{status:"error",title:"视频不能正常播放！",subTitle:"The video doesn't play properly!",style:{width:t,background:p}}):(0,d.jsx)("video",{width:t,height:i,autoPlay:s,controls:!0,src:e.src,onError:()=>c(!0),onPlay:()=>c(!1)}),toolbarRender:()=>null,onVisibleChange:()=>{e.onClose?.()}}})};let p,h=1;t.Z=(0,a.Z)(c,{showModal:function(e){if(h++,!p){const e=document.createDocumentFragment();document.body.appendChild(e),p=s.createRoot(e)}p.render((0,d.jsx)(c,{src:e,visible:!0,onClose:()=>{p?.render((0,d.jsx)(c,{src:e,visible:!1},h))}},h))}})},49839:function(e,t,i){function n(e,t){const i=e;return Object.keys(t).forEach((e=>{Object.defineProperty(i,e,{value:t[e],writable:!1,enumerable:!0})})),i}i.d(t,{Z:function(){return n}})},70632:function(e,t,i){i.r(t),i.d(t,{default:function(){return G}});var n=i(89526),r=i(24059),o=i(74918),l=i(64785),s=i(96799),a=i(75452),d=i(18740),c=i(4677),p=i(95810),h=i(68175),u=i(84878),g=i(96479),x=i(10011),f=i(53139),y=i(88241),m=i(31363),j=i(90569),b=i(45303),v=i(47575),Z=i(64871),w=i(48126),k=i(37756),z=i(22390),$=i(95694),S=i(22701),C=(0,i(60436).Z)({scriptUrl:"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js"}),O=i(57744),P=i(7627),I=i(6459),E=i(20485),M=i(13309),T=i(70925),N=i(67557);function B(e){const{token:{colorBgMask:t,colorWhite:i}}=r.Z.useToken(),{zIndex:n=9,trigger:o="hover",content:l=(0,N.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:i},children:[(0,N.jsx)(T.Z,{style:{marginRight:4}}),"预览"]})}=e,[s,{set:a}]=(0,E.Z)(!1);(0,M.Z)((()=>{"always"===o&&a(!0)}));const d={zIndex:n,position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",cursor:e.onClick?"pointer":"auto",background:t,opacity:s?1:0,transition:"opacity 0.3s"};return(0,N.jsxs)("div",{style:{position:"relative",...e.style},onMouseOver:()=>{"hover"===o&&a(!0)},onMouseOut:()=>{"hover"===o&&a(!1)},onClick:e.onClick,children:[e.children,(0,N.jsx)("div",{style:d,children:l})]})}function R(e){const{src:t,type:i,height:n}=e;switch(i){case"img":return(0,N.jsx)(O.Z,{src:t,height:n,preview:!0});case"doc":return(0,N.jsx)(C,{type:"icon-file_txt",style:{fontSize:n}});case"video":return(0,N.jsx)(B,{onClick:()=>I.Z.showModal(t),style:{display:"inline-block"},children:(0,N.jsx)(C,{type:"icon-file_video",style:{fontSize:n}})});case"audio":return(0,N.jsx)(B,{onClick:()=>P.Z.showModal(t),style:{display:"inline-block"},children:(0,N.jsx)(C,{type:"icon-file_music",style:{fontSize:n}})});default:return(0,N.jsx)(C,{type:"icon-File",style:{fontSize:n}})}}var W=i(68347),_=i(91317);const H={height:250,appendPadding:10,data:[{type:"图片",value:4544},{type:"文档",value:3321},{type:"视频",value:3113},{type:"音频",value:3113},{type:"其他",value:2341}],angleField:"value",colorField:"type",innerRadius:.6,label:!1,legend:!1,statistic:!1};function D(){return(0,N.jsx)(_.Z,{...H})}const Y=e=>{const t=window.getComputedStyle(e,null);return{left:Number.parseInt(t.paddingLeft,10)||0,right:Number.parseInt(t.paddingRight,10)||0,top:Number.parseInt(t.paddingTop,10)||0,bottom:Number.parseInt(t.paddingBottom,10)||0}};function F({text:e,...t}){const i=(0,n.useRef)(null),{isOverflowX:r}=function(e){const[t,{set:i}]=(0,E.Z)(!1),[r,{set:o}]=(0,E.Z)(!1);return function(e,t){(0,n.useEffect)((()=>{const i="current"in e?e.current:e,n=new ResizeObserver((e=>{for(const i of e){const{clientWidth:e,clientHeight:n}=i.target;t()}}));return i&&n.observe(i),()=>{n.disconnect()}}),[e,t])}(e,(()=>{const t="current"in e?e.current:e;if(t){const e=document.createRange();e.setStart(t,0),e.setEnd(t,t.childNodes.length);const n=Y(t),r=e.getBoundingClientRect();i(r.width+n.left+n.right>t.offsetWidth||t.scrollWidth>t.offsetWidth),o(r.height+n.top+n.bottom>t.offsetHeight||t.scrollHeight>t.offsetHeight)}})),{isOverflowX:t,isOverflowY:r}}(i);return(0,N.jsx)("div",{ref:i,className:"ellipsis",...t,title:r?e:void 0,children:e})}function G(){const{token:{colorPrimary:e}}=r.Z.useToken(),[t,i]=(0,n.useState)("all"),{data:O,pagination:P,loading:I}=(0,k.Z)((({current:e,pageSize:i})=>$.Z.post("/api/file/page",{pageIndex:e,pageSize:i,type:t}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}}))),{refreshDeps:[t],defaultPageSize:20}),E=[{title:"文件",key:"file",render:(e,t)=>(0,N.jsx)(R,{type:W.fileType.map[t.type].alias,src:t.url,height:36}),width:100},{title:"文件地址",dataIndex:"url",ellipsis:!0},{title:"文件大小",dataIndex:"size",width:150},{title:"创建时间",dataIndex:"createDate",width:150},{title:"操作",key:"action",fixed:"right",width:120,render:(e,t)=>(0,N.jsxs)(o.Z,{size:"middle",children:[(0,N.jsx)(l.Z,{title:"下载",mouseEnterDelay:1,children:(0,N.jsx)(s.ZP,{type:"primary",icon:(0,N.jsx)(j.Z,{})})}),(0,N.jsx)(l.Z,{title:"删除",mouseEnterDelay:1,children:(0,N.jsx)(s.ZP,{danger:!0,icon:(0,N.jsx)(b.Z,{})})})]})}],M={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,current:P.current,pageSize:P.pageSize,total:P.total,onChange:P.onChange},[T,{toggle:B}]=(0,z.Z)("list","table"),_={list:(0,N.jsx)(a.Z,{spinning:I,children:O?.list.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridGap:16},children:O?.list.map((e=>(0,N.jsxs)("div",{style:{height:150,padding:10,textAlign:"center"},children:[(0,N.jsx)(R,{type:W.fileType.map[e.type].alias,src:e.url,height:60}),(0,N.jsx)(F,{text:(0,S.B)(e.url),style:{lineHeight:2,padding:"0 10px"}})]},e.id)))}),(0,N.jsx)(d.Z,{style:{marginTop:16,textAlign:"right"},...M,hideOnSinglePage:!0})]}):(0,N.jsx)(c.Z,{})}),table:(0,N.jsx)(p.Z,{rowKey:"id",dataSource:O?.list,columns:E,pagination:M,loading:I})};return(0,N.jsxs)("div",{style:{display:"flex"},children:[(0,N.jsxs)("div",{style:{flex:"0 0 250px"},children:[(0,N.jsxs)(h.Z,{children:[(0,N.jsx)("div",{children:"文件管理 ✨"}),(0,N.jsx)(u.Z,{dashed:!0,style:{margin:"8px 0"}}),(0,N.jsx)(g.Z,{items:[{key:"file",label:"文件类型",icon:(0,N.jsx)(v.Z,{}),children:[{key:"all",label:"全部",icon:(0,N.jsx)(C,{type:"icon-files"})},{key:"img",label:"图片",icon:(0,N.jsx)(C,{type:"icon-file_img"})},{key:"doc",label:"文档",icon:(0,N.jsx)(C,{type:"icon-file_txt"})},{key:"video",label:"视频",icon:(0,N.jsx)(C,{type:"icon-file_video"})},{key:"audio",label:"音频",icon:(0,N.jsx)(C,{type:"icon-file_music"})},{key:"other",label:"其他",icon:(0,N.jsx)(C,{type:"icon-File"})}]}],selectedKeys:["file",t],defaultOpenKeys:["file"],mode:"inline",style:{border:"none"},onClick:({key:e})=>i(e)})]}),(0,N.jsxs)(h.Z,{style:{marginTop:16},children:[(0,N.jsxs)(x.Z,{align:"middle",style:{textAlign:"center"},children:[(0,N.jsx)(f.Z,{span:10,children:(0,N.jsx)(y.Z,{title:"储存容量",value:5,suffix:"MB",valueStyle:{color:e}})}),(0,N.jsx)(f.Z,{span:4,children:(0,N.jsx)(u.Z,{type:"vertical"})}),(0,N.jsx)(f.Z,{span:10,children:(0,N.jsx)(y.Z,{title:"数量",value:100,valueStyle:{color:e}})})]}),(0,N.jsx)(u.Z,{style:{margin:"8px 0"}}),(0,N.jsx)(D,{})]})]}),(0,N.jsx)("div",{style:{flex:"auto",width:0,padding:"0px 16px"},children:(0,N.jsxs)(h.Z,{children:[(0,N.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,N.jsx)(o.Z,{children:(0,N.jsx)(m.Z.Search,{enterButton:"查询",placeholder:"请输入文件名"})}),(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(s.ZP,{type:"primary",icon:(0,N.jsx)(Z.Z,{}),children:"上传"}),(0,N.jsx)(s.ZP,{children:"批量操作"}),(0,N.jsx)(l.Z,{title:"视图",mouseEnterDelay:1,children:(0,N.jsx)(s.ZP,{icon:"table"===T?(0,N.jsx)(w.Z,{}):(0,N.jsx)(v.Z,{}),onClick:B})})]})]}),(0,N.jsx)(u.Z,{dashed:!0,style:{margin:"16px 0"}}),_[T]]})})]})}},84878:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(89526),r=i(70854),o=i.n(r),l=i(25342),s=i(13806),a=i(11351),d=i(55439),c=i(94237);const p=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:i,colorSplit:n,lineWidth:r,textPaddingInline:o,orientationMargin:l,verticalMarginInline:d}=e;return{[t]:Object.assign(Object.assign({},(0,a.Wf)(e)),{borderBlockStart:`${(0,s.bf)(r)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:d,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${(0,s.bf)(r)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${(0,s.bf)(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${(0,s.bf)(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${(0,s.bf)(r)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${l} * 100%)`},"&::after":{width:`calc(100% - ${l} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${l} * 100%)`},"&::after":{width:`calc(${l} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${(0,s.bf)(r)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:i}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:i}}})}};var h=(0,d.I$)("Divider",(e=>{const t=(0,c.TS)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[p(t)]}),(e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS})),{unitless:{orientationMargin:!0}}),u=e=>{const{getPrefixCls:t,direction:i,divider:r}=n.useContext(l.E_),{prefixCls:s,type:a="horizontal",orientation:d="center",orientationMargin:c,className:p,rootClassName:u,children:g,dashed:x,plain:f,style:y}=e,m=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),j=t("divider",s),[b,v,Z]=h(j),w=d.length>0?`-${d}`:d,k=!!g,z="left"===d&&null!=c,$="right"===d&&null!=c,S=o()(j,null==r?void 0:r.className,v,Z,`${j}-${a}`,{[`${j}-with-text`]:k,[`${j}-with-text${w}`]:k,[`${j}-dashed`]:!!x,[`${j}-plain`]:!!f,[`${j}-rtl`]:"rtl"===i,[`${j}-no-default-orientation-margin-left`]:z,[`${j}-no-default-orientation-margin-right`]:$},p,u),C=n.useMemo((()=>"number"==typeof c?c:/^\d+$/.test(c)?Number(c):c),[c]),O=Object.assign(Object.assign({},z&&{marginLeft:C}),$&&{marginRight:C});return b(n.createElement("div",Object.assign({className:S,style:Object.assign(Object.assign({},null==r?void 0:r.style),y)},m,{role:"separator"}),g&&"vertical"!==a&&n.createElement("span",{className:`${j}-inner-text`,style:O},g)))}}}]);
//# sourceMappingURL=632.643773d7.chunk.js.map