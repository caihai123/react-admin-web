{"version":3,"file":"static/js/674.b5788b10.chunk.js","mappings":"iTAUA,MAAMA,EAAoB,WACxB,MAAOC,GAAQ,QAAEC,EAAO,SAAEC,KAAcC,EAAAA,EAAAA,IAAW,GACnD,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAAyBC,UACtCF,EAAAA,EAAAA,KAAA,OACEC,UAAY,iBAAgBL,GAAU,WACtCO,QAAUC,IACR,MACMC,EADoBD,EAAME,cAAcC,QAAQ,cAElCC,qBAAqB,OAAO,GAAGC,UACnDC,IAAKL,GAAMM,MAAK,KACdd,IACAe,WAAWd,EAAU,KAAK,GAC1B,EACFI,SAEAN,GAcAI,EAAAA,EAAAA,KAAA,OACE,cAAY,OACZa,OAAO,KACPC,QAAQ,YACRC,QAAQ,MACRC,MAAM,KACN,sBAAoB,OACpBf,UAAU,2BAA0BC,UAEpCF,EAAAA,EAAAA,KAAA,QAAMiB,EAAE,0KAtBVC,EAAAA,EAAAA,MAAA,OACE,cAAY,OACZL,OAAO,KACPC,QAAQ,YACRC,QAAQ,MACRC,MAAM,KACN,sBAAoB,OACpBf,UAAU,UAASC,SAAA,EAEnBF,EAAAA,EAAAA,KAAA,QAAMiB,EAAE,qNACRjB,EAAAA,EAAAA,KAAA,QAAMiB,EAAE,wOAkBpB,EAEME,EAAWA,EAAGC,eAClB,MAAMC,GAAYC,EAAAA,EAAAA,IAAYC,EAAAA,IAW9B,OACEvB,EAAAA,EAAAA,KAAA,OACEC,UAAU,gBACV,aAAYoB,EACZG,MAAO,CAAEC,QAAS,IAAKvB,UAEvBF,EAAAA,EAAAA,KAAC0B,EAAAA,EAAa,CACZC,cAAe,CAACC,EAAAA,GAChBC,cAAe,CAACC,EAAAA,GAChBC,UAAU,EACVC,WAAY,CAAEC,IAnBRC,EAAGhC,eAEXgB,EAAAA,EAAAA,MAAAiB,EAAAA,SAAA,CAAAjC,SAAA,EACEF,EAAAA,EAAAA,KAAA,OAAAE,SAAMA,KACNF,EAAAA,EAAAA,KAACL,EAAiB,QAeOO,SAExBkB,KAEC,EAIV,Y,4JChEA,MAAMgB,EAAWC,EAAAA,EACXC,GAAqBC,EAAAA,EAAAA,GAAkBH,GACvCI,QAAoBF,EAUX,SAASR,IACtB,MAAMW,EAAS,YAUf,OAAO,SAAUC,IACfC,EAAAA,EAAAA,IAAMD,EAAM,WAAW,SAAUE,EAAMC,EAAOC,GAC5C,IAAKA,QAAoBC,IAAVF,GAAwC,QAAjBD,EAAKI,QACzC,OAGF,MAAMC,EAAOL,EAAK1C,SAAS,GAE3B,IAAK+C,GAAsB,YAAdA,EAAKC,MAAuC,SAAjBD,EAAKD,QAC3C,OAGF,MAAMG,EAAUF,EAAKG,WAAWnD,UAEhC,IAAKoD,MAAMC,QAAQH,GAAU,OAE7B,MAAMI,EAAWJ,EAAQK,MAAK,SAAUvC,GACtC,MAAoB,iBAANA,GAAkBA,EAAEwC,WAAWhB,EAC/C,IAEA,GAAwB,iBAAbc,EAAuB,OAElC,MAAMG,EAAQlB,EAAYmB,YAAYJ,EAASK,MAAMnB,EAAOoB,SAG5D,IAAKH,EAAO,OAEZ,MAEMxD,EAFWsC,EAAYsB,WAAUC,EAAAA,EAAAA,GAASd,GAAOS,GAESxD,SAEhE4C,EAAO5C,SAAS8D,OAAOnB,EAAO,EAAG,CAC/BK,KAAM,UACNF,QAAS,MACTI,WAAY,CACVnD,UAAW,CACT,YACC,aAAYyD,EAAMO,QAAQ,YAAa,IAAIA,QAAQ,MAAO,SAG/D/D,SAAU,CACR,CAAEgD,KAAM,UAAWF,QAAS,MAAOI,WAAY,CAAC,EAAGlD,cAGzD,GACF,CACF,C","sources":["webpack://react-admin-web/./src/components/Markdown/index.jsx","webpack://react-admin-web/./src/components/Markdown/rehype-starry-night.js"],"sourcesContent":["import React from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport { selectTheme } from \"@/store/system\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useBoolean } from \"ahooks\";\r\nimport copy from \"clipboard-copy\";\r\nimport rehypeStarryNight from \"./rehype-starry-night\";\r\nimport \"./github-markdown.css\"; // GitHub Markdown 样式\r\n\r\nconst CopyCodeContainer = function () {\r\n  const [copied, { setTrue, setFalse }] = useBoolean(false);\r\n  return (\r\n    <div className=\"zeroclipboard-container\">\r\n      <div\r\n        className={`copy-code-btn ${copied && \"copied\"}`}\r\n        onClick={(event) => {\r\n          const codeContainerNode = event.currentTarget.closest(\".highlight\");\r\n          const text =\r\n            codeContainerNode.getElementsByTagName(\"pre\")[0].innerText;\r\n          copy(text).then(() => {\r\n            setTrue();\r\n            setTimeout(setFalse, 1500);\r\n          });\r\n        }}\r\n      >\r\n        {!copied ? (\r\n          <svg\r\n            aria-hidden=\"true\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            version=\"1.1\"\r\n            width=\"16\"\r\n            data-view-component=\"true\"\r\n            className=\"octicon\"\r\n          >\r\n            <path d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z\"></path>\r\n            <path d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z\"></path>\r\n          </svg>\r\n        ) : (\r\n          <svg\r\n            aria-hidden=\"true\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            version=\"1.1\"\r\n            width=\"16\"\r\n            data-view-component=\"true\"\r\n            className=\"octicon color-fg-success\"\r\n          >\r\n            <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path>\r\n          </svg>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Markdown = ({ markdown }) => {\r\n  const themeName = useSelector(selectTheme);\r\n\r\n  const Pre = ({ children }) => {\r\n    return (\r\n      <>\r\n        <pre>{children}</pre>\r\n        <CopyCodeContainer />\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"markdown-body\"\r\n      data-theme={themeName}\r\n      style={{ padding: 24 }}\r\n    >\r\n      <ReactMarkdown\r\n        remarkPlugins={[remarkGfm]}\r\n        rehypePlugins={[rehypeStarryNight]}\r\n        skipHtml={true} // 禁止 react-markdown 将 HTML 标签包裹在 <p> 元素内部\r\n        components={{ pre: Pre }}\r\n      >\r\n        {markdown}\r\n      </ReactMarkdown>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Markdown;\r\n","/**\r\n * 代码来源：https://github.com/wooorm/starry-night?tab=readme-ov-file#example-integrate-with-unified-remark-and-rehype\r\n * 改动：因为此代码不支持react-markdown组件，https://github.com/remarkjs/react-markdown/issues/680\r\n * 所以我做了一点简单的改动，以至于丢失了该插件的grammars配置功能，且必须设置webpack的 experiments: {topLevelAwait: true},\r\n */\r\n\r\n/**\r\n * @typedef {import('@wooorm/starry-night').Grammar} Grammar\r\n * @typedef {import('hast').ElementContent} ElementContent\r\n * @typedef {import('hast').Root} Root\r\n */\r\n\r\n/**\r\n * @typedef Options\r\n *   Configuration (optional)\r\n * @property {Array<Grammar> | null | undefined} [grammars]\r\n *   Grammars to support (default: `common`).\r\n */\r\n\r\nimport { common, createStarryNight } from \"@wooorm/starry-night\";\r\nimport { toString } from \"hast-util-to-string\";\r\nimport { visit } from \"unist-util-visit\";\r\n\r\nconst grammars = common;\r\nconst starryNightPromise = createStarryNight(grammars);\r\nconst starryNight = await starryNightPromise;\r\n\r\n/**\r\n * Highlight code with `starry-night`.\r\n *\r\n * @param {Options | null | undefined} [options]\r\n *   Configuration (optional).\r\n * @returns\r\n *   Transform.\r\n */\r\nexport default function rehypeStarryNight() {\r\n  const prefix = \"language-\";\r\n\r\n  /**\r\n   * Transform.\r\n   *\r\n   * @param {Root} tree\r\n   *   Tree.\r\n   * @returns {Promise<undefined>}\r\n   *   Nothing.\r\n   */\r\n  return function (tree) {\r\n    visit(tree, \"element\", function (node, index, parent) {\r\n      if (!parent || index === undefined || node.tagName !== \"pre\") {\r\n        return;\r\n      }\r\n\r\n      const head = node.children[0];\r\n\r\n      if (!head || head.type !== \"element\" || head.tagName !== \"code\") {\r\n        return;\r\n      }\r\n\r\n      const classes = head.properties.className;\r\n\r\n      if (!Array.isArray(classes)) return;\r\n\r\n      const language = classes.find(function (d) {\r\n        return typeof d === \"string\" && d.startsWith(prefix);\r\n      });\r\n\r\n      if (typeof language !== \"string\") return;\r\n\r\n      const scope = starryNight.flagToScope(language.slice(prefix.length));\r\n\r\n      // Maybe warn?\r\n      if (!scope) return;\r\n\r\n      const fragment = starryNight.highlight(toString(head), scope);\r\n      // eslint-disable-next-line prefer-destructuring\r\n      const children = /** @type {Array<ElementContent>} */ (fragment.children);\r\n\r\n      parent.children.splice(index, 1, {\r\n        type: \"element\",\r\n        tagName: \"div\",\r\n        properties: {\r\n          className: [\r\n            \"highlight\",\r\n            `highlight-${scope.replace(/^source\\./, \"\").replace(/\\./g, \"-\")}`,\r\n          ],\r\n        },\r\n        children: [\r\n          { type: \"element\", tagName: \"pre\", properties: {}, children },\r\n        ],\r\n      });\r\n    });\r\n  };\r\n}\r\n"],"names":["CopyCodeContainer","copied","setTrue","setFalse","useBoolean","_jsx","className","children","onClick","event","text","currentTarget","closest","getElementsByTagName","innerText","copy","then","setTimeout","height","viewBox","version","width","d","_jsxs","Markdown","markdown","themeName","useSelector","selectTheme","style","padding","ReactMarkdown","remarkPlugins","remarkGfm","rehypePlugins","rehypeStarryNight","skipHtml","components","pre","Pre","_Fragment","grammars","common","starryNightPromise","createStarryNight","starryNight","prefix","tree","visit","node","index","parent","undefined","tagName","head","type","classes","properties","Array","isArray","language","find","startsWith","scope","flagToScope","slice","length","highlight","toString","splice","replace"],"sourceRoot":""}