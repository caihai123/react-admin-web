"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[392],{7627:function(e,t,i){var n=i(89526),s=i(24059),l=i(96799),o=i(79255),r=i(25540),a=i(17431),c=i(31315),d=i.n(c),x=i(24470),u=i(73961),p=i(49839),h=i(20485),y=i(22701),j=i(22171),g=i(54437),f=i(67557);const m=g.ZP.div`
  width: 320px;
  border-radius: 8px;
  padding: 10px 14px 14px 14px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
  & > .drag-handler {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-size: 16px;
    color: #fff;
    cursor: move;
    user-select: none;
  }
`,Z=e=>{const{token:{colorPrimary:t,colorError:i}}=s.Z.useToken(),[c,{set:x}]=(0,h.Z)(!1),p=(0,n.useRef)(null);return(0,u.createPortal)((0,f.jsx)(d(),{bounds:"body",handle:".drag-handler",children:(0,f.jsx)("div",{className:"video-modal",style:{position:"fixed",top:60,right:0,zIndex:999},children:(0,f.jsx)(j.Z,{in:e.visible,nodeRef:p,timeout:300,unmountOnExit:!0,classNames:"zoom-in-top",appear:!0,children:(0,f.jsxs)(m,{ref:p,style:{background:t},children:[(0,f.jsxs)("div",{className:"drag-handler",children:[(0,f.jsxs)("div",{className:"audio-name ellipsis",style:{color:c?i:""},children:[c?(0,f.jsx)(o.Z,{style:{marginRight:8}}):(0,f.jsx)(r.Z,{style:{marginRight:8}}),e.name?e.name:(0,y.Bb)(e.src)]}),(0,f.jsx)(l.ZP,{type:"text",icon:(0,f.jsx)(a.Z,{}),onClick:()=>e.onClose?.(),style:{color:"#fff"},size:"small"})]}),(0,f.jsx)("audio",{src:e.src,controls:!0,autoPlay:!0,style:{width:"100%"},onError:()=>x(!0),onPlay:()=>x(!1)})]})})})}),document.body)};let v;t.Z=(0,p.Z)(Z,{showModal:function(e,t){if(!v){const e=document.createDocumentFragment();document.body.appendChild(e),v=x.createRoot(e)}v.render((0,f.jsx)(Z,{src:e,name:t,visible:!0,onClose:()=>(v?.render((0,f.jsx)(Z,{src:e,name:t,visible:!1})),void setTimeout((()=>{v?.unmount(),v=null}),350))}))}})},6459:function(e,t,i){var n=i(89526),s=i(24059),l=i(57744),o=i(15823),r=i(24470),a=i(49839),c=i(67557);const d=function(e){const{width:t=800,height:i,autoPlay:r=!0}=e,[a,d]=(0,n.useState)(!1),{token:{colorBgLayout:x}}=s.Z.useToken();return(0,c.jsx)(l.Z,{style:{display:"none"},preview:{visible:e.visible,destroyOnClose:!0,imageRender:()=>a?(0,c.jsx)(o.ZP,{status:"error",title:"视频不能正常播放！",subTitle:"The video doesn't play properly!",style:{width:t,background:x}}):(0,c.jsx)("video",{width:t,height:i,autoPlay:r,controls:!0,src:e.src,onError:()=>d(!0),onPlay:()=>d(!1)}),toolbarRender:()=>null,onVisibleChange:()=>{e.onClose?.()}}})};let x,u=1;t.Z=(0,a.Z)(d,{showModal:function(e){if(u++,!x){const e=document.createDocumentFragment();document.body.appendChild(e),x=r.createRoot(e)}x.render((0,c.jsx)(d,{src:e,visible:!0,onClose:()=>{x?.render((0,c.jsx)(d,{src:e,visible:!1},u))}},u))}})},49839:function(e,t,i){function n(e,t){const i=e;return Object.keys(t).forEach((e=>{Object.defineProperty(i,e,{value:t[e],writable:!1,enumerable:!0})})),i}i.d(t,{Z:function(){return n}})},17392:function(e,t,i){i.r(t),i.d(t,{default:function(){return G}});var n=i(89526),s=i(24059),l=i(74918),o=i(64785),r=i(96799),a=i(75452),c=i(18740),d=i(4677),x=i(42434),u=i(68175),p=i(84878),h=i(99456),y=i(10011),j=i(53139),g=i(88241),f=i(57503),m=i(90569),Z=i(45303),v=i(47575),b=i(64871),k=i(48126),w=i(37756),C=i(22390),z=i(95694),P=i(22701),S=(0,i(60436).Z)({scriptUrl:"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js"}),T=i(57744),_=i(7627),R=i(6459),O=i(20485),E=i(13309),I=i(70925),M=i(67557);function D(e){const{token:{colorBgMask:t,colorWhite:i}}=s.Z.useToken(),{zIndex:n=9,trigger:l="hover",content:o=(0,M.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:i},children:[(0,M.jsx)(I.Z,{style:{marginRight:4}}),"预览"]})}=e,[r,{set:a}]=(0,O.Z)(!1);(0,E.Z)((()=>{"always"===l&&a(!0)}));const c={zIndex:n,position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",cursor:e.onClick?"pointer":"auto",background:t,opacity:r?1:0,transition:"opacity 0.3s"};return(0,M.jsxs)("div",{style:{position:"relative",...e.style},onMouseOver:()=>{"hover"===l&&a(!0)},onMouseOut:()=>{"hover"===l&&a(!1)},onClick:e.onClick,children:[e.children,(0,M.jsx)("div",{style:c,children:o})]})}function F(e){const{src:t,type:i,height:n}=e;switch(i){case"img":return(0,M.jsx)(T.Z,{src:t,height:n,preview:!0});case"doc":return(0,M.jsx)(S,{type:"icon-file_txt",style:{fontSize:n}});case"video":return(0,M.jsx)(D,{onClick:()=>R.Z.showModal(t),style:{display:"inline-block"},children:(0,M.jsx)(S,{type:"icon-file_video",style:{fontSize:n}})});case"audio":return(0,M.jsx)(D,{onClick:()=>_.Z.showModal(t),style:{display:"inline-block"},children:(0,M.jsx)(S,{type:"icon-file_music",style:{fontSize:n}})});default:return(0,M.jsx)(S,{type:"icon-File",style:{fontSize:n}})}}var B=i(68347),N=i(91317);const A={height:250,appendPadding:10,data:[{type:"图片",value:4544},{type:"文档",value:3321},{type:"视频",value:3113},{type:"音频",value:3113},{type:"其他",value:2341}],angleField:"value",colorField:"type",innerRadius:.6,label:!1,legend:!1,statistic:!1};function K(){return(0,M.jsx)(N.Z,{...A})}var $=i(82709);function q({text:e,...t}){const i=(0,n.useRef)(null),{isOverflowX:s}=(0,$.Z)(i);return(0,M.jsx)("div",{ref:i,className:"ellipsis",...t,title:s?e:void 0,children:e})}function G(){const{token:{colorPrimary:e}}=s.Z.useToken(),[t,i]=(0,n.useState)("all"),{data:T,pagination:_,loading:R}=(0,w.Z)((({current:e,pageSize:i})=>z.Z.post("/api/file/page",{pageIndex:e,pageSize:i,type:t}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}}))),{refreshDeps:[t],defaultPageSize:20}),O=[{title:"文件",key:"file",render:(e,t)=>(0,M.jsx)(F,{type:B.fileType.map[t.type].alias,src:t.url,height:36}),width:100},{title:"文件地址",dataIndex:"url",ellipsis:!0},{title:"文件大小",dataIndex:"size",width:150},{title:"创建时间",dataIndex:"createDate",width:150},{title:"操作",key:"action",fixed:"right",width:120,render:(e,t)=>(0,M.jsxs)(l.Z,{size:"middle",children:[(0,M.jsx)(o.Z,{title:"下载",mouseEnterDelay:1,children:(0,M.jsx)(r.ZP,{type:"primary",icon:(0,M.jsx)(m.Z,{})})}),(0,M.jsx)(o.Z,{title:"删除",mouseEnterDelay:1,children:(0,M.jsx)(r.ZP,{danger:!0,icon:(0,M.jsx)(Z.Z,{})})})]})}],E={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,current:_.current,pageSize:_.pageSize,total:_.total,onChange:_.onChange},[I,{toggle:D}]=(0,C.Z)("list","table"),N={list:(0,M.jsx)(a.Z,{spinning:R,children:T?.list.length?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridGap:16},children:T?.list.map((e=>(0,M.jsxs)("div",{style:{height:150,padding:10,textAlign:"center"},children:[(0,M.jsx)(F,{type:B.fileType.map[e.type].alias,src:e.url,height:60}),(0,M.jsx)(q,{text:(0,P.Bb)(e.url),style:{lineHeight:2,padding:"0 10px"}})]},e.id)))}),(0,M.jsx)(c.Z,{style:{marginTop:16,textAlign:"right"},...E,hideOnSinglePage:!0})]}):(0,M.jsx)(d.Z,{})}),table:(0,M.jsx)(x.Z,{rowKey:"id",dataSource:T?.list,columns:O,pagination:E,loading:R})};return(0,M.jsxs)("div",{style:{display:"flex"},children:[(0,M.jsxs)("div",{style:{flex:"0 0 250px"},children:[(0,M.jsxs)(u.Z,{children:[(0,M.jsx)("div",{children:"文件管理 ✨"}),(0,M.jsx)(p.Z,{dashed:!0,style:{margin:"8px 0"}}),(0,M.jsx)(h.Z,{items:[{key:"file",label:"文件类型",icon:(0,M.jsx)(v.Z,{}),children:[{key:"all",label:"全部",icon:(0,M.jsx)(S,{type:"icon-files"})},{key:"img",label:"图片",icon:(0,M.jsx)(S,{type:"icon-file_img"})},{key:"doc",label:"文档",icon:(0,M.jsx)(S,{type:"icon-file_txt"})},{key:"video",label:"视频",icon:(0,M.jsx)(S,{type:"icon-file_video"})},{key:"audio",label:"音频",icon:(0,M.jsx)(S,{type:"icon-file_music"})},{key:"other",label:"其他",icon:(0,M.jsx)(S,{type:"icon-File"})}]}],selectedKeys:["file",t],defaultOpenKeys:["file"],mode:"inline",style:{border:"none"},onClick:({key:e})=>i(e)})]}),(0,M.jsxs)(u.Z,{style:{marginTop:16},children:[(0,M.jsxs)(y.Z,{align:"middle",style:{textAlign:"center"},children:[(0,M.jsx)(j.Z,{span:10,children:(0,M.jsx)(g.Z,{title:"储存容量",value:5,suffix:"MB",valueStyle:{color:e}})}),(0,M.jsx)(j.Z,{span:4,children:(0,M.jsx)(p.Z,{type:"vertical"})}),(0,M.jsx)(j.Z,{span:10,children:(0,M.jsx)(g.Z,{title:"数量",value:100,valueStyle:{color:e}})})]}),(0,M.jsx)(p.Z,{style:{margin:"8px 0"}}),(0,M.jsx)(K,{})]})]}),(0,M.jsx)("div",{style:{flex:"auto",width:0,padding:"0px 16px"},children:(0,M.jsxs)(u.Z,{children:[(0,M.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,M.jsx)(l.Z,{children:(0,M.jsx)(f.Z.Search,{enterButton:"查询",placeholder:"请输入文件名"})}),(0,M.jsxs)(l.Z,{children:[(0,M.jsx)(r.ZP,{type:"primary",icon:(0,M.jsx)(b.Z,{}),children:"上传"}),(0,M.jsx)(r.ZP,{children:"批量操作"}),(0,M.jsx)(o.Z,{title:"视图",mouseEnterDelay:1,children:(0,M.jsx)(r.ZP,{icon:"table"===I?(0,M.jsx)(k.Z,{}):(0,M.jsx)(v.Z,{}),onClick:D})})]})]}),(0,M.jsx)(p.Z,{dashed:!0,style:{margin:"16px 0"}}),N[I]]})})]})}}}]);
//# sourceMappingURL=392.83e34bfe.chunk.js.map