{"version":3,"file":"static/js/530.bd31eaae.chunk.js","mappings":"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","sources":["webpack://react-admin-web/./src/utils/utils.js","webpack://react-admin-web/./src/components/CustomIcon.jsx","webpack://react-admin-web/./src/pages/system/file/components/FileView.jsx","webpack://react-admin-web/./src/pages/system/file/components/PieView.jsx","webpack://react-admin-web/./src/hooks/useContentOverflow.ts","webpack://react-admin-web/./src/pages/system/file/components/NameEllipsis.jsx","webpack://react-admin-web/./src/hooks/useDomSize.ts","webpack://react-admin-web/./src/pages/system/file/index.jsx"],"sourcesContent":["/**\r\n * 通过文件地址获取文件名\r\n * @param {string} filePath 文件地址\r\n * @returns 文件名\r\n */\r\nexport const getFilenameFromPath = function (filePath) {\r\n  // 使用路径分隔符（/）来分割路径，并获取最后一个元素（文件名）\r\n  const parts = filePath.split(\"/\");\r\n  const filenameWithParams = parts[parts.length - 1];\r\n\r\n  // 查找文件名中的最后一个点\r\n  const lastDotIndex = filenameWithParams.lastIndexOf(\".\");\r\n\r\n  // 如果没有点或点在文件名的第一个字符位置，则返回原文件名\r\n  if (lastDotIndex <= 0) {\r\n    return filenameWithParams;\r\n  }\r\n\r\n  // 返回点之前的部分作为文件名\r\n  const filename = filenameWithParams.substring(0, lastDotIndex);\r\n\r\n  // 返回文件名加上后缀部分\r\n  const extension = filenameWithParams.substring(lastDotIndex);\r\n  return filename + extension;\r\n};\r\n\r\nexport const a = 1;\r\n","import { createFromIconfontCN } from \"@ant-design/icons\";\r\n\r\n/**\r\n * 自定义图标\r\n */\r\nconst CustomIcon = createFromIconfontCN({\r\n  scriptUrl: \"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js\", // 在 iconfont.cn 上生成\r\n});\r\n\r\nexport default CustomIcon;\r\n","import { Image } from \"antd\";\r\nimport MyIcon from \"@/components/CustomIcon\";\r\n\r\nexport default function FileView(props) {\r\n  const { src, type, height } = props;\r\n\r\n  switch (type) {\r\n    case \"img\":\r\n      // 图片\r\n      return <Image src={src} height={height} preview={false} />;\r\n    case \"doc\":\r\n      // 文档\r\n      return <MyIcon type=\"icon-file_txt\" style={{ fontSize: height }} />;\r\n    case \"video\":\r\n      // 视频\r\n      return <MyIcon type=\"icon-file_video\" style={{ fontSize: height }} />;\r\n    case \"music\":\r\n      // 音频\r\n      return <MyIcon type=\"icon-file_music\" style={{ fontSize: height }} />;\r\n    default:\r\n      return <MyIcon type=\"icon-File\" style={{ fontSize: height }} />;\r\n  }\r\n}\r\n","import { Pie } from \"@ant-design/plots\";\r\n\r\nconst pieConfig = {\r\n  height: 250,\r\n  appendPadding: 10,\r\n  data: [\r\n    {\r\n      type: \"图片\",\r\n      value: 4544,\r\n    },\r\n    {\r\n      type: \"文档\",\r\n      value: 3321,\r\n    },\r\n    {\r\n      type: \"视频\",\r\n      value: 3113,\r\n    },\r\n    {\r\n      type: \"音频\",\r\n      value: 3113,\r\n    },\r\n    {\r\n      type: \"其他\",\r\n      value: 2341,\r\n    },\r\n  ],\r\n  angleField: \"value\",\r\n  colorField: \"type\",\r\n  innerRadius: 0.6,\r\n  label: false,\r\n  legend: false,\r\n  statistic: false,\r\n};\r\nexport default function PieView() {\r\n  return <Pie {...pieConfig} />;\r\n}\r\n","import { type RefObject } from \"react\";\r\nimport { useBoolean } from \"ahooks\";\r\nimport useDomSize from \"./useDomSize\";\r\n\r\n/** 获取dom padding */\r\nconst getPadding = (el: Element) => {\r\n  const style = window.getComputedStyle(el, null);\r\n  const paddingLeft = Number.parseInt(style.paddingLeft, 10) || 0;\r\n  const paddingRight = Number.parseInt(style.paddingRight, 10) || 0;\r\n  const paddingTop = Number.parseInt(style.paddingTop, 10) || 0;\r\n  const paddingBottom = Number.parseInt(style.paddingBottom, 10) || 0;\r\n  return {\r\n    left: paddingLeft,\r\n    right: paddingRight,\r\n    top: paddingTop,\r\n    bottom: paddingBottom,\r\n  };\r\n};\r\n\r\nexport type Target = HTMLElement | RefObject<HTMLElement>;\r\n\r\n/**\r\n * 判断容器内容是否溢出\r\n * @param target DOM 节点或者 ref\r\n */\r\nexport default function useContentOverflow(target: Target) {\r\n  const [isOverflowX, { set: setIsOverflowX }] = useBoolean(false);\r\n  const [isOverflowY, { set: setIsOverflowY }] = useBoolean(false);\r\n\r\n  useDomSize(target, () => {\r\n    const element = \"current\" in target ? target.current : target;\r\n\r\n    if (element) {\r\n      const range = document.createRange();\r\n      range.setStart(element, 0);\r\n      range.setEnd(element, element.childNodes.length);\r\n\r\n      const padding = getPadding(element);\r\n\r\n      const rangeSize = range.getBoundingClientRect();\r\n\r\n      setIsOverflowX(\r\n        rangeSize.width + padding.left + padding.right > element.offsetWidth ||\r\n          element.scrollWidth > element.offsetWidth\r\n      );\r\n      setIsOverflowY(\r\n        rangeSize.height + padding.top + padding.bottom >\r\n          element.offsetHeight || element.scrollHeight > element.offsetHeight\r\n      );\r\n    }\r\n  });\r\n\r\n  return { isOverflowX, isOverflowY };\r\n}\r\n","import { useRef } from \"react\";\r\nimport useContentOverflow from \"@/hooks/useContentOverflow\";\r\n\r\nexport default function ContentOverflowDetector({ text, ...rest }) {\r\n  const containerRef = useRef(null);\r\n\r\n  const { isOverflowX } = useContentOverflow(containerRef);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"ellipsis\"\r\n      {...rest}\r\n      title={isOverflowX ? text : undefined}\r\n    >\r\n      {text}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, type RefObject } from \"react\";\r\n\r\nexport type Target = HTMLElement | RefObject<HTMLElement>;\r\n\r\nexport type Callback = (size: { width: number; height: number }) => void;\r\n\r\n/**\r\n * DOM 节点尺寸变化时执行回调\r\n * @param target DOM 节点或者 ref\r\n * @param callback 执行的回调函数\r\n */\r\nexport default function useDomSize(target: Target, callback: Callback) {\r\n  useEffect(() => {\r\n    const element = \"current\" in target ? target.current : target;\r\n\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      for (const entry of entries) {\r\n        const { clientWidth, clientHeight } = entry.target;\r\n        callback({ width: clientWidth, height: clientHeight });\r\n      }\r\n    });\r\n\r\n    element && resizeObserver.observe(element);\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [target, callback]);\r\n}\r\n","import { useState } from \"react\";\r\nimport {\r\n  Card,\r\n  Divider,\r\n  Menu,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Input,\r\n  Space,\r\n  Table,\r\n  Pagination,\r\n  Statistic,\r\n  Tooltip,\r\n  Spin,\r\n  Empty,\r\n  theme,\r\n} from \"antd\";\r\nimport {\r\n  AppstoreOutlined,\r\n  UploadOutlined,\r\n  UnorderedListOutlined,\r\n  VerticalAlignBottomOutlined,\r\n  DeleteOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { usePagination, useToggle } from \"ahooks\";\r\nimport axios from \"@/utils/axios\";\r\nimport { getFilenameFromPath } from \"@/utils/utils\";\r\nimport MyIcon from \"@/components/CustomIcon\";\r\nimport FileView from \"./components/FileView\";\r\nimport { fileType } from \"@/utils/dict\";\r\nimport PieView from \"./components/PieView\";\r\nimport NameEllipsis from \"./components/NameEllipsis\";\r\n\r\nexport default function File() {\r\n  const {\r\n    token: { colorPrimary },\r\n  } = theme.useToken();\r\n  const [activeType, setActiveType] = useState(\"all\");\r\n\r\n  // 获取列表\r\n  const getListData = ({ current, pageSize }) => {\r\n    return axios\r\n      .post(\"/api/file/page\", {\r\n        pageIndex: current,\r\n        pageSize,\r\n        type: activeType,\r\n      })\r\n      .then((value) => {\r\n        const { result: data } = value;\r\n        return {\r\n          list: data.records,\r\n          total: data.total,\r\n        };\r\n      });\r\n  };\r\n\r\n  const { data, pagination, loading } = usePagination(getListData, {\r\n    refreshDeps: [activeType],\r\n    defaultPageSize: 20,\r\n  });\r\n\r\n  // 表格配置\r\n  const tableColumns = [\r\n    {\r\n      title: \"文件\",\r\n      key: \"file\",\r\n      render: (_, record) => {\r\n        return (\r\n          <FileView\r\n            type={fileType.map[record.type].alias}\r\n            src={record.url}\r\n            height={36}\r\n          />\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"文件地址\",\r\n      dataIndex: \"url\",\r\n    },\r\n    {\r\n      title: \"文件大小\",\r\n      dataIndex: \"size\",\r\n    },\r\n    {\r\n      title: \"创建时间\",\r\n      dataIndex: \"createDate\",\r\n    },\r\n    {\r\n      title: \"操作\",\r\n      key: \"action\",\r\n      fixed: \"right\",\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Tooltip title=\"下载\" mouseEnterDelay={1}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<VerticalAlignBottomOutlined />}\r\n            ></Button>\r\n          </Tooltip>\r\n          <Tooltip title=\"删除\" mouseEnterDelay={1}>\r\n            <Button danger icon={<DeleteOutlined />}></Button>\r\n          </Tooltip>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 分页配置\r\n  const paginationConfig = {\r\n    showSizeChanger: true,\r\n    showQuickJumper: true,\r\n    showTotal: (total, range) => `第 ${range.join(\"-\")} 条/共 ${total} 条`,\r\n    current: pagination.current,\r\n    pageSize: pagination.pageSize,\r\n    total: pagination.total,\r\n    onChange: pagination.onChange,\r\n  };\r\n\r\n  // 视图切换\r\n  const [viewType, { toggle }] = useToggle(\"list\", \"table\");\r\n  const listElement = {\r\n    list: (\r\n      <Spin spinning={loading}>\r\n        {data?.list.length ? (\r\n          <>\r\n            <div\r\n              style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: \"repeat(auto-fill, minmax(200px, 1fr))\",\r\n                gridGap: 16,\r\n              }}\r\n            >\r\n              {data?.list.map((item) => (\r\n                <div\r\n                  key={item.id}\r\n                  style={{\r\n                    height: 150,\r\n                    padding: 10,\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  <FileView\r\n                    type={fileType.map[item.type].alias}\r\n                    src={item.url}\r\n                    height={60}\r\n                  />\r\n                  <NameEllipsis\r\n                    text={getFilenameFromPath(item.url)}\r\n                    style={{ lineHeight: 2, padding: \"0 10px\" }}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <Pagination\r\n              style={{ marginTop: 16, textAlign: \"right\" }}\r\n              {...paginationConfig}\r\n              hideOnSinglePage={true}\r\n            />\r\n          </>\r\n        ) : (\r\n          <Empty />\r\n        )}\r\n      </Spin>\r\n    ),\r\n    table: (\r\n      <Table\r\n        rowKey=\"id\"\r\n        dataSource={data?.list}\r\n        columns={tableColumns}\r\n        pagination={paginationConfig}\r\n        loading={loading}\r\n      ></Table>\r\n    ),\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <div style={{ flex: \"0 0 250px\" }}>\r\n        <Card>\r\n          <div>文件管理 ✨</div>\r\n          <Divider dashed style={{ margin: \"8px 0\" }} />\r\n          <Menu\r\n            items={[\r\n              {\r\n                key: \"file\",\r\n                label: \"文件类型\",\r\n                icon: <AppstoreOutlined />,\r\n                children: [\r\n                  {\r\n                    key: \"all\",\r\n                    label: \"全部\",\r\n                    icon: <MyIcon type=\"icon-files\" />,\r\n                  },\r\n                  {\r\n                    key: \"img\",\r\n                    label: \"图片\",\r\n                    icon: <MyIcon type=\"icon-file_img\" />,\r\n                  },\r\n                  {\r\n                    key: \"doc\",\r\n                    label: \"文档\",\r\n                    icon: <MyIcon type=\"icon-file_txt\" />,\r\n                  },\r\n                  {\r\n                    key: \"video\",\r\n                    label: \"视频\",\r\n                    icon: <MyIcon type=\"icon-file_video\" />,\r\n                  },\r\n                  {\r\n                    key: \"music\",\r\n                    label: \"音频\",\r\n                    icon: <MyIcon type=\"icon-file_music\" />,\r\n                  },\r\n                  {\r\n                    key: \"other\",\r\n                    label: \"其他\",\r\n                    icon: <MyIcon type=\"icon-File\" />,\r\n                  },\r\n                ],\r\n              },\r\n            ]}\r\n            selectedKeys={[\"file\", activeType]}\r\n            defaultOpenKeys={[\"file\"]}\r\n            mode=\"inline\"\r\n            style={{ border: \"none\" }}\r\n            onClick={({ key }) => setActiveType(key)}\r\n          ></Menu>\r\n        </Card>\r\n\r\n        <Card style={{ marginTop: 16 }}>\r\n          <Row align=\"middle\" style={{ textAlign: \"center\" }}>\r\n            <Col span={10}>\r\n              <Statistic\r\n                title=\"储存容量\"\r\n                value={5}\r\n                suffix=\"MB\"\r\n                valueStyle={{\r\n                  color: colorPrimary,\r\n                }}\r\n              />\r\n            </Col>\r\n            <Col span={4}>\r\n              <Divider type=\"vertical\" />\r\n            </Col>\r\n            <Col span={10}>\r\n              <Statistic\r\n                title=\"数量\"\r\n                value={100}\r\n                valueStyle={{\r\n                  color: colorPrimary,\r\n                }}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Divider style={{ margin: \"8px 0\" }} />\r\n          <PieView />\r\n        </Card>\r\n      </div>\r\n      <div style={{ flex: \"auto\", padding: \"0px 16px\" }}>\r\n        <Card>\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Space>\r\n              <Input.Search\r\n                enterButton=\"查询\"\r\n                placeholder=\"请输入文件名\"\r\n              ></Input.Search>\r\n            </Space>\r\n            <Space>\r\n              <Button type=\"primary\" icon={<UploadOutlined />}>\r\n                上传\r\n              </Button>\r\n              <Button>批量操作</Button>\r\n              <Tooltip title=\"视图\" mouseEnterDelay={1}>\r\n                <Button\r\n                  icon={\r\n                    viewType.view === \"table\" ? (\r\n                      <UnorderedListOutlined />\r\n                    ) : (\r\n                      <AppstoreOutlined />\r\n                    )\r\n                  }\r\n                  onClick={toggle}\r\n                ></Button>\r\n              </Tooltip>\r\n            </Space>\r\n          </div>\r\n          <Divider dashed style={{ margin: \"16px 0\" }} />\r\n          {listElement[viewType]}\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["getFilenameFromPath","filePath","parts","split","filenameWithParams","length","lastDotIndex","lastIndexOf","substring","createFromIconfontCN","scriptUrl","FileView","props","src","type","height","_jsx","Image","preview","MyIcon","style","fontSize","pieConfig","appendPadding","data","value","angleField","colorField","innerRadius","label","legend","statistic","PieView","Pie","getPadding","el","window","getComputedStyle","left","Number","parseInt","paddingLeft","right","paddingRight","top","paddingTop","bottom","paddingBottom","ContentOverflowDetector","text","rest","containerRef","useRef","isOverflowX","target","set","setIsOverflowX","useBoolean","isOverflowY","setIsOverflowY","callback","useEffect","element","current","resizeObserver","ResizeObserver","entries","entry","clientWidth","clientHeight","observe","disconnect","useDomSize","range","document","createRange","setStart","setEnd","childNodes","padding","rangeSize","getBoundingClientRect","width","offsetWidth","scrollWidth","offsetHeight","scrollHeight","useContentOverflow","ref","className","title","undefined","children","File","token","colorPrimary","theme","activeType","setActiveType","useState","pagination","loading","usePagination","getListData","pageSize","axios","pageIndex","then","result","list","records","total","refreshDeps","defaultPageSize","tableColumns","key","render","_","record","fileType","alias","url","dataIndex","fixed","_jsxs","Space","size","Tooltip","mouseEnterDelay","Button","icon","VerticalAlignBottomOutlined","danger","DeleteOutlined","paginationConfig","showSizeChanger","showQuickJumper","showTotal","join","onChange","viewType","toggle","useToggle","listElement","Spin","spinning","_Fragment","display","gridTemplateColumns","gridGap","map","item","textAlign","NameEllipsis","lineHeight","id","Pagination","marginTop","hideOnSinglePage","Empty","table","Table","rowKey","dataSource","columns","flex","Card","Divider","dashed","margin","Menu","items","AppstoreOutlined","selectedKeys","defaultOpenKeys","mode","border","onClick","Row","align","Col","span","Statistic","suffix","valueStyle","color","justifyContent","Input","enterButton","placeholder","UploadOutlined","view","UnorderedListOutlined"],"sourceRoot":""}