"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[733],{36573:function(e,t,n){var r=n(54374),i=n(53725),l=n(53736),a=n(67557);t.Z=function(e){const{dictName:t,placeholder:n="请选择",...o}=e,{options:d}=l.ZP[t];return(0,a.jsx)(r.default,{...o,placeholder:n,children:d.map((e=>(0,a.jsx)(r.default.Option,{value:e.value,children:e.color?(0,a.jsx)(i.Z,{color:e.color,text:e.label}):e.label},e.value)))})}},84733:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(83277),i=n(56397),l=n(72816),a=n(5416),o=n(68175),d=n(84878),s=n(10011),c=n(53139),h=n(91117),m=n(31363),u=n(74918),x=n(96799),p=n(83716),g=n(79255),f=n(17431),b=n(88238),j=n(13309),Z=n(36573),$=n(53736);const y={pattern:/^\/[\w-/]*$/,message:"必须以斜杠开头，后跟字母、数字、下划线、中划线或斜杠"},v={pattern:/^[a-z][a-z0-9-]*$/,message:"只能是小写字母、中划线和数字组成，且必须以字母开头"};var w=n(67557);function I(){const{modal:e}=l.Z.useApp(),t=(0,r.s0)(),{data:n}=(0,b.Z)((()=>p.Z.get("/api/get-menu-all").then((e=>{const{result:t}=e;return t})))),[I]=a.Z.useForm(),[k]=(0,i.lr)(),z=()=>I.setFieldValue("parentId",k.get("parentId"));(0,j.Z)(z);const S=a.Z.useWatch("type",I),O=(0,b.Z)((e=>p.Z.post("/api/menu/add",e)),{manual:!0});return(0,w.jsxs)(o.Z,{children:[(0,w.jsx)("h1",{children:"新增菜单 ✨"}),(0,w.jsx)(d.Z,{}),(0,w.jsxs)(a.Z,{form:I,layout:"vertical",initialValues:{type:$.AH.enum.menu},onFinish:n=>O.runAsync(n).then((()=>{e.confirm({title:"提示",icon:(0,w.jsx)(g.Z,{}),content:"菜单新增成功！",okText:"返回列表页",onOk:()=>t("/permis/menu"),cancelText:"继续新增",onCancel:()=>{I.resetFields(),z()},centered:!0})})),autoComplete:"off",children:[(0,w.jsxs)(s.Z,{gutter:16,children:[(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(a.Z.Item,{label:"父节点",name:"parentId",required:!0,children:(0,w.jsx)(h.Z,{treeData:n,fieldNames:{label:"title",value:"id"},placeholder:"根节点",disabled:!0})})}),(0,w.jsx)(c.Z,{xxl:6,lg:12,span:24,children:(0,w.jsx)(a.Z.Item,{label:"名称",name:"title",rules:[{required:!0},{type:"string",min:2,max:10,message:"长度在 2 到 10 个字符！"}],children:(0,w.jsx)(m.Z,{placeholder:"菜单名称"})})}),(0,w.jsx)(c.Z,{xxl:6,lg:12,span:24,children:(0,w.jsx)(a.Z.Item,{label:"类型",name:"type",rules:[{required:!0}],children:(0,w.jsx)(Z.Z,{placeholder:"菜单类型",dictName:"menuType"})})}),S===$.AH.enum.menu&&(0,w.jsx)(c.Z,{xxl:6,lg:12,span:24,children:(0,w.jsx)(a.Z.Item,{label:"路径",name:"path",rules:[{required:!0},y],children:(0,w.jsx)(m.Z,{placeholder:"菜单路径"})})}),(0,w.jsx)(c.Z,{xxl:6,lg:12,span:24,children:(0,w.jsx)(a.Z.Item,{label:"图标",name:"icon",children:(0,w.jsx)(m.Z,{placeholder:"图标名称"})})})]}),(0,w.jsxs)(s.Z,{gutter:16,children:[S===$.AH.enum.menu&&(0,w.jsx)(c.Z,{xxl:6,lg:12,span:24,children:(0,w.jsx)(a.Z.Item,{label:"按钮",children:(0,w.jsx)(a.Z.List,{name:"buttonList",children:(e,t)=>(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[e.map((({key:e,name:n})=>(0,w.jsxs)(u.Z,{align:"baseline",children:[(0,w.jsx)(a.Z.Item,{name:[n,"name"],rules:[{required:!0,message:"按钮名称是必选字段"}],children:(0,w.jsx)(m.Z,{placeholder:"按钮名称"})}),(0,w.jsx)(a.Z.Item,{name:[n,"id"],rules:[{required:!0,message:"按钮标识是必选字段"},v],children:(0,w.jsx)(m.Z,{placeholder:"按钮标识"})}),(0,w.jsx)(f.Z,{onClick:()=>t.remove(n)})]},e))),(0,w.jsx)(x.ZP,{type:"dashed",onClick:()=>t.add(),block:!0,children:"+ 新增按钮"})]})})})}),(0,w.jsx)(c.Z,{span:24,children:(0,w.jsx)(a.Z.Item,{children:(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(x.ZP,{type:"primary",htmlType:"submit",loading:O.loading,children:"新增"}),(0,w.jsx)(x.ZP,{onClick:()=>{I.resetFields(),z()},children:"重置"})]})})})]})]})]})}},53139:function(e,t,n){var r=n(78944);t.Z=r.Z},84878:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(89526),i=n(70854),l=n.n(i),a=n(25342),o=n(13806),d=n(11351),s=n(55439),c=n(94237);const h=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i,textPaddingInline:l,orientationMargin:a,verticalMarginInline:s}=e;return{[t]:Object.assign(Object.assign({},(0,d.Wf)(e)),{borderBlockStart:`${(0,o.bf)(i)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${(0,o.bf)(i)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${(0,o.bf)(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${(0,o.bf)(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${(0,o.bf)(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${a} * 100%)`},"&::after":{width:`calc(100% - ${a} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${a} * 100%)`},"&::after":{width:`calc(${a} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:l},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${(0,o.bf)(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}};var m=(0,s.I$)("Divider",(e=>{const t=(0,c.TS)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[h(t)]}),(e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS})),{unitless:{orientationMargin:!0}}),u=e=>{const{getPrefixCls:t,direction:n,divider:i}=r.useContext(a.E_),{prefixCls:o,type:d="horizontal",orientation:s="center",orientationMargin:c,className:h,rootClassName:u,children:x,dashed:p,plain:g,style:f}=e,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),j=t("divider",o),[Z,$,y]=m(j),v=s.length>0?`-${s}`:s,w=!!x,I="left"===s&&null!=c,k="right"===s&&null!=c,z=l()(j,null==i?void 0:i.className,$,y,`${j}-${d}`,{[`${j}-with-text`]:w,[`${j}-with-text${v}`]:w,[`${j}-dashed`]:!!p,[`${j}-plain`]:!!g,[`${j}-rtl`]:"rtl"===n,[`${j}-no-default-orientation-margin-left`]:I,[`${j}-no-default-orientation-margin-right`]:k},h,u),S=r.useMemo((()=>"number"==typeof c?c:/^\d+$/.test(c)?Number(c):c),[c]),O=Object.assign(Object.assign({},I&&{marginLeft:S}),k&&{marginRight:S});return Z(r.createElement("div",Object.assign({className:z,style:Object.assign(Object.assign({},null==i?void 0:i.style),f)},b,{role:"separator"}),x&&"vertical"!==d&&r.createElement("span",{className:`${j}-inner-text`,style:O},x)))}},10011:function(e,t,n){var r=n(1308);t.Z=r.Z}}]);
//# sourceMappingURL=733.06b791af.chunk.js.map