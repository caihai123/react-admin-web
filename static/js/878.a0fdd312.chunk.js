"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[878],{67878:function(e,t,i){i.r(t),i.d(t,{default:function(){return B}});var n=i(89526),s=i(24059),l=i(74918),r=i(64785),a=i(96799),c=i(75452),o=i(18740),d=i(4677),p=i(95810),x=i(68175),u=i(84878),h=i(96479),g=i(10011),y=i(53139),f=i(88241),j=i(31363),m=i(90569),Z=i(45303),v=i(47575),b=i(64871),w=i(48126),k=i(37756),S=i(22390),z=i(83716);const _=function(e){const t=e.split("/"),i=t[t.length-1],n=i.lastIndexOf(".");return n<=0?i:i.substring(0,n)+i.substring(n)};var C=(0,i(60436).Z)({scriptUrl:"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js"}),I=i(57744),P=i(67557);function O(e){const{src:t,type:i,height:n}=e;switch(i){case"img":return(0,P.jsx)(I.Z,{src:t,height:n,preview:!1});case"doc":return(0,P.jsx)(C,{type:"icon-file_txt",style:{fontSize:n}});case"video":return(0,P.jsx)(C,{type:"icon-file_video",style:{fontSize:n}});case"music":return(0,P.jsx)(C,{type:"icon-file_music",style:{fontSize:n}});default:return(0,P.jsx)(C,{type:"icon-File",style:{fontSize:n}})}}var N=i(53736),R=i(91317);const T={height:250,appendPadding:10,data:[{type:"图片",value:4544},{type:"文档",value:3321},{type:"视频",value:3113},{type:"音频",value:3113},{type:"其他",value:2341}],angleField:"value",colorField:"type",innerRadius:.6,label:!1,legend:!1,statistic:!1};function D(){return(0,P.jsx)(R.Z,{...T})}var E=i(20485);const F=e=>{const t=window.getComputedStyle(e,null);return{left:Number.parseInt(t.paddingLeft,10)||0,right:Number.parseInt(t.paddingRight,10)||0,top:Number.parseInt(t.paddingTop,10)||0,bottom:Number.parseInt(t.paddingBottom,10)||0}};function H({text:e,...t}){const i=(0,n.useRef)(null),{isOverflowX:s}=function(e){const[t,{set:i}]=(0,E.Z)(!1),[s,{set:l}]=(0,E.Z)(!1);return function(e,t){(0,n.useEffect)((()=>{const i="current"in e?e.current:e,n=new ResizeObserver((e=>{for(const i of e)t((i.target.clientWidth,i.target.clientHeight))}));return n.observe(i),()=>{n.disconnect()}}),[e,t])}(e,(()=>{const t="current"in e?e.current:e;if(t){const e=document.createRange();e.setStart(t,0),e.setEnd(t,t.childNodes.length);const n=F(t),s=e.getBoundingClientRect();i(s.width+n.left+n.right>t.offsetWidth||t.scrollWidth>t.offsetWidth),l(s.height+n.top+n.bottom>t.offsetHeight||t.scrollHeight>t.offsetHeight)}})),{isOverflowX:t,isOverflowY:s}}(i);return(0,P.jsx)("div",{ref:i,className:"ellipsis",...t,title:s?e:void 0,children:e})}function B(){const{token:{colorPrimary:e}}=s.Z.useToken(),[t,i]=(0,n.useState)("all"),{data:I,pagination:R,loading:T}=(0,k.Z)((({current:e,pageSize:i})=>z.Z.post("/api/file/page",{pageIndex:e,pageSize:i,type:t}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}}))),{refreshDeps:[t],defaultPageSize:20}),E=[{title:"文件",key:"file",render:(e,t)=>(0,P.jsx)(O,{type:N.r5.map[t.type].alias,src:t.url,height:36})},{title:"文件地址",dataIndex:"url"},{title:"文件大小",dataIndex:"size"},{title:"创建时间",dataIndex:"createDate"},{title:"操作",key:"action",fixed:"right",width:150,render:(e,t)=>(0,P.jsxs)(l.Z,{size:"middle",children:[(0,P.jsx)(r.Z,{title:"下载",mouseEnterDelay:1,children:(0,P.jsx)(a.ZP,{type:"primary",icon:(0,P.jsx)(m.Z,{})})}),(0,P.jsx)(r.Z,{title:"删除",mouseEnterDelay:1,children:(0,P.jsx)(a.ZP,{danger:!0,icon:(0,P.jsx)(Z.Z,{})})})]})}],F={showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t.join("-")} 条/共 ${e} 条`,current:R.current,pageSize:R.pageSize,total:R.total,onChange:R.onChange},[B,{toggle:W}]=(0,S.Z)("list","table"),A={list:(0,P.jsx)(c.Z,{spinning:T,children:I?.list.length?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridGap:16},children:I?.list.map((e=>(0,P.jsxs)("div",{style:{height:150,padding:10,textAlign:"center"},children:[(0,P.jsx)(O,{type:N.r5.map[e.type].alias,src:e.url,height:60}),(0,P.jsx)(H,{text:_(e.url),style:{lineHeight:2,padding:"0 10px"}})]},e.id)))}),(0,P.jsx)(o.Z,{style:{marginTop:16,textAlign:"right"},...F,hideOnSinglePage:!0})]}):(0,P.jsx)(d.Z,{})}),table:(0,P.jsx)(p.Z,{rowKey:"id",dataSource:I?.list,columns:E,pagination:F,loading:T})};return(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsxs)("div",{style:{flex:"0 0 250px"},children:[(0,P.jsxs)(x.Z,{children:[(0,P.jsx)("div",{children:"文件管理 ✨"}),(0,P.jsx)(u.Z,{dashed:!0,style:{margin:"8px 0"}}),(0,P.jsx)(h.Z,{items:[{key:"file",label:"文件类型",icon:(0,P.jsx)(v.Z,{}),children:[{key:"all",label:"全部",icon:(0,P.jsx)(C,{type:"icon-files"})},{key:"img",label:"图片",icon:(0,P.jsx)(C,{type:"icon-file_img"})},{key:"doc",label:"文档",icon:(0,P.jsx)(C,{type:"icon-file_txt"})},{key:"video",label:"视频",icon:(0,P.jsx)(C,{type:"icon-file_video"})},{key:"music",label:"音频",icon:(0,P.jsx)(C,{type:"icon-file_music"})},{key:"other",label:"其他",icon:(0,P.jsx)(C,{type:"icon-File"})}]}],selectedKeys:["file",t],defaultOpenKeys:["file"],mode:"inline",style:{border:"none"},onClick:({key:e})=>i(e)})]}),(0,P.jsxs)(x.Z,{style:{marginTop:16},children:[(0,P.jsxs)(g.Z,{align:"middle",style:{textAlign:"center"},children:[(0,P.jsx)(y.Z,{span:10,children:(0,P.jsx)(f.Z,{title:"储存容量",value:5,suffix:"MB",valueStyle:{color:e}})}),(0,P.jsx)(y.Z,{span:4,children:(0,P.jsx)(u.Z,{type:"vertical"})}),(0,P.jsx)(y.Z,{span:10,children:(0,P.jsx)(f.Z,{title:"数量",value:100,valueStyle:{color:e}})})]}),(0,P.jsx)(u.Z,{style:{margin:"8px 0"}}),(0,P.jsx)(D,{})]})]}),(0,P.jsx)("div",{style:{flex:"auto",padding:"0px 16px"},children:(0,P.jsxs)(x.Z,{children:[(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,P.jsx)(l.Z,{children:(0,P.jsx)(j.Z.Search,{enterButton:"查询",placeholder:"请输入文件名"})}),(0,P.jsxs)(l.Z,{children:[(0,P.jsx)(a.ZP,{type:"primary",icon:(0,P.jsx)(b.Z,{}),children:"上传"}),(0,P.jsx)(a.ZP,{children:"批量操作"}),(0,P.jsx)(r.Z,{title:"视图",mouseEnterDelay:1,children:(0,P.jsx)(a.ZP,{icon:"table"===B.view?(0,P.jsx)(w.Z,{}):(0,P.jsx)(v.Z,{}),onClick:W})})]})]}),(0,P.jsx)(u.Z,{dashed:!0,style:{margin:"16px 0"}}),A[B]]})})]})}}}]);
//# sourceMappingURL=878.a0fdd312.chunk.js.map