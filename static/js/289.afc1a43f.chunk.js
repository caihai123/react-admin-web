"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[289],{24544:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(89526),l=r(72816),s=r(74918),a=r(96799),i=r(58047),o=r(86430),c=r(83716),d=r(78589),u=r(49367),p=r(8139),f=r(67557);function h({defaultChecked:e=!1,onChange:t=(()=>null)}){const[r,{set:n}]=(0,d.Z)(e),[l,{setTrue:s,setFalse:a}]=(0,p.ZP)(!1);return(0,f.jsx)(u.Z,{checked:r,loading:l,onChange:e=>{n(e),s(),t(e)?.catch((()=>{n(!e)})).finally((()=>a()))}})}var m=r(5416),x=r(97839),Z=r(48570),y=r(26806),b=r(70854),j=r.n(b),g=r(68334),C=r(74425),P=r(25342),k=r(89134),w=r(76934),I=r(33874),O=r(88132),v=(0,C.i)((e=>{const{prefixCls:t,className:r,closeIcon:l,closable:s,type:a,title:i,children:o,footer:c}=e,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]])}return r}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=n.useContext(P.E_),p=u(),f=t||u("modal"),h=(0,O.Z)(p),[m,x,Z]=(0,I.ZP)(f,h),y=`${f}-confirm`;let b={};return b=a?{closable:null!=s&&s,title:"",footer:"",children:n.createElement(k.O,Object.assign({},e,{prefixCls:f,confirmPrefixCls:y,rootPrefixCls:p,content:o}))}:{closable:null==s||s,title:i,footer:null!==c&&n.createElement(w.$,Object.assign({},e)),children:o},m(n.createElement(g.s,Object.assign({prefixCls:f,className:j()(x,`${f}-pure-panel`,a&&y,a&&`${y}-${a}`,r,Z,h)},d,{closeIcon:(0,w.b)(f,l),closable:s},b)))})),S=r(4894);function F(e){return(0,x.ZP)((0,x.uW)(e))}const A=y.Z;A.useModal=S.Z,A.info=function(e){return(0,x.ZP)((0,x.cw)(e))},A.success=function(e){return(0,x.ZP)((0,x.vq)(e))},A.error=function(e){return(0,x.ZP)((0,x.AQ)(e))},A.warning=F,A.warn=F,A.confirm=function(e){return(0,x.ZP)((0,x.Au)(e))},A.destroyAll=function(){for(;Z.Z.length;){const e=Z.Z.pop();e&&e()}},A.config=x.ai,A._InternalPanelDoNotUseOrYouWillBeFired=v;var N=A,_=r(31363),z=(0,n.forwardRef)(((e,t)=>{const{message:r}=l.Z.useApp(),[i]=m.Z.useForm(),[o,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[x,{setTrue:Z,setFalse:y}]=(0,p.ZP)(!1);return(0,n.useImperativeHandle)(t,(()=>({addStart:()=>h(!0),editStart:e=>{d(e.id),i.setFieldsValue(e),h(!0)}}))),(0,f.jsx)(N,{title:o?"编辑":"新增",open:u,width:600,footer:(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(a.ZP,{onClick:()=>h(!1),children:"取消"}),(0,f.jsx)(a.ZP,{type:"primary",loading:x,onClick:()=>i.submit(),children:"确定"})]}),onCancel:()=>h(!1),afterClose:()=>{d(""),i.resetFields()},children:(0,f.jsxs)(m.Z,{form:i,layout:"vertical",onFinish:function(t){Z(!0);const n=o?"/api/role/update":"/api/role/add",l=o?"更新成功！":"新增成功！",s=o?{id:o,...t}:t;c.Z.post(n,s).then((()=>{h(!1),r.success(l),e.callback?.(o?void 0:1)})).finally((()=>y()))},autoComplete:"off",children:[(0,f.jsx)(m.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,f.jsx)(_.Z,{placeholder:"请输入"})}),(0,f.jsx)(m.Z.Item,{name:"description",label:"备注",children:(0,f.jsx)(_.Z.TextArea,{placeholder:"请输入"})})]})})}));function E(){const{message:e}=l.Z.useApp(),t=(0,n.useRef)(),r=(0,n.useRef)(),d=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,r)=>(0,f.jsx)(h,{defaultChecked:1===t,onChange:t=>function(t,r){return c.Z.post("/api/role/status/update",{id:t,status:r}).then((()=>{e.success("切换成功！")}))}(r.id,t?1:0)}),type:"select",options:[{label:"启用",value:"1"},{label:"禁用",value:"0"}]},{title:"操作",key:"action",render:e=>(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(a.ZP,{type:"primary",ghost:!0,size:"small",onClick:()=>r.current.editStart(e),children:"编辑"}),(0,f.jsx)(a.ZP,{type:"primary",size:"small",children:"授权"}),(0,f.jsx)(a.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),width:100,fixed:"right",hideInSearch:!0}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{ref:t,columns:d,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:r})=>c.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:r}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>[(0,f.jsx)(a.ZP,{type:"primary",icon:(0,f.jsx)(i.Z,{}),onClick:()=>r.current.addStart(),children:"新增"},"add")]}),(0,f.jsx)(z,{ref:r,callback:e=>t.current.refresh(e)})]})}}}]);
//# sourceMappingURL=289.afc1a43f.chunk.js.map