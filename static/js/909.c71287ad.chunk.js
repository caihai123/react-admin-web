"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[909],{46855:function(e,t,n){n.d(t,{Fu:function(){return d},ZP:function(){return c}});var r=n(89526),i=n(83277),a=n(79669),o=n(88519),l=n(67557);const s=function(){const{pathname:e}=(0,i.TH)(),t=(0,a.v9)(o.S6).find((t=>t.path===e));return e=>t.buttonList?.some((t=>t.id===e))},d=function(...e){const t=s(),n=e.filter((e=>t(e.permission)));return[function(...e){return(0,l.jsx)(r.Fragment,{children:n.map((t=>{const n=t.render(...e);return(0,l.jsx)(r.Fragment,{children:n},t.permission)}))})},!!n.length]};function c({permission:e,children:t}){return s()(e)?t:void 0}},24544:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(89526),i=n(72816),a=n(96799),o=n(74918),l=n(58047),s=n(86430),d=n(83716),c=n(78589),u=n(49367),f=n(8139),p=n(67557);function h({defaultChecked:e=!1,onChange:t=(()=>null)}){const[n,{set:r}]=(0,c.Z)(e),[i,{setTrue:a,setFalse:o}]=(0,f.ZP)(!1);return(0,p.jsx)(u.Z,{checked:n,loading:i,onChange:e=>{r(e),a(),t(e)?.catch((()=>{r(!e)})).finally((()=>o()))}})}var g=n(5416),m=n(97839),b=n(48570),x=n(26806),y=n(70854),v=n.n(y),$=n(68334),Z=n(74425),j=n(25342),S=n(89134),w=n(76934),C=n(33874),P=n(88132),z=(0,Z.i)((e=>{const{prefixCls:t,className:n,closeIcon:i,closable:a,type:o,title:l,children:s,footer:d}=e,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=r.useContext(j.E_),f=u(),p=t||u("modal"),h=(0,P.Z)(f),[g,m,b]=(0,C.ZP)(p,h),x=`${p}-confirm`;let y={};return y=o?{closable:null!=a&&a,title:"",footer:"",children:r.createElement(S.O,Object.assign({},e,{prefixCls:p,confirmPrefixCls:x,rootPrefixCls:f,content:s}))}:{closable:null==a||a,title:l,footer:null!==d&&r.createElement(w.$,Object.assign({},e)),children:s},g(r.createElement($.s,Object.assign({prefixCls:p,className:v()(m,`${p}-pure-panel`,o&&x,o&&`${x}-${o}`,n,b,h)},c,{closeIcon:(0,w.b)(p,i),closable:a},y)))})),O=n(4894);function I(e){return(0,m.ZP)((0,m.uW)(e))}const k=x.Z;k.useModal=O.Z,k.info=function(e){return(0,m.ZP)((0,m.cw)(e))},k.success=function(e){return(0,m.ZP)((0,m.vq)(e))},k.error=function(e){return(0,m.ZP)((0,m.AQ)(e))},k.warning=I,k.warn=I,k.confirm=function(e){return(0,m.ZP)((0,m.Au)(e))},k.destroyAll=function(){for(;b.Z.length;){const e=b.Z.pop();e&&e()}},k.config=m.ai,k._InternalPanelDoNotUseOrYouWillBeFired=z;var E=k,M=n(31363),N=(0,r.forwardRef)(((e,t)=>{const{message:n}=i.Z.useApp(),[l]=g.Z.useForm(),[s,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[m,{setTrue:b,setFalse:x}]=(0,f.ZP)(!1);return(0,r.useImperativeHandle)(t,(()=>({addStart:()=>h(!0),editStart:e=>{c(e.id),l.setFieldsValue(e),h(!0)}}))),(0,p.jsx)(E,{title:(0,p.jsxs)(p.Fragment,{children:[s?"编辑":"新增","角色 ✨"]}),open:u,width:600,footer:(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(a.ZP,{onClick:()=>h(!1),children:"取消"}),(0,p.jsx)(a.ZP,{type:"primary",loading:m,onClick:()=>l.submit(),children:"确定"})]}),onCancel:()=>h(!1),afterClose:()=>{c(""),l.resetFields()},centered:!0,wrapClassName:"custom-modal-style",maskClosable:!1,style:{marginTop:"-20vh"},children:(0,p.jsxs)(g.Z,{form:l,layout:"vertical",onFinish:function(t){b(!0);const r=s?"/api/role/update":"/api/role/add",i=s?"更新成功！":"新增成功！",a=s?{id:s,...t}:t;d.Z.post(r,a).then((()=>{h(!1),n.success(i),e.callback?.(s?void 0:1)})).finally((()=>x()))},autoComplete:"off",children:[(0,p.jsx)(g.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,p.jsx)(M.Z,{placeholder:"请输入"})}),(0,p.jsx)(g.Z.Item,{name:"description",label:"备注",children:(0,p.jsx)(M.Z.TextArea,{placeholder:"请输入"})})]})})})),T=n(53736),F=n(46855);function B(){const{message:e}=i.Z.useApp(),t=(0,r.useRef)(),n=(0,r.useRef)(),[c,u]=(0,F.Fu)({render:e=>(0,p.jsx)(a.ZP,{type:"primary",ghost:!0,size:"small",onClick:()=>n.current.editStart(e),children:"编辑"}),permission:"edit"},{render:e=>(0,p.jsx)(a.ZP,{type:"primary",size:"small",children:"授权"}),permission:"accredit"},{render:e=>(0,p.jsx)(a.ZP,{type:"primary",danger:!0,size:"small",children:"删除"}),permission:"del"}),f=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,n)=>{const{enabled:r,disabled:i}=T.roleEnabledState.enum;return(0,p.jsx)(h,{defaultChecked:t===r,onChange:t=>function(t,n){return d.Z.post("/api/role/status/update",{id:t,status:n}).then((()=>{e.success("切换成功！")}))}(n.id,t?r:i)})},type:"select",options:T.roleEnabledState.options},{title:"操作",key:"action",render:e=>(0,p.jsx)(o.Z,{children:c(e)}),width:100,fixed:"right",hideInSearch:!0,hideInTable:!u}];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.Z,{ref:t,columns:f,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:n})=>d.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:n}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>(0,p.jsx)(F.ZP,{permission:"add",children:(0,p.jsx)(a.ZP,{type:"primary",icon:(0,p.jsx)(l.Z,{}),onClick:()=>n.current.addStart(),children:"新增"})})}),(0,p.jsx)(N,{ref:n,callback:e=>t.current.refresh(e)})]})}},37756:function(e,t,n){var r=n(33940),i=n(89526),a=n(83644),o=n(88238);t.Z=function(e,t){var n;void 0===t&&(t={});var l=t.defaultPageSize,s=void 0===l?10:l,d=t.defaultCurrent,c=void 0===d?1:d,u=(0,r._T)(t,["defaultPageSize","defaultCurrent"]),f=(0,o.Z)(e,(0,r.pi)({defaultParams:[{current:c,pageSize:s}],refreshDepsAction:function(){$(1)}},u)),p=f.params[0]||{},h=p.current,g=void 0===h?1:h,m=p.pageSize,b=void 0===m?s:m,x=(null===(n=f.data)||void 0===n?void 0:n.total)||0,y=(0,i.useMemo)((function(){return Math.ceil(x/b)}),[b,x]),v=function(e,t){var n=e<=0?1:e,i=t<=0?1:t,a=Math.ceil(x/i);n>a&&(n=Math.max(1,a));var o=(0,r.CR)(f.params||[]),l=o[0],s=void 0===l?{}:l,d=o.slice(1);f.run.apply(f,(0,r.ev)([(0,r.pi)((0,r.pi)({},s),{current:n,pageSize:i})],(0,r.CR)(d),!1))},$=function(e){v(e,b)};return(0,r.pi)((0,r.pi)({},f),{pagination:{current:g,pageSize:b,total:x,totalPage:y,onChange:(0,a.Z)(v),changeCurrent:(0,a.Z)($),changePageSize:(0,a.Z)((function(e){v(g,e)}))}})}},84878:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(89526),i=n(70854),a=n.n(i),o=n(25342),l=n(13806),s=n(11351),d=n(55439),c=n(94237);const u=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i,textPaddingInline:a,orientationMargin:o,verticalMarginInline:d}=e;return{[t]:Object.assign(Object.assign({},(0,s.Wf)(e)),{borderBlockStart:`${(0,l.bf)(i)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:d,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${(0,l.bf)(i)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${(0,l.bf)(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${(0,l.bf)(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${(0,l.bf)(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${o} * 100%)`},"&::after":{width:`calc(100% - ${o} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${o} * 100%)`},"&::after":{width:`calc(${o} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:a},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${(0,l.bf)(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}};var f=(0,d.I$)("Divider",(e=>{const t=(0,c.TS)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[u(t)]}),(e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS})),{unitless:{orientationMargin:!0}}),p=e=>{const{getPrefixCls:t,direction:n,divider:i}=r.useContext(o.E_),{prefixCls:l,type:s="horizontal",orientation:d="center",orientationMargin:c,className:u,rootClassName:p,children:h,dashed:g,plain:m,style:b}=e,x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),y=t("divider",l),[v,$,Z]=f(y),j=d.length>0?`-${d}`:d,S=!!h,w="left"===d&&null!=c,C="right"===d&&null!=c,P=a()(y,null==i?void 0:i.className,$,Z,`${y}-${s}`,{[`${y}-with-text`]:S,[`${y}-with-text${j}`]:S,[`${y}-dashed`]:!!g,[`${y}-plain`]:!!m,[`${y}-rtl`]:"rtl"===n,[`${y}-no-default-orientation-margin-left`]:w,[`${y}-no-default-orientation-margin-right`]:C},u,p),z=r.useMemo((()=>"number"==typeof c?c:/^\d+$/.test(c)?Number(c):c),[c]),O=Object.assign(Object.assign({},w&&{marginLeft:z}),C&&{marginRight:z});return v(r.createElement("div",Object.assign({className:P,style:Object.assign(Object.assign({},null==i?void 0:i.style),b)},x,{role:"separator"}),h&&"vertical"!==s&&r.createElement("span",{className:`${y}-inner-text`,style:O},h)))}}}]);
//# sourceMappingURL=909.c71287ad.chunk.js.map