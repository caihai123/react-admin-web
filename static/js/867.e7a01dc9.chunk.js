"use strict";(self.webpackChunkreact_admin_web=self.webpackChunkreact_admin_web||[]).push([[867],{79206:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var n=r(67294),l=r(98088),s=r(1127),a=r(54666),o=r(49101),i=r(76016),c=r(71485),d=r(59819),u=r(15622),p=r(47934),f=r(85893);function h({defaultChecked:e=!1,onChange:t=(()=>null)}){const[r,{set:n}]=(0,d.Z)(e),[l,{setTrue:s,setFalse:a}]=(0,p.ZP)(!1);return(0,f.jsx)(u.Z,{checked:r,loading:l,onChange:e=>{n(e),s(),t(e)?.catch((()=>{n(!e)})).finally((()=>a()))}})}var m=r(53576),x=r(56080),Z=r(38657),b=r(6866),y=r(13144),j=r.n(y),g=r(87175),C=r(8745),P=r(53124),k=r(81694),w=r(95514),I=r(71194),O=r(35792),S=(0,C.i)((e=>{const{prefixCls:t,className:r,closeIcon:l,closable:s,type:a,title:o,children:i,footer:c}=e,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]])}return r}(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:u}=n.useContext(P.E_),p=u(),f=t||u("modal"),h=(0,O.Z)(p),[m,x,Z]=(0,I.ZP)(f,h),b=`${f}-confirm`;let y={};return y=a?{closable:null!=s&&s,title:"",footer:"",children:n.createElement(k.O,Object.assign({},e,{prefixCls:f,confirmPrefixCls:b,rootPrefixCls:p,content:i}))}:{closable:null==s||s,title:o,footer:null!==c&&n.createElement(w.$,Object.assign({},e)),children:i},m(n.createElement(g.s,Object.assign({prefixCls:f,className:j()(x,`${f}-pure-panel`,a&&b,a&&`${b}-${a}`,r,Z,h)},d,{closeIcon:(0,w.b)(f,l),closable:s},y)))})),v=r(70061);function F(e){return(0,x.ZP)((0,x.uW)(e))}const E=b.Z;E.useModal=v.Z,E.info=function(e){return(0,x.ZP)((0,x.cw)(e))},E.success=function(e){return(0,x.ZP)((0,x.vq)(e))},E.error=function(e){return(0,x.ZP)((0,x.AQ)(e))},E.warning=F,E.warn=F,E.confirm=function(e){return(0,x.ZP)((0,x.Au)(e))},E.destroyAll=function(){for(;Z.Z.length;){const e=Z.Z.pop();e&&e()}},E.config=x.ai,E._InternalPanelDoNotUseOrYouWillBeFired=S;var A=E,N=r(85529),_=(0,n.forwardRef)(((e,t)=>{const{message:r}=l.Z.useApp(),[o]=m.Z.useForm(),[i,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[x,{setTrue:Z,setFalse:b}]=(0,p.ZP)(!1);return(0,n.useImperativeHandle)(t,(()=>({addStart:()=>h(!0),editStart:e=>{d(e.id),o.setFieldsValue(e),h(!0)}}))),(0,f.jsx)(A,{title:i?"编辑":"新增",open:u,width:600,footer:(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(a.ZP,{onClick:()=>h(!1),children:"取消"}),(0,f.jsx)(a.ZP,{type:"primary",loading:x,onClick:()=>o.submit(),children:"确定"})]}),onCancel:()=>h(!1),afterClose:()=>{d(""),o.resetFields()},children:(0,f.jsxs)(m.Z,{form:o,layout:"vertical",onFinish:function(t){Z(!0);const n=i?"/api/role/update":"/api/role/add",l=i?"更新成功！":"新增成功！",s=i?{id:i,...t}:t;c.Z.post(n,s).then((()=>{h(!1),r.success(l),e.callback?.(i?void 0:1)})).finally((()=>b()))},autoComplete:"off",children:[(0,f.jsx)(m.Z.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}],children:(0,f.jsx)(N.Z,{placeholder:"请输入"})}),(0,f.jsx)(m.Z.Item,{name:"description",label:"备注",children:(0,f.jsx)(N.Z.TextArea,{placeholder:"请输入"})})]})})})),z=r(24683);function $(){const{message:e}=l.Z.useApp(),t=(0,n.useRef)(),r=(0,n.useRef)(),d=[{title:"角色名称",dataIndex:"roleName"},{title:"备注",dataIndex:"description",hideInSearch:!0},{title:"状态",dataIndex:"status",render:(t,r)=>{const{enabled:n,disabled:l}=z.roleEnabledState.enum;return(0,f.jsx)(h,{defaultChecked:t===n,onChange:t=>function(t,r){return c.Z.post("/api/role/status/update",{id:t,status:r}).then((()=>{e.success("切换成功！")}))}(r.id,t?n:l)})},type:"select",options:z.roleEnabledState.options},{title:"操作",key:"action",render:e=>(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(a.ZP,{type:"primary",ghost:!0,size:"small",onClick:()=>r.current.editStart(e),children:"编辑"}),(0,f.jsx)(a.ZP,{type:"primary",size:"small",children:"授权"}),(0,f.jsx)(a.ZP,{type:"primary",danger:!0,size:"small",children:"删除"})]}),width:100,fixed:"right",hideInSearch:!0}];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{ref:t,columns:d,rowKey:"id",headerTitle:"角色列表",request:(e,{current:t,pageSize:r})=>c.Z.post("/api/role/page",{params:e,pageIndex:t,pageSize:r}).then((e=>{const{result:t}=e;return{list:t.records,total:t.total}})),toolBarRender:()=>[(0,f.jsx)(a.ZP,{type:"primary",icon:(0,f.jsx)(o.Z,{}),onClick:()=>r.current.addStart(),children:"新增"},"add")]}),(0,f.jsx)(_,{ref:r,callback:e=>t.current.refresh(e)})]})}}}]);