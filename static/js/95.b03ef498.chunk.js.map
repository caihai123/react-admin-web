{"version":3,"file":"static/js/95.b03ef498.chunk.js","mappings":"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","sources":["webpack://react-admin-web/./src/components/CustomIcon.jsx","webpack://react-admin-web/./src/pages/system/file/components/FileView.jsx","webpack://react-admin-web/./src/pages/system/file/components/PieView.jsx","webpack://react-admin-web/./src/hooks/useContentOverflow.ts","webpack://react-admin-web/./src/pages/system/file/components/NameEllipsis.jsx","webpack://react-admin-web/./src/hooks/useDomSize.ts","webpack://react-admin-web/./src/pages/system/file/index.jsx"],"sourcesContent":["import { createFromIconfontCN } from \"@ant-design/icons\";\r\n\r\n/**\r\n * 自定义图标\r\n */\r\nconst CustomIcon = createFromIconfontCN({\r\n  scriptUrl: \"//at.alicdn.com/t/c/font_4536594_tzwqdxvrmzn.js\", // 在 iconfont.cn 上生成\r\n});\r\n\r\nexport default CustomIcon;\r\n","import { Image } from \"antd\";\r\nimport MyIcon from \"@/components/CustomIcon\";\r\n\r\nexport default function FileView(props) {\r\n  const { src, type, height } = props;\r\n\r\n  switch (type) {\r\n    case \"img\":\r\n      // 图片\r\n      return <Image src={src} height={height} preview={false} />;\r\n    case \"doc\":\r\n      // 文档\r\n      return <MyIcon type=\"icon-file_txt\" style={{ fontSize: height }} />;\r\n    case \"video\":\r\n      // 视频\r\n      return <MyIcon type=\"icon-file_video\" style={{ fontSize: height }} />;\r\n    case \"music\":\r\n      // 音频\r\n      return <MyIcon type=\"icon-file_music\" style={{ fontSize: height }} />;\r\n    default:\r\n      return <MyIcon type=\"icon-File\" style={{ fontSize: height }} />;\r\n  }\r\n}\r\n","import { Pie } from \"@ant-design/plots\";\r\n\r\nconst pieConfig = {\r\n  height: 250,\r\n  appendPadding: 10,\r\n  data: [\r\n    {\r\n      type: \"图片\",\r\n      value: 4544,\r\n    },\r\n    {\r\n      type: \"文档\",\r\n      value: 3321,\r\n    },\r\n    {\r\n      type: \"视频\",\r\n      value: 3113,\r\n    },\r\n    {\r\n      type: \"音频\",\r\n      value: 3113,\r\n    },\r\n    {\r\n      type: \"其他\",\r\n      value: 2341,\r\n    },\r\n  ],\r\n  angleField: \"value\",\r\n  colorField: \"type\",\r\n  innerRadius: 0.6,\r\n  label: false,\r\n  legend: false,\r\n  statistic: false,\r\n};\r\nexport default function PieView() {\r\n  return <Pie {...pieConfig} />;\r\n}\r\n","import { type RefObject } from \"react\";\r\nimport { useBoolean } from \"ahooks\";\r\nimport useDomSize from \"./useDomSize\";\r\n\r\n/** 获取dom padding */\r\nconst getPadding = (el: Element) => {\r\n  const style = window.getComputedStyle(el, null);\r\n  const paddingLeft = Number.parseInt(style.paddingLeft, 10) || 0;\r\n  const paddingRight = Number.parseInt(style.paddingRight, 10) || 0;\r\n  const paddingTop = Number.parseInt(style.paddingTop, 10) || 0;\r\n  const paddingBottom = Number.parseInt(style.paddingBottom, 10) || 0;\r\n  return {\r\n    left: paddingLeft,\r\n    right: paddingRight,\r\n    top: paddingTop,\r\n    bottom: paddingBottom,\r\n  };\r\n};\r\n\r\nexport type Target = HTMLElement | RefObject<HTMLElement>;\r\n\r\n/**\r\n * 判断容器内容是否溢出\r\n * @param target DOM 节点或者 ref\r\n */\r\nexport default function useContentOverflow(target: Target) {\r\n  const [isOverflowX, { set: setIsOverflowX }] = useBoolean(false);\r\n  const [isOverflowY, { set: setIsOverflowY }] = useBoolean(false);\r\n\r\n  useDomSize(target, () => {\r\n    const element = \"current\" in target ? target.current : target;\r\n\r\n    if (element) {\r\n      const range = document.createRange();\r\n      range.setStart(element, 0);\r\n      range.setEnd(element, element.childNodes.length);\r\n\r\n      const padding = getPadding(element);\r\n\r\n      const rangeSize = range.getBoundingClientRect();\r\n\r\n      setIsOverflowX(\r\n        rangeSize.width + padding.left + padding.right > element.offsetWidth ||\r\n          element.scrollWidth > element.offsetWidth\r\n      );\r\n      setIsOverflowY(\r\n        rangeSize.height + padding.top + padding.bottom >\r\n          element.offsetHeight || element.scrollHeight > element.offsetHeight\r\n      );\r\n    }\r\n  });\r\n\r\n  return { isOverflowX, isOverflowY };\r\n}\r\n","import { useRef } from \"react\";\r\nimport useContentOverflow from \"@/hooks/useContentOverflow\";\r\n\r\nexport default function ContentOverflowDetector({ text, ...rest }) {\r\n  const containerRef = useRef(null);\r\n\r\n  const { isOverflowX } = useContentOverflow(containerRef);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"ellipsis\"\r\n      {...rest}\r\n      title={isOverflowX ? text : undefined}\r\n    >\r\n      {text}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, type RefObject } from \"react\";\r\n\r\nexport type Target = HTMLElement | RefObject<HTMLElement>;\r\n\r\nexport type Callback = (size: { width: number; height: number }) => void;\r\n\r\n/**\r\n * DOM 节点尺寸变化时执行回调\r\n * @param target DOM 节点或者 ref\r\n * @param callback 执行的回调函数\r\n */\r\nexport default function useDomSize(target: Target, callback: Callback) {\r\n  useEffect(() => {\r\n    const element = \"current\" in target ? target.current : target;\r\n\r\n    const resizeObserver = new ResizeObserver((entries) => {\r\n      for (const entry of entries) {\r\n        const { clientWidth, clientHeight } = entry.target;\r\n        callback({ width: clientWidth, height: clientHeight });\r\n      }\r\n    });\r\n\r\n    element && resizeObserver.observe(element);\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n    };\r\n  }, [target, callback]);\r\n}\r\n","import { useState } from \"react\";\r\nimport {\r\n  Card,\r\n  Divider,\r\n  Menu,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Input,\r\n  Space,\r\n  Table,\r\n  Pagination,\r\n  Statistic,\r\n  Tooltip,\r\n  Spin,\r\n  Empty,\r\n  theme,\r\n} from \"antd\";\r\nimport {\r\n  AppstoreOutlined,\r\n  UploadOutlined,\r\n  UnorderedListOutlined,\r\n  VerticalAlignBottomOutlined,\r\n  DeleteOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { usePagination, useToggle } from \"ahooks\";\r\nimport axios from \"@/utils/axios\";\r\nimport { getFilenameFromPath } from \"@/utils/utils\";\r\nimport MyIcon from \"@/components/CustomIcon\";\r\nimport FileView from \"./components/FileView\";\r\nimport { fileType } from \"@/utils/dict\";\r\nimport PieView from \"./components/PieView\";\r\nimport NameEllipsis from \"./components/NameEllipsis\";\r\n\r\nexport default function File() {\r\n  const {\r\n    token: { colorPrimary },\r\n  } = theme.useToken();\r\n  const [activeType, setActiveType] = useState(\"all\");\r\n\r\n  // 获取列表\r\n  const getListData = ({ current, pageSize }) => {\r\n    return axios\r\n      .post(\"/api/file/page\", {\r\n        pageIndex: current,\r\n        pageSize,\r\n        type: activeType,\r\n      })\r\n      .then((value) => {\r\n        const { result: data } = value;\r\n        return {\r\n          list: data.records,\r\n          total: data.total,\r\n        };\r\n      });\r\n  };\r\n\r\n  const { data, pagination, loading } = usePagination(getListData, {\r\n    refreshDeps: [activeType],\r\n    defaultPageSize: 20,\r\n  });\r\n\r\n  // 表格配置\r\n  const tableColumns = [\r\n    {\r\n      title: \"文件\",\r\n      key: \"file\",\r\n      render: (_, record) => {\r\n        return (\r\n          <FileView\r\n            type={fileType.map[record.type].alias}\r\n            src={record.url}\r\n            height={36}\r\n          />\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"文件地址\",\r\n      dataIndex: \"url\",\r\n    },\r\n    {\r\n      title: \"文件大小\",\r\n      dataIndex: \"size\",\r\n    },\r\n    {\r\n      title: \"创建时间\",\r\n      dataIndex: \"createDate\",\r\n    },\r\n    {\r\n      title: \"操作\",\r\n      key: \"action\",\r\n      fixed: \"right\",\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <Space size=\"middle\">\r\n          <Tooltip title=\"下载\" mouseEnterDelay={1}>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<VerticalAlignBottomOutlined />}\r\n            ></Button>\r\n          </Tooltip>\r\n          <Tooltip title=\"删除\" mouseEnterDelay={1}>\r\n            <Button danger icon={<DeleteOutlined />}></Button>\r\n          </Tooltip>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // 分页配置\r\n  const paginationConfig = {\r\n    showSizeChanger: true,\r\n    showQuickJumper: true,\r\n    showTotal: (total, range) => `第 ${range.join(\"-\")} 条/共 ${total} 条`,\r\n    current: pagination.current,\r\n    pageSize: pagination.pageSize,\r\n    total: pagination.total,\r\n    onChange: pagination.onChange,\r\n  };\r\n\r\n  // 视图切换\r\n  const [viewType, { toggle }] = useToggle(\"list\", \"table\");\r\n  const listElement = {\r\n    list: (\r\n      <Spin spinning={loading}>\r\n        {data?.list.length ? (\r\n          <>\r\n            <div\r\n              style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: \"repeat(auto-fill, minmax(200px, 1fr))\",\r\n                gridGap: 16,\r\n              }}\r\n            >\r\n              {data?.list.map((item) => (\r\n                <div\r\n                  key={item.id}\r\n                  style={{\r\n                    height: 150,\r\n                    padding: 10,\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  <FileView\r\n                    type={fileType.map[item.type].alias}\r\n                    src={item.url}\r\n                    height={60}\r\n                  />\r\n                  <NameEllipsis\r\n                    text={getFilenameFromPath(item.url)}\r\n                    style={{ lineHeight: 2, padding: \"0 10px\" }}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <Pagination\r\n              style={{ marginTop: 16, textAlign: \"right\" }}\r\n              {...paginationConfig}\r\n              hideOnSinglePage={true}\r\n            />\r\n          </>\r\n        ) : (\r\n          <Empty />\r\n        )}\r\n      </Spin>\r\n    ),\r\n    table: (\r\n      <Table\r\n        rowKey=\"id\"\r\n        dataSource={data?.list}\r\n        columns={tableColumns}\r\n        pagination={paginationConfig}\r\n        loading={loading}\r\n      ></Table>\r\n    ),\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      <div style={{ flex: \"0 0 250px\" }}>\r\n        <Card>\r\n          <div>文件管理 ✨</div>\r\n          <Divider dashed style={{ margin: \"8px 0\" }} />\r\n          <Menu\r\n            items={[\r\n              {\r\n                key: \"file\",\r\n                label: \"文件类型\",\r\n                icon: <AppstoreOutlined />,\r\n                children: [\r\n                  {\r\n                    key: \"all\",\r\n                    label: \"全部\",\r\n                    icon: <MyIcon type=\"icon-files\" />,\r\n                  },\r\n                  {\r\n                    key: \"img\",\r\n                    label: \"图片\",\r\n                    icon: <MyIcon type=\"icon-file_img\" />,\r\n                  },\r\n                  {\r\n                    key: \"doc\",\r\n                    label: \"文档\",\r\n                    icon: <MyIcon type=\"icon-file_txt\" />,\r\n                  },\r\n                  {\r\n                    key: \"video\",\r\n                    label: \"视频\",\r\n                    icon: <MyIcon type=\"icon-file_video\" />,\r\n                  },\r\n                  {\r\n                    key: \"music\",\r\n                    label: \"音频\",\r\n                    icon: <MyIcon type=\"icon-file_music\" />,\r\n                  },\r\n                  {\r\n                    key: \"other\",\r\n                    label: \"其他\",\r\n                    icon: <MyIcon type=\"icon-File\" />,\r\n                  },\r\n                ],\r\n              },\r\n            ]}\r\n            selectedKeys={[\"file\", activeType]}\r\n            defaultOpenKeys={[\"file\"]}\r\n            mode=\"inline\"\r\n            style={{ border: \"none\" }}\r\n            onClick={({ key }) => setActiveType(key)}\r\n          ></Menu>\r\n        </Card>\r\n\r\n        <Card style={{ marginTop: 16 }}>\r\n          <Row align=\"middle\" style={{ textAlign: \"center\" }}>\r\n            <Col span={10}>\r\n              <Statistic\r\n                title=\"储存容量\"\r\n                value={5}\r\n                suffix=\"MB\"\r\n                valueStyle={{\r\n                  color: colorPrimary,\r\n                }}\r\n              />\r\n            </Col>\r\n            <Col span={4}>\r\n              <Divider type=\"vertical\" />\r\n            </Col>\r\n            <Col span={10}>\r\n              <Statistic\r\n                title=\"数量\"\r\n                value={100}\r\n                valueStyle={{\r\n                  color: colorPrimary,\r\n                }}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Divider style={{ margin: \"8px 0\" }} />\r\n          <PieView />\r\n        </Card>\r\n      </div>\r\n      <div style={{ flex: \"auto\", padding: \"0px 16px\" }}>\r\n        <Card>\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Space>\r\n              <Input.Search\r\n                enterButton=\"查询\"\r\n                placeholder=\"请输入文件名\"\r\n              ></Input.Search>\r\n            </Space>\r\n            <Space>\r\n              <Button type=\"primary\" icon={<UploadOutlined />}>\r\n                上传\r\n              </Button>\r\n              <Button>批量操作</Button>\r\n              <Tooltip title=\"视图\" mouseEnterDelay={1}>\r\n                <Button\r\n                  icon={\r\n                    viewType.view === \"table\" ? (\r\n                      <UnorderedListOutlined />\r\n                    ) : (\r\n                      <AppstoreOutlined />\r\n                    )\r\n                  }\r\n                  onClick={toggle}\r\n                ></Button>\r\n              </Tooltip>\r\n            </Space>\r\n          </div>\r\n          <Divider dashed style={{ margin: \"16px 0\" }} />\r\n          {listElement[viewType]}\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["createFromIconfontCN","scriptUrl","FileView","props","src","type","height","_jsx","Image","preview","MyIcon","style","fontSize","pieConfig","appendPadding","data","value","angleField","colorField","innerRadius","label","legend","statistic","PieView","Pie","getPadding","el","window","getComputedStyle","left","Number","parseInt","paddingLeft","right","paddingRight","top","paddingTop","bottom","paddingBottom","ContentOverflowDetector","text","rest","containerRef","useRef","isOverflowX","target","set","setIsOverflowX","useBoolean","isOverflowY","setIsOverflowY","callback","useEffect","element","current","resizeObserver","ResizeObserver","entries","entry","clientWidth","clientHeight","observe","disconnect","useDomSize","range","document","createRange","setStart","setEnd","childNodes","length","padding","rangeSize","getBoundingClientRect","width","offsetWidth","scrollWidth","offsetHeight","scrollHeight","useContentOverflow","ref","className","title","undefined","children","File","token","colorPrimary","theme","activeType","setActiveType","useState","pagination","loading","usePagination","getListData","pageSize","axios","pageIndex","then","result","list","records","total","refreshDeps","defaultPageSize","tableColumns","key","render","_","record","fileType","alias","url","dataIndex","fixed","_jsxs","Space","size","Tooltip","mouseEnterDelay","Button","icon","VerticalAlignBottomOutlined","danger","DeleteOutlined","paginationConfig","showSizeChanger","showQuickJumper","showTotal","join","onChange","viewType","toggle","useToggle","listElement","Spin","spinning","_Fragment","display","gridTemplateColumns","gridGap","map","item","textAlign","NameEllipsis","getFilenameFromPath","lineHeight","id","Pagination","marginTop","hideOnSinglePage","Empty","table","Table","rowKey","dataSource","columns","flex","Card","Divider","dashed","margin","Menu","items","AppstoreOutlined","selectedKeys","defaultOpenKeys","mode","border","onClick","Row","align","Col","span","Statistic","suffix","valueStyle","color","justifyContent","Input","enterButton","placeholder","UploadOutlined","view","UnorderedListOutlined"],"sourceRoot":""}